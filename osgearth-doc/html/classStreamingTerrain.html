<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: StreamingTerrain Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>StreamingTerrain Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="StreamingTerrain" --><!-- doxytag: inherits="Terrain" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for StreamingTerrain:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain__inherit__graph.png" border="0" usemap="#StreamingTerrain_inherit__map" alt="Inheritance graph"/></div>
<map name="StreamingTerrain_inherit__map" id="StreamingTerrain_inherit__map">
<area shape="rect" id="node2" href="classTerrain.html" title="Terrain" alt="" coords="35,5,96,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for StreamingTerrain:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain__coll__graph.png" border="0" usemap="#StreamingTerrain_coll__map" alt="Collaboration graph"/></div>
<map name="StreamingTerrain_coll__map" id="StreamingTerrain_coll__map">
<area shape="rect" id="node2" href="classTerrain.html" title="Terrain" alt="" coords="901,91,963,120"/><area shape="rect" id="node4" href="classosgEarth_1_1Threading_1_1ReadWriteMutex.html" title="osgEarth::Threading::ReadWriteMutex" alt="" coords="381,25,627,55"/><area shape="rect" id="node6" href="classosgEarth_1_1Threading_1_1Event.html" title="osgEarth::Threading::Event" alt="" coords="5,25,187,55"/><area shape="rect" id="node8" href="classosgEarth_1_1MapFrame.html" title="osgEarth::MapFrame" alt="" coords="432,88,576,117"/><area shape="rect" id="node10" href="classosgEarth_1_1MapInfo.html" title="osgEarth::MapInfo" alt="" coords="32,81,160,111"/><area shape="rect" id="node12" href="structosgEarth_1_1Revision.html" title="osgEarth::Revision" alt="" coords="29,135,163,164"/><area shape="rect" id="node14" href="classosgEarth_1_1LoadingPolicy.html" title="osgEarth::LoadingPolicy" alt="" coords="851,197,1013,227"/><area shape="rect" id="node16" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Mode \&gt;" alt="" coords="413,141,595,171"/><area shape="rect" id="node18" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; float \&gt;" alt="" coords="416,207,592,236"/><area shape="rect" id="node20" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; int \&gt;" alt="" coords="421,272,587,301"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classStreamingTerrain-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a14bfe081317e17ea196b3f3349733395">StreamingTerrain</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;update_mapf, const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;cull_mapf, <a class="el" href="classOSGTileFactory.html">OSGTileFactory</a> *factory, bool quickReleaseGLObjects)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a474732eee16f9c8d0d705c794dc2a401">libraryName</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a03ff82bf2d6823db2e651ffc3877179c">className</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classTile.html">Tile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a9d0893c36673f250b5132f19c21d91cb">createTile</a> (const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *locator) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd">getImageryTaskService</a> (int layerId)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7">getElevationTaskService</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a325ea5eac26e2c3a3447f40cc55a48d2">getTileGenerationTaskService</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#ae0dc4eef32a37a5d2c79a54e53fe9a79">updateTaskServiceThreads</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1LoadingPolicy.html">LoadingPolicy</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#abe880ae5c26652cb2c57e2aa954ef303">getLoadingPolicy</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#ae86b8a916391f2202ae956ec5b6f4d68">~StreamingTerrain</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#ad530d969062be1ebb057fe09d5b1b1dc">getNumActiveTasks</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288">updateTraversal</a> (osg::NodeVisitor &amp;nv)</td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; int, <br class="typebreak"/>
osg::ref_ptr&lt; <a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#ab8a30bf15403d34575c8a4a9efdce24b">TaskServiceMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6">createTaskService</a> (const std::string &amp;name, int id, int numThreads)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19">getTaskService</a> (int id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a81188b3e7f0a246d26702d61b4b6185d">refreshFamily</a> (const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;info, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="structStreamingTile_1_1Relative.html">StreamingTile::Relative</a> *family, bool tileTableLocked)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStreamingTerrain.html#ab8a30bf15403d34575c8a4a9efdce24b">TaskServiceMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OpenThreads::Mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">_taskServiceMutex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1LoadingPolicy.html">LoadingPolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStreamingTerrain.html#a2544ab3514d37df1c876dcdbf824a615">_elevationTaskServiceUID</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classTerrain.html">Terrain</a> implementation that supports the SEQUENTIAL and PREEMPTIVE loading policies. </p>

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00031">31</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ab8a30bf15403d34575c8a4a9efdce24b"></a><!-- doxytag: member="StreamingTerrain::TaskServiceMap" ref="ab8a30bf15403d34575c8a4a9efdce24b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt; int, osg::ref_ptr&lt; <a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> &gt; &gt; <a class="el" href="classStreamingTerrain.html#ab8a30bf15403d34575c8a4a9efdce24b">StreamingTerrain::TaskServiceMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00078">78</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a14bfe081317e17ea196b3f3349733395"></a><!-- doxytag: member="StreamingTerrain::StreamingTerrain" ref="a14bfe081317e17ea196b3f3349733395" args="(const MapFrame &amp;update_mapf, const MapFrame &amp;cull_mapf, OSGTileFactory *factory, bool quickReleaseGLObjects)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StreamingTerrain::StreamingTerrain </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>update_mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>cull_mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOSGTileFactory.html">OSGTileFactory</a> *&#160;</td>
          <td class="paramname"><em>factory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>quickReleaseGLObjects</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00041">41</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                           :

<a class="code" href="classTerrain.html#ae0bb41c9efb12319034a2aed98d167c9">Terrain</a>( update_mapf, cull_mapf, tileFactory, quickReleaseGLObjects ),
<a class="code" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a>( 0 )
{
    <a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a> = tileFactory-&gt;getTerrainOptions().loadingPolicy().get();

    setNumChildrenRequiringUpdateTraversal( 1 );
    <a class="code" href="classTerrain.html#aab4cf0cb237c9d588a0315d1cb1cdd78">_alwaysUpdate</a> = <span class="keyword">true</span>;
    <a class="code" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a> = <a class="code" href="namespaceosgEarth.html#a4d3ce597f710473506d2bc6c620ebe66">computeLoadingThreads</a>(<a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a>);

    <a class="code" href="Notify.html#a47e8673ea1af7af40d431820bf3856fa">OE_INFO</a> &lt;&lt; <a class="code" href="StreamingTerrain_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Using a total of &quot;</span> &lt;&lt; <a class="code" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a> &lt;&lt; <span class="stringliteral">&quot; loading threads &quot;</span> &lt;&lt; std::endl;
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a14bfe081317e17ea196b3f3349733395_cgraph.png" border="0" usemap="#classStreamingTerrain_a14bfe081317e17ea196b3f3349733395_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a14bfe081317e17ea196b3f3349733395_cgraph" id="classStreamingTerrain_a14bfe081317e17ea196b3f3349733395_cgraph">
<area shape="rect" id="node3" href="namespaceosgEarth.html#a4d3ce597f710473506d2bc6c620ebe66" title="osgEarth::computeLoadingThreads" alt="" coords="297,59,521,88"/><area shape="rect" id="node5" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="676,5,828,35"/><area shape="rect" id="node14" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="296,112,523,141"/><area shape="rect" id="node16" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="284,165,535,195"/><area shape="rect" id="node7" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="669,59,835,88"/><area shape="rect" id="node9" href="classosgEarth_1_1LoadingPolicy.html#ab13d51639e8c5121a1bcf39023201124" title="osgEarth::LoadingPolicy::numLoadingThreads" alt="" coords="608,112,896,141"/><area shape="rect" id="node11" href="classosgEarth_1_1LoadingPolicy.html#aa2176cfdbfcb155e57cf2dc3861ecb4d" title="osgEarth::LoadingPolicy::numLoadingThreadsPerCore" alt="" coords="584,165,920,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae86b8a916391f2202ae956ec5b6f4d68"></a><!-- doxytag: member="StreamingTerrain::~StreamingTerrain" ref="ae86b8a916391f2202ae956ec5b6f4d68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StreamingTerrain::~StreamingTerrain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00058">58</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//nop</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a03ff82bf2d6823db2e651ffc3877179c"></a><!-- doxytag: member="StreamingTerrain::className" ref="a03ff82bf2d6823db2e651ffc3877179c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual const char* StreamingTerrain::className </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classTerrain.html#a69532a51b857a4dda527377b971d1410">Terrain</a>.</p>

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00041">41</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;StreamingTerrain&quot;</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="ac1c8ed64e96684c269de171b875d98e6"></a><!-- doxytag: member="StreamingTerrain::createTaskService" ref="ac1c8ed64e96684c269de171b875d98e6" args="(const std::string &amp;name, int id, int numThreads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> * StreamingTerrain::createTaskService </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numThreads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00244">244</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    ScopedLock&lt;Mutex&gt; lock( <a class="code" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">_taskServiceMutex</a> );

    <span class="comment">// first, double-check that the service wasn&#39;t created during the locking process:</span>
    TaskServiceMap::iterator itr = <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.find(<span class="keywordtype">id</span>);
    <span class="keywordflow">if</span> (itr != <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.end())
        <span class="keywordflow">return</span> itr-&gt;second.get();

    <span class="comment">// ok, make a new one</span>
    <a class="code" href="classosgEarth_1_1TaskService.html">TaskService</a>* service =  <span class="keyword">new</span> <a class="code" href="classosgEarth_1_1TaskService.html">TaskService</a>( name, numThreads );
    <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>[id] = service;
    <span class="keywordflow">return</span> service;
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_ac1c8ed64e96684c269de171b875d98e6_icgraph.png" border="0" usemap="#classStreamingTerrain_ac1c8ed64e96684c269de171b875d98e6_icgraph" alt=""/></div>
<map name="classStreamingTerrain_ac1c8ed64e96684c269de171b875d98e6_icgraph" id="classStreamingTerrain_ac1c8ed64e96684c269de171b875d98e6_icgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7" title="StreamingTerrain::getElevationTaskService" alt="" coords="308,163,583,192"/><area shape="rect" id="node11" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd" title="StreamingTerrain::getImageryTaskService" alt="" coords="312,97,579,127"/><area shape="rect" id="node31" href="classStreamingTerrain.html#a325ea5eac26e2c3a3447f40cc55a48d2" title="StreamingTerrain::getTileGenerationTaskService" alt="" coords="293,19,597,48"/><area shape="rect" id="node5" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="1288,189,1597,219"/><area shape="rect" id="node9" href="classStreamingTerrain.html#ae0dc4eef32a37a5d2c79a54e53fe9a79" title="StreamingTerrain::updateTaskServiceThreads" alt="" coords="645,163,933,192"/><area shape="rect" id="node7" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="1823,45,2044,75"/><area shape="rect" id="node13" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="655,5,924,35"/><area shape="rect" id="node16" href="classStreamingTile.html#a590b6bfe6b0f45a141d23b12335120d4" title="StreamingTile::servicePendingImageRequests" alt="" coords="1297,136,1588,165"/><area shape="rect" id="node20" href="classStreamingTile.html#a0db8a9b2d174bee80dbf2400afdc53b7" title="StreamingTile::updateImagery" alt="" coords="692,109,887,139"/><area shape="rect" id="node18" href="structanonymous__namespace_02OSGTileFactory_8cpp_03_1_1PopulateStreamingTileDataCallback.html#aade6b7897e131e11cab381286cf78c38" title="anonymous_namespace\{OSGTileFactory::cpp\}::PopulateStreamingTileDataCallback::operator()" alt="" coords="1647,136,2220,165"/><area shape="rect" id="node22" href="classOSGTerrainEngineNode.html#a3324fbb70b931691acfaedaf2f616b3c" title="OSGTerrainEngineNode::addImageLayer" alt="" coords="981,109,1240,139"/><area shape="rect" id="node26" href="classStreamingTile.html#ae7f8a6834500fecea7af885197ec0341" title="StreamingTile::installRequests" alt="" coords="1011,163,1211,192"/><area shape="rect" id="node24" href="classOSGTerrainEngineNode.html#a7f38c5716c207f45a7ae84fb5a2cacdf" title="OSGTerrainEngineNode::onMapModelChanged" alt="" coords="1295,83,1591,112"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d0893c36673f250b5132f19c21d91cb"></a><!-- doxytag: member="StreamingTerrain::createTile" ref="a9d0893c36673f250b5132f19c21d91cb" args="(const TileKey &amp;key, GeoLocator *locator) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTile.html">Tile</a> * StreamingTerrain::createTile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *&#160;</td>
          <td class="paramname"><em>locator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classTerrain.html#a52edad697f780d4ad9ce90f07308c5fb">Terrain</a>.</p>

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00064">64</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classStreamingTile.html">StreamingTile</a>( key, locator, this-&gt;<a class="code" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5">getQuickReleaseGLObjects</a>() );
}
</pre></div>
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a9d0893c36673f250b5132f19c21d91cb_cgraph.png" border="0" usemap="#classStreamingTerrain_a9d0893c36673f250b5132f19c21d91cb_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a9d0893c36673f250b5132f19c21d91cb_cgraph" id="classStreamingTerrain_a9d0893c36673f250b5132f19c21d91cb_cgraph">
<area shape="rect" id="node3" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5" title="Terrain::getQuickReleaseGLObjects" alt="" coords="240,5,472,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9b7e61092ae82b5f97c432e91ab7afe7"></a><!-- doxytag: member="StreamingTerrain::getElevationTaskService" ref="a9b7e61092ae82b5f97c432e91ab7afe7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> * StreamingTerrain::getElevationTaskService </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00275">275</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classosgEarth_1_1TaskService.html">TaskService</a>* service = <a class="code" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19">getTaskService</a>( <a class="code" href="StreamingTerrain_8cpp.html#a1af3206a8ba19fe7d42c1b8598517a0a">ELEVATION_TASK_SERVICE_ID</a> );
    <span class="keywordflow">if</span> (!service)
    {
        service = <a class="code" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6">createTaskService</a>( <span class="stringliteral">&quot;elevation&quot;</span>, <a class="code" href="StreamingTerrain_8cpp.html#a1af3206a8ba19fe7d42c1b8598517a0a">ELEVATION_TASK_SERVICE_ID</a>, 1 );
    }
    <span class="keywordflow">return</span> service;
}
</pre></div>
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_cgraph.png" border="0" usemap="#classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_cgraph" id="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_cgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6" title="StreamingTerrain::createTaskService" alt="" coords="329,5,567,35"/><area shape="rect" id="node5" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19" title="StreamingTerrain::getTaskService" alt="" coords="339,59,557,88"/></map>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_icgraph.png" border="0" usemap="#classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_icgraph" alt=""/></div>
<map name="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_icgraph" id="classStreamingTerrain_a9b7e61092ae82b5f97c432e91ab7afe7_icgraph">
<area shape="rect" id="node3" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="328,5,637,35"/><area shape="rect" id="node7" href="classStreamingTerrain.html#ae0dc4eef32a37a5d2c79a54e53fe9a79" title="StreamingTerrain::updateTaskServiceThreads" alt="" coords="339,59,627,88"/><area shape="rect" id="node5" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="687,5,908,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a65a4b0aecff3b213badbacf55f3874dd"></a><!-- doxytag: member="StreamingTerrain::getImageryTaskService" ref="a65a4b0aecff3b213badbacf55f3874dd" args="(int layerId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> * StreamingTerrain::getImageryTaskService </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>layerId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00287">287</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classosgEarth_1_1TaskService.html">TaskService</a>* service = <a class="code" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19">getTaskService</a>( layerId );
    <span class="keywordflow">if</span> (!service)
    {
        std::stringstream buf;
        buf &lt;&lt; <span class="stringliteral">&quot;layer &quot;</span> &lt;&lt; layerId;
        std::string bufStr = buf.str();
        service = <a class="code" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6">createTaskService</a>( bufStr, layerId, 1 );
    }
    <span class="keywordflow">return</span> service;
}
</pre></div>
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_cgraph.png" border="0" usemap="#classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_cgraph" id="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_cgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6" title="StreamingTerrain::createTaskService" alt="" coords="321,5,559,35"/><area shape="rect" id="node5" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19" title="StreamingTerrain::getTaskService" alt="" coords="331,59,549,88"/></map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_icgraph.png" border="0" usemap="#classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_icgraph" alt=""/></div>
<map name="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_icgraph" id="classStreamingTerrain_a65a4b0aecff3b213badbacf55f3874dd_icgraph">
<area shape="rect" id="node3" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="657,164,927,193"/><area shape="rect" id="node7" href="classStreamingTile.html#a590b6bfe6b0f45a141d23b12335120d4" title="StreamingTile::servicePendingImageRequests" alt="" coords="985,5,1276,35"/><area shape="rect" id="node11" href="classStreamingTile.html#a0db8a9b2d174bee80dbf2400afdc53b7" title="StreamingTile::updateImagery" alt="" coords="367,84,561,113"/><area shape="rect" id="node23" href="classStreamingTerrain.html#ae0dc4eef32a37a5d2c79a54e53fe9a79" title="StreamingTerrain::updateTaskServiceThreads" alt="" coords="320,188,608,217"/><area shape="rect" id="node5" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="1511,111,1732,140"/><area shape="rect" id="node9" href="structanonymous__namespace_02OSGTileFactory_8cpp_03_1_1PopulateStreamingTileDataCallback.html#aade6b7897e131e11cab381286cf78c38" title="anonymous_namespace\{OSGTileFactory::cpp\}::PopulateStreamingTileDataCallback::operator()" alt="" coords="1335,5,1908,35"/><area shape="rect" id="node13" href="classOSGTerrainEngineNode.html#a3324fbb70b931691acfaedaf2f616b3c" title="OSGTerrainEngineNode::addImageLayer" alt="" coords="663,111,921,140"/><area shape="rect" id="node17" href="classStreamingTile.html#ae7f8a6834500fecea7af885197ec0341" title="StreamingTile::installRequests" alt="" coords="692,57,892,87"/><area shape="rect" id="node15" href="classOSGTerrainEngineNode.html#a7f38c5716c207f45a7ae84fb5a2cacdf" title="OSGTerrainEngineNode::onMapModelChanged" alt="" coords="983,112,1279,141"/><area shape="rect" id="node19" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="976,59,1285,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abe880ae5c26652cb2c57e2aa954ef303"></a><!-- doxytag: member="StreamingTerrain::getLoadingPolicy" ref="abe880ae5c26652cb2c57e2aa954ef303" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1LoadingPolicy.html">LoadingPolicy</a>&amp; StreamingTerrain::getLoadingPolicy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00059">59</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a>; }
</pre></div>
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_abe880ae5c26652cb2c57e2aa954ef303_icgraph.png" border="0" usemap="#classStreamingTerrain_abe880ae5c26652cb2c57e2aa954ef303_icgraph" alt=""/></div>
<map name="classStreamingTerrain_abe880ae5c26652cb2c57e2aa954ef303_icgraph" id="classStreamingTerrain_abe880ae5c26652cb2c57e2aa954ef303_icgraph">
<area shape="rect" id="node3" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="284,5,553,35"/><area shape="rect" id="node7" href="classStreamingTile.html#a0db8a9b2d174bee80dbf2400afdc53b7" title="StreamingTile::updateImagery" alt="" coords="321,59,516,88"/><area shape="rect" id="node5" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="1444,59,1665,88"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a3324fbb70b931691acfaedaf2f616b3c" title="OSGTerrainEngineNode::addImageLayer" alt="" coords="603,57,861,87"/><area shape="rect" id="node13" href="classStreamingTile.html#ae7f8a6834500fecea7af885197ec0341" title="StreamingTile::installRequests" alt="" coords="632,111,832,140"/><area shape="rect" id="node11" href="classOSGTerrainEngineNode.html#a7f38c5716c207f45a7ae84fb5a2cacdf" title="OSGTerrainEngineNode::onMapModelChanged" alt="" coords="916,57,1212,87"/><area shape="rect" id="node15" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="909,111,1219,140"/><area shape="rect" id="node18" href="classStreamingTile.html#a590b6bfe6b0f45a141d23b12335120d4" title="StreamingTile::servicePendingImageRequests" alt="" coords="919,164,1209,193"/><area shape="rect" id="node20" href="structanonymous__namespace_02OSGTileFactory_8cpp_03_1_1PopulateStreamingTileDataCallback.html#aade6b7897e131e11cab381286cf78c38" title="anonymous_namespace\{OSGTileFactory::cpp\}::PopulateStreamingTileDataCallback::operator()" alt="" coords="1268,164,1841,193"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad530d969062be1ebb057fe09d5b1b1dc"></a><!-- doxytag: member="StreamingTerrain::getNumActiveTasks" ref="ad530d969062be1ebb057fe09d5b1b1dc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned StreamingTerrain::getNumActiveTasks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classTerrain.html#afd02e4aa2254c3d334bb0c457f0a5bb9">Terrain</a>.</p>

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00196">196</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    ScopedLock&lt;Mutex&gt; lock(const_cast&lt;StreamingTerrain*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">_taskServiceMutex</a> );

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> total = 0;
    <span class="keywordflow">for</span> (TaskServiceMap::const_iterator itr = <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.begin(); itr != <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.end(); ++itr)
    {
        total += itr-&gt;second-&gt;getNumRequests();
    }
    <span class="keywordflow">return</span> total;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a961db9a6d8166378cd1acbf9a4545e19"></a><!-- doxytag: member="StreamingTerrain::getTaskService" ref="a961db9a6d8166378cd1acbf9a4545e19" args="(int id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> * StreamingTerrain::getTaskService </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00260">260</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    ScopedLock&lt;Mutex&gt; lock( <a class="code" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">_taskServiceMutex</a> );
    TaskServiceMap::iterator itr = <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.find(<span class="keywordtype">id</span>);
    <span class="keywordflow">if</span> (itr != <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.end())
    {
        <span class="keywordflow">return</span> itr-&gt;second.get();
    }
    <span class="keywordflow">return</span> <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a961db9a6d8166378cd1acbf9a4545e19_icgraph.png" border="0" usemap="#classStreamingTerrain_a961db9a6d8166378cd1acbf9a4545e19_icgraph" alt=""/></div>
<map name="classStreamingTerrain_a961db9a6d8166378cd1acbf9a4545e19_icgraph" id="classStreamingTerrain_a961db9a6d8166378cd1acbf9a4545e19_icgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7" title="StreamingTerrain::getElevationTaskService" alt="" coords="289,163,564,192"/><area shape="rect" id="node11" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd" title="StreamingTerrain::getImageryTaskService" alt="" coords="293,97,560,127"/><area shape="rect" id="node31" href="classStreamingTerrain.html#a325ea5eac26e2c3a3447f40cc55a48d2" title="StreamingTerrain::getTileGenerationTaskService" alt="" coords="275,19,579,48"/><area shape="rect" id="node5" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="1269,189,1579,219"/><area shape="rect" id="node9" href="classStreamingTerrain.html#ae0dc4eef32a37a5d2c79a54e53fe9a79" title="StreamingTerrain::updateTaskServiceThreads" alt="" coords="627,163,915,192"/><area shape="rect" id="node7" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="1804,45,2025,75"/><area shape="rect" id="node13" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="636,5,905,35"/><area shape="rect" id="node16" href="classStreamingTile.html#a590b6bfe6b0f45a141d23b12335120d4" title="StreamingTile::servicePendingImageRequests" alt="" coords="1279,136,1569,165"/><area shape="rect" id="node20" href="classStreamingTile.html#a0db8a9b2d174bee80dbf2400afdc53b7" title="StreamingTile::updateImagery" alt="" coords="673,109,868,139"/><area shape="rect" id="node18" href="structanonymous__namespace_02OSGTileFactory_8cpp_03_1_1PopulateStreamingTileDataCallback.html#aade6b7897e131e11cab381286cf78c38" title="anonymous_namespace\{OSGTileFactory::cpp\}::PopulateStreamingTileDataCallback::operator()" alt="" coords="1628,136,2201,165"/><area shape="rect" id="node22" href="classOSGTerrainEngineNode.html#a3324fbb70b931691acfaedaf2f616b3c" title="OSGTerrainEngineNode::addImageLayer" alt="" coords="963,109,1221,139"/><area shape="rect" id="node26" href="classStreamingTile.html#ae7f8a6834500fecea7af885197ec0341" title="StreamingTile::installRequests" alt="" coords="992,163,1192,192"/><area shape="rect" id="node24" href="classOSGTerrainEngineNode.html#a7f38c5716c207f45a7ae84fb5a2cacdf" title="OSGTerrainEngineNode::onMapModelChanged" alt="" coords="1276,83,1572,112"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a325ea5eac26e2c3a3447f40cc55a48d2"></a><!-- doxytag: member="StreamingTerrain::getTileGenerationTaskService" ref="a325ea5eac26e2c3a3447f40cc55a48d2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> * StreamingTerrain::getTileGenerationTaskService </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00301">301</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classosgEarth_1_1TaskService.html">TaskService</a>* service = <a class="code" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19">getTaskService</a>( <a class="code" href="StreamingTerrain_8cpp.html#a91ef0d8582c177480596698f6d16d867">TILE_GENERATION_TASK_SERVICE_ID</a> );
    <span class="keywordflow">if</span> (!service)
    {
        <span class="keywordtype">int</span> numCompileThreads = 
            <a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a>.<a class="code" href="classosgEarth_1_1LoadingPolicy.html#a2bc2ef39a5570dff0452725ee24becdc">numCompileThreads</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() ? osg::maximum( 1, <a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a>.<a class="code" href="classosgEarth_1_1LoadingPolicy.html#a2bc2ef39a5570dff0452725ee24becdc">numCompileThreads</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() ) :
            (<span class="keywordtype">int</span>)osg::maximum( 1.0f, <a class="code" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">_loadingPolicy</a>.numCompileThreadsPerCore().value() * (<span class="keywordtype">float</span>)GetNumberOfProcessors() );

        service = <a class="code" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6">createTaskService</a>( &quot;tilegen&quot;, <a class="code" href="StreamingTerrain_8cpp.html#a91ef0d8582c177480596698f6d16d867">TILE_GENERATION_TASK_SERVICE_ID</a>, numCompileThreads );
    }
    return service;
}
</pre></div>
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_cgraph.png" border="0" usemap="#classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_cgraph" id="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_cgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6" title="StreamingTerrain::createTaskService" alt="" coords="408,5,645,35"/><area shape="rect" id="node5" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19" title="StreamingTerrain::getTaskService" alt="" coords="417,59,636,88"/><area shape="rect" id="node7" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="444,112,609,141"/><area shape="rect" id="node9" href="classosgEarth_1_1LoadingPolicy.html#a2bc2ef39a5570dff0452725ee24becdc" title="osgEarth::LoadingPolicy::numCompileThreads" alt="" coords="381,165,672,195"/><area shape="rect" id="node11" href="classosgEarth_1_1LoadingPolicy.html#a37d4a93066d54b7226bfcbbfa0deddde" title="osgEarth::LoadingPolicy::numCompileThreadsPerCore" alt="" coords="357,219,696,248"/><area shape="rect" id="node13" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="444,272,609,301"/></map>
</div>
</p>

<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_icgraph.png" border="0" usemap="#classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_icgraph" alt=""/></div>
<map name="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_icgraph" id="classStreamingTerrain_a325ea5eac26e2c3a3447f40cc55a48d2_icgraph">
<area shape="rect" id="node3" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="359,5,628,35"/><area shape="rect" id="node5" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="679,5,900,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a474732eee16f9c8d0d705c794dc2a401"></a><!-- doxytag: member="StreamingTerrain::libraryName" ref="a474732eee16f9c8d0d705c794dc2a401" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual const char* StreamingTerrain::libraryName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classTerrain.html#a27a8d72a968255c8f119fab2edd180fb">Terrain</a>.</p>

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00040">40</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;osgEarth&quot;</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a81188b3e7f0a246d26702d61b4b6185d"></a><!-- doxytag: member="StreamingTerrain::refreshFamily" ref="a81188b3e7f0a246d26702d61b4b6185d" args="(const MapInfo &amp;info, const TileKey &amp;key, StreamingTile::Relative *family, bool tileTableLocked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StreamingTerrain::refreshFamily </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structStreamingTile_1_1Relative.html">StreamingTile::Relative</a> *&#160;</td>
          <td class="paramname"><em>family</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tileTableLocked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00071">71</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osgTerrain::TileID tileId = key.<a class="code" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69">getTileId</a>();

    <span class="comment">// geocentric maps wrap around in the X dimension.</span>
    <span class="keywordtype">bool</span> wrapX = mapInfo.isGeocentric();
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tileCountX, tileCountY;
    mapInfo.getProfile()-&gt;getNumTiles( tileId.level, tileCountX, tileCountY );

    <span class="comment">// Relative::PARENT</span>
    {
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a6eeee28eb1d4af374e994df4e687141d">expected</a> = <span class="keyword">true</span>; <span class="comment">// TODO: is this always correct?</span>
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = -1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>.clear();
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a8b7ea50bb0e501ba0c66cdb5b0c39c17">tileID</a> = osgTerrain::TileID( tileId.level-1, tileId.x/2, tileId.y/2 );

        osg::ref_ptr&lt;StreamingTile&gt; parent;
        <a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].tileID, parent, !tileTableLocked );
        <span class="keywordflow">if</span> ( parent.valid() )
        {
            family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = parent-&gt;getElevationLOD();

            <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> relLayers;
            parent-&gt;getCustomColorLayers( relLayers );

            <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = relLayers.begin(); i != relLayers.end(); ++i )
            {
                family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faae4e8c25a83db78730c04ca10c53bea5">StreamingTile::Relative::PARENT</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>[i-&gt;first] = i-&gt;second.getLevelOfDetail();
            }
        }
    }

    <span class="comment">// Relative::WEST</span>
    {
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a6eeee28eb1d4af374e994df4e687141d">expected</a> = tileId.x &gt; 0 || wrapX;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = -1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>.clear();
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a8b7ea50bb0e501ba0c66cdb5b0c39c17">tileID</a> = osgTerrain::TileID( tileId.level, tileId.x &gt; 0? tileId.x-1 : tileCountX-1, tileId.y );
        osg::ref_ptr&lt;StreamingTile&gt; west;
        <a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].tileID, west, !tileTableLocked );
        <span class="keywordflow">if</span> ( west.valid() )
        {
            family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = west-&gt;getElevationLOD();

            <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> relLayers;
            west-&gt;getCustomColorLayers( relLayers );

            <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = relLayers.begin(); i != relLayers.end(); ++i )
            {
                family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fab59036d85abe497e10efb6b412344487">StreamingTile::Relative::WEST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>[i-&gt;first] = i-&gt;second.getLevelOfDetail();
            }
        }
    }

    <span class="comment">// Relative::NORTH</span>
    {
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a6eeee28eb1d4af374e994df4e687141d">expected</a> = tileId.y &lt; (int)tileCountY-1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = -1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>.clear();
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a8b7ea50bb0e501ba0c66cdb5b0c39c17">tileID</a> = osgTerrain::TileID( tileId.level, tileId.x, tileId.y &lt; (<span class="keywordtype">int</span>)tileCountY-1 ? tileId.y+1 : 0 );
        osg::ref_ptr&lt;StreamingTile&gt; north;
        <a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].tileID, north, !tileTableLocked );
        <span class="keywordflow">if</span> ( north.valid() )
        {
            family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = north-&gt;getElevationLOD();

            <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> relLayers;
            north-&gt;getCustomColorLayers( relLayers );

            <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = relLayers.begin(); i != relLayers.end(); ++i )
            {
                family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fad014397f45bce9b2fc77c3a6017ffdfd">StreamingTile::Relative::NORTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>[i-&gt;first] = i-&gt;second.getLevelOfDetail();
            }
        }
    }

    <span class="comment">// Relative::EAST</span>
    {
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a6eeee28eb1d4af374e994df4e687141d">expected</a> = tileId.x &lt; (int)tileCountX-1 || wrapX;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = -1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>.clear();
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a8b7ea50bb0e501ba0c66cdb5b0c39c17">tileID</a> = osgTerrain::TileID( tileId.level, tileId.x &lt; (<span class="keywordtype">int</span>)tileCountX-1 ? tileId.x+1 : 0, tileId.y );
        osg::ref_ptr&lt;StreamingTile&gt; east;
        <a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].tileID, east, !tileTableLocked );
        <span class="keywordflow">if</span> ( east.valid() )
        {
            family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = east-&gt;getElevationLOD();

            <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> relLayers;
            east-&gt;getCustomColorLayers( relLayers );

            <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = relLayers.begin(); i != relLayers.end(); ++i )
            {
                family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9faa9d8ed031984c1ac6378d5f34fd85ff5">StreamingTile::Relative::EAST</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>[i-&gt;first] = i-&gt;second.getLevelOfDetail();
            }
        }
    }

    <span class="comment">// Relative::SOUTH</span>
    {
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a6eeee28eb1d4af374e994df4e687141d">expected</a> = tileId.y &gt; 0;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = -1;
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>.clear();
        family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a8b7ea50bb0e501ba0c66cdb5b0c39c17">tileID</a> = osgTerrain::TileID( tileId.level, tileId.x, tileId.y &gt; 0 ? tileId.y-1 : tileCountY-1 );
        osg::ref_ptr&lt;StreamingTile&gt; south;
        <a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].tileID, south, !tileTableLocked );
        <span class="keywordflow">if</span> ( south.valid() )
        {
            family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#a682fe3b273c5e68363600345431096f1">elevLOD</a> = south-&gt;getElevationLOD();

            <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> relLayers;
            south-&gt;getCustomColorLayers( relLayers );

            <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = relLayers.begin(); i != relLayers.end(); ++i )
            {
                family[<a class="code" href="structStreamingTile_1_1Relative.html#a831d9d01d0506e065df3849c806e7b9fa8c289b489099fda71dd2275e23b71a41">StreamingTile::Relative::SOUTH</a>].<a class="code" href="structStreamingTile_1_1Relative.html#ad66fadf361ab51bdfc5e83b8ac0e4f15">imageLODs</a>[i-&gt;first] = i-&gt;second.getLevelOfDetail();
            }
        }
    }
}
</pre></div>
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_cgraph.png" border="0" usemap="#classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_cgraph" alt=""/></div>
<map name="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_cgraph" id="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1Profile.html#aee25e5f52c64be4e48a5d9bde2f10c7f" title="osgEarth::Profile::getNumTiles" alt="" coords="267,5,467,35"/><area shape="rect" id="node5" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655" title="osgEarth::MapInfo::getProfile" alt="" coords="271,59,463,88"/><area shape="rect" id="node7" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419" title="Terrain::getTile" alt="" coords="312,112,421,141"/><area shape="rect" id="node9" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69" title="osgEarth::TileKey::getTileId" alt="" coords="275,165,459,195"/><area shape="rect" id="node11" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="261,219,472,248"/></map>
</div>
</p>

<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_icgraph.png" border="0" usemap="#classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_icgraph" alt=""/></div>
<map name="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_icgraph" id="classStreamingTerrain_a81188b3e7f0a246d26702d61b4b6185d_icgraph">
<area shape="rect" id="node3" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="263,5,484,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0dc4eef32a37a5d2c79a54e53fe9a79"></a><!-- doxytag: member="StreamingTerrain::updateTaskServiceThreads" ref="ae0dc4eef32a37a5d2c79a54e53fe9a79" args="(const MapFrame &amp;mapf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StreamingTerrain::updateTaskServiceThreads </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Updates the catalog of task service threads - this gets called by the OSGTerrainEngine in response to a change in the Map's data model. The map frame is that of the terrain engine. </p>

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00316">316</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//Get the maximum elevation weight</span>
    <span class="keywordtype">float</span> elevationWeight = 0.0f;
    <span class="keywordflow">for</span> (ElevationLayerVector::const_iterator itr = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().begin(); itr != mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().end(); ++itr)
    {
        <a class="code" href="classosgEarth_1_1ElevationLayer.html">ElevationLayer</a>* layer = itr-&gt;get();
        <span class="keywordtype">float</span> w = layer-&gt;<a class="code" href="classosgEarth_1_1ElevationLayer.html#abd9557d0b3d30c3beece155b5f46b207">getTerrainLayerOptions</a>().<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a282bf6d4eb710794c0bf2ee0f121a5ee">loadingWeight</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>();
        <span class="keywordflow">if</span> (w &gt; elevationWeight) elevationWeight = w;
    }

    <span class="keywordtype">float</span> totalImageWeight = 0.0f;
    <span class="keywordflow">for</span> (ImageLayerVector::const_iterator itr = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().begin(); itr != mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().end(); ++itr)
    {
        totalImageWeight += itr-&gt;get()-&gt;getTerrainLayerOptions().loadingWeight().value();
    }

    <span class="keywordtype">float</span> totalWeight = elevationWeight + totalImageWeight;

    <span class="keywordflow">if</span> (elevationWeight &gt; 0.0f)
    {
        <span class="comment">//Determine how many threads each layer gets</span>
        <span class="keywordtype">int</span> numElevationThreads = (int)osg::round((<span class="keywordtype">float</span>)<a class="code" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a> * (elevationWeight / totalWeight ));
        <a class="code" href="Notify.html#a47e8673ea1af7af40d431820bf3856fa">OE_INFO</a> &lt;&lt; <a class="code" href="StreamingTerrain_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Elevation Threads = &quot;</span> &lt;&lt; numElevationThreads &lt;&lt; std::endl;
        <a class="code" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7">getElevationTaskService</a>()-&gt;<a class="code" href="classosgEarth_1_1TaskService.html#a54d41dbbc6b76430c9b2db8b158a518d">setNumThreads</a>( numElevationThreads );
    }

    <span class="keywordflow">for</span> (ImageLayerVector::const_iterator itr = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().begin(); itr != mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().end(); ++itr)
    {
        <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1TerrainLayerOptions.html">TerrainLayerOptions</a>&amp; opt = itr-&gt;get()-&gt;getTerrainLayerOptions();
        <span class="keywordtype">int</span> imageThreads = (int)osg::round((<span class="keywordtype">float</span>)<a class="code" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">_numLoadingThreads</a> * (opt.<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a282bf6d4eb710794c0bf2ee0f121a5ee">loadingWeight</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() / totalWeight ));
        <a class="code" href="Notify.html#a47e8673ea1af7af40d431820bf3856fa">OE_INFO</a> &lt;&lt; <a class="code" href="StreamingTerrain_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Image Threads for &quot;</span> &lt;&lt; itr-&gt;get()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; imageThreads &lt;&lt; std::endl;
        <a class="code" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd">getImageryTaskService</a>( itr-&gt;get()-&gt;getUID() )-&gt;setNumThreads( imageThreads );
    }
}
</pre></div>
<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_ae0dc4eef32a37a5d2c79a54e53fe9a79_cgraph.png" border="0" usemap="#classStreamingTerrain_ae0dc4eef32a37a5d2c79a54e53fe9a79_cgraph" alt=""/></div>
<map name="classStreamingTerrain_ae0dc4eef32a37a5d2c79a54e53fe9a79_cgraph" id="classStreamingTerrain_ae0dc4eef32a37a5d2c79a54e53fe9a79_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="376,5,619,35"/><area shape="rect" id="node5" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7" title="StreamingTerrain::getElevationTaskService" alt="" coords="360,59,635,88"/><area shape="rect" id="node11" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd" title="StreamingTerrain::getImageryTaskService" alt="" coords="364,112,631,141"/><area shape="rect" id="node15" href="classosgEarth_1_1ElevationLayer.html#abd9557d0b3d30c3beece155b5f46b207" title="osgEarth::ElevationLayer::getTerrainLayerOptions" alt="" coords="343,165,652,195"/><area shape="rect" id="node17" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="384,219,611,248"/><area shape="rect" id="node19" href="classosgEarth_1_1TerrainLayerOptions.html#a282bf6d4eb710794c0bf2ee0f121a5ee" title="osgEarth::TerrainLayerOptions::loadingWeight" alt="" coords="353,272,641,301"/><area shape="rect" id="node21" href="classosgEarth_1_1TaskService.html#a54d41dbbc6b76430c9b2db8b158a518d" title="osgEarth::TaskService::setNumThreads" alt="" coords="369,325,625,355"/><area shape="rect" id="node27" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="415,379,580,408"/><area shape="rect" id="node7" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6" title="StreamingTerrain::createTaskService" alt="" coords="720,112,957,141"/><area shape="rect" id="node9" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19" title="StreamingTerrain::getTaskService" alt="" coords="729,59,948,88"/><area shape="rect" id="node23" href="classosgEarth_1_1TaskService.html#af404a937e3e426a94a4bc1768677b0c3" title="osgEarth::TaskService::adjustThreadCount" alt="" coords="703,325,975,355"/><area shape="rect" id="node25" href="classosgEarth_1_1TaskService.html#a341869927ec57741da8708490dd360cc" title="osgEarth::TaskService::removeFinishedThreads" alt="" coords="1025,325,1327,355"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abec4dd0941a5da4fe93a87f9c1c68288"></a><!-- doxytag: member="StreamingTerrain::updateTraversal" ref="abec4dd0941a5da4fe93a87f9c1c68288" args="(osg::NodeVisitor &amp;nv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StreamingTerrain::updateTraversal </td>
          <td>(</td>
          <td class="paramtype">osg::NodeVisitor &amp;&#160;</td>
          <td class="paramname"><em>nv</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classTerrain.html#a9ad47ff455864209d044fc9f514a3917">Terrain</a>.</p>

<p>Definition at line <a class="el" href="StreamingTerrain_8cpp_source.html#l00209">209</a> of file <a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// this stamp keeps track of when requests are dispatched. If a request&#39;s stamp gets too</span>
    <span class="comment">// old, it is considered &quot;expired&quot; and subject to cancelation</span>
    <span class="keywordtype">int</span> stamp = nv.getFrameStamp()-&gt;getFrameNumber();

    <span class="comment">// update the frame stamp on the task services. This is necessary to support </span>
    <span class="comment">// automatic request cancelation for image requests.</span>
    {
        ScopedLock&lt;Mutex&gt; lock( <a class="code" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">_taskServiceMutex</a> );
        <span class="keywordflow">for</span> (TaskServiceMap::iterator i = <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.begin(); i != <a class="code" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">_taskServices</a>.end(); ++i)
        {
            i-&gt;second-&gt;setStamp( stamp );
        }
    }

    <span class="comment">// next, go through the live tiles and process update-traversal requests. This</span>
    <span class="comment">// requires a read-lock on the master tiles table.</span>
    {
        <a class="code" href="structosgEarth_1_1Threading_1_1ScopedReadLock.html">Threading::ScopedReadLock</a> tileTableReadLock( <a class="code" href="classTerrain.html#a74515d4894c2fe1aa2b1a1dc95e58159">_tilesMutex</a> );

        <span class="keywordflow">for</span>( TileTable::const_iterator i = <a class="code" href="classTerrain.html#a6a601e9c216f62021e78d518157743be">_tiles</a>.begin(); i != <a class="code" href="classTerrain.html#a6a601e9c216f62021e78d518157743be">_tiles</a>.end(); ++i )
        {
            <a class="code" href="classStreamingTile.html">StreamingTile</a>* tile = <span class="keyword">static_cast&lt;</span><a class="code" href="classStreamingTile.html">StreamingTile</a>*<span class="keyword">&gt;</span>( i-&gt;second.get() );

            <span class="comment">// update the neighbor list for each tile.</span>
            <a class="code" href="classStreamingTerrain.html#a81188b3e7f0a246d26702d61b4b6185d">refreshFamily</a>( <a class="code" href="classTerrain.html#a677dc6fd225c006df4641eda4afe606a">_update_mapf</a>.<a class="code" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6">getMapInfo</a>(), tile-&gt;<a class="code" href="classTile.html#a2a22a4db7d90fc63c3b4f9a574f3a3b7">getKey</a>(), tile-&gt;<a class="code" href="classStreamingTile.html#aace001895e99a47c4f2312bc27a666ea">getFamily</a>(), true );

            tile-&gt;<a class="code" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c">servicePendingElevationRequests</a>( <a class="code" href="classTerrain.html#a677dc6fd225c006df4641eda4afe606a">_update_mapf</a>, stamp, <span class="keyword">true</span> );                   
            tile-&gt;<a class="code" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158">serviceCompletedRequests</a>( <a class="code" href="classTerrain.html#a677dc6fd225c006df4641eda4afe606a">_update_mapf</a>, <span class="keyword">true</span> );
        }
    }
}
</pre></div>
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classStreamingTerrain_abec4dd0941a5da4fe93a87f9c1c68288_cgraph.png" border="0" usemap="#classStreamingTerrain_abec4dd0941a5da4fe93a87f9c1c68288_cgraph" alt=""/></div>
<map name="classStreamingTerrain_abec4dd0941a5da4fe93a87f9c1c68288_cgraph" id="classStreamingTerrain_abec4dd0941a5da4fe93a87f9c1c68288_cgraph">
<area shape="rect" id="node3" href="classStreamingTile.html#aace001895e99a47c4f2312bc27a666ea" title="StreamingTile::getFamily" alt="" coords="349,5,515,35"/><area shape="rect" id="node5" href="classTile.html#a2a22a4db7d90fc63c3b4f9a574f3a3b7" title="Tile::getKey" alt="" coords="387,59,477,88"/><area shape="rect" id="node7" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="324,112,540,141"/><area shape="rect" id="node9" href="classStreamingTerrain.html#a81188b3e7f0a246d26702d61b4b6185d" title="StreamingTerrain::refreshFamily" alt="" coords="328,165,536,195"/><area shape="rect" id="node21" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="297,1208,567,1237"/><area shape="rect" id="node100" href="classStreamingTile.html#a9a221aaf49fa9e76410187f9c8f2904c" title="StreamingTile::servicePendingElevationRequests" alt="" coords="277,480,587,509"/><area shape="rect" id="node11" href="classosgEarth_1_1Profile.html#aee25e5f52c64be4e48a5d9bde2f10c7f" title="osgEarth::Profile::getNumTiles" alt="" coords="723,5,923,35"/><area shape="rect" id="node13" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655" title="osgEarth::MapInfo::getProfile" alt="" coords="727,59,919,88"/><area shape="rect" id="node15" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419" title="Terrain::getTile" alt="" coords="768,219,877,248"/><area shape="rect" id="node17" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69" title="osgEarth::TileKey::getTileId" alt="" coords="731,112,915,141"/><area shape="rect" id="node19" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="717,165,928,195"/><area shape="rect" id="node23" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b" title="osgEarth::TaskService::add" alt="" coords="731,323,915,352"/><area shape="rect" id="node25" href="classCustomTerrainTechnique.html#a7d7b1a908eca66efdfb79e2e303f9059" title="CustomTerrainTechnique::applyTileUpdates" alt="" coords="684,1101,961,1131"/><area shape="rect" id="node27" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="747,1155,899,1184"/><area shape="rect" id="node29" href="classTile.html#a4e4090f1ab302287bc204d561131934d" title="Tile::getCustomColorLayer" alt="" coords="733,1208,912,1237"/><area shape="rect" id="node31" href="classCustomColorLayer.html#a761fdfb07388be6ac6438c2b96c7639d" title="CustomColorLayer::getImage" alt="" coords="727,1261,919,1291"/><area shape="rect" id="node33" href="classosgEarth_1_1MapFrame.html#ac8659dca0910f6e044663b9e6eafbff1" title="osgEarth::MapFrame::getImageLayerByUID" alt="" coords="684,1315,961,1344"/><area shape="rect" id="node35" href="classStreamingTerrain.html#a65a4b0aecff3b213badbacf55f3874dd" title="StreamingTerrain::getImageryTaskService" alt="" coords="689,995,956,1024"/><area shape="rect" id="node41" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="1113,375,1343,404"/><area shape="rect" id="node43" href="classCustomColorLayer.html#aa73c4a8b29afd2dc9b91d2760ff7af76" title="CustomColorLayer::getLevelOfDetail" alt="" coords="705,1368,940,1397"/><area shape="rect" id="node45" href="classStreamingTerrain.html#abe880ae5c26652cb2c57e2aa954ef303" title="StreamingTerrain::getLoadingPolicy" alt="" coords="709,1421,936,1451"/><area shape="rect" id="node47" href="classCustomColorLayer.html#ac9725adc85c194c7b4a4c99ed26d3d52" title="CustomColorLayer::getLocator" alt="" coords="723,1475,923,1504"/><area shape="rect" id="node49" href="classCustomColorLayer.html#ad12227786b31ff5da2efd655bdcbba84" title="CustomColorLayer::getMapLayer" alt="" coords="1121,1552,1335,1581"/><area shape="rect" id="node51" href="classStreamingTile.html#abd011cb4c26839a52289df20c670f05a" title="StreamingTile::getStreamingTerrain" alt="" coords="1115,735,1341,764"/><area shape="rect" id="node55" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="709,1683,936,1712"/><area shape="rect" id="node57" href="classTile.html#a7b527d4e0394d85eff74a8673d1df7b4" title="Tile::getTerrainTechnique" alt="" coords="739,1736,907,1765"/><area shape="rect" id="node60" href="classTerrain.html#a5828a4c82e6fff2fa2719b94d68596b6" title="Terrain::getTileFactory" alt="" coords="1152,800,1304,829"/><area shape="rect" id="node62" href="classStreamingTerrain.html#a325ea5eac26e2c3a3447f40cc55a48d2" title="StreamingTerrain::getTileGenerationTaskService" alt="" coords="671,1048,975,1077"/><area shape="rect" id="node74" href="classCustomColorLayer.html#af539b1957865fd51e5eb75ef7bd497ed" title="CustomColorLayer::getUID" alt="" coords="1137,1617,1319,1647"/><area shape="rect" id="node76" href="classosgEarth_1_1Layer.html#a0d511f070bd26bfb168480732f6912c1" title="osgEarth::Layer::getUID" alt="" coords="1147,505,1309,535"/><area shape="rect" id="node78" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c" title="osgEarth::Drivers::OSGTerrainOptions::heightFieldSkirtRatio" alt="" coords="636,1789,1009,1819"/><area shape="rect" id="node80" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="1115,876,1341,905"/><area shape="rect" id="node82" href="classosgEarth_1_1LoadingPolicy.html#afa55fd05b2cbc7e8182a98f5351263e0" title="osgEarth::LoadingPolicy::mode" alt="" coords="721,1843,924,1872"/><area shape="rect" id="node84" href="classStreamingTile.html#a2c2d2ed792dffde7a017f0ad872a6e9d" title="StreamingTile::queueTileUpdate" alt="" coords="719,1896,927,1925"/><area shape="rect" id="node86" href="classStreamingTile.html#af39c309dcf8d51d78b0e62ffac76fe44" title="StreamingTile::readyForNewImagery" alt="" coords="705,427,940,456"/><area shape="rect" id="node92" href="classTile.html#ae2949d83ef131a1022e28d3fd9b8e2d3" title="Tile::setCustomColorLayer" alt="" coords="733,1579,912,1608"/><area shape="rect" id="node96" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d" title="Tile::setElevationLayer" alt="" coords="745,1949,900,1979"/><area shape="rect" id="node98" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1153,583,1303,612"/><area shape="rect" id="node37" href="classStreamingTerrain.html#ac1c8ed64e96684c269de171b875d98e6" title="StreamingTerrain::createTaskService" alt="" coords="1109,941,1347,971"/><area shape="rect" id="node39" href="classStreamingTerrain.html#a961db9a6d8166378cd1acbf9a4545e19" title="StreamingTerrain::getTaskService" alt="" coords="1119,995,1337,1024"/><area shape="rect" id="node53" href="classTile.html#a7c0c83673975b5474d61a9845a0cd02b" title="Tile::getTerrain" alt="" coords="1445,735,1555,764"/><area shape="rect" id="node66" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="1145,1048,1311,1077"/><area shape="rect" id="node68" href="classosgEarth_1_1LoadingPolicy.html#a2bc2ef39a5570dff0452725ee24becdc" title="osgEarth::LoadingPolicy::numCompileThreads" alt="" coords="1083,1101,1373,1131"/><area shape="rect" id="node70" href="classosgEarth_1_1LoadingPolicy.html#a37d4a93066d54b7226bfcbbfa0deddde" title="osgEarth::LoadingPolicy::numCompileThreadsPerCore" alt="" coords="1059,1155,1397,1184"/><area shape="rect" id="node72" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1145,1208,1311,1237"/><area shape="rect" id="node88" href="structStreamingTile_1_1Relative.html#ad014b8bebb181960a0880003ae0862b6" title="StreamingTile::Relative::getImageLOD" alt="" coords="1105,428,1351,457"/><area shape="rect" id="node103" href="classStreamingTerrain.html#a9b7e61092ae82b5f97c432e91ab7afe7" title="StreamingTerrain::getElevationTaskService" alt="" coords="685,941,960,971"/><area shape="rect" id="node110" href="classStreamingTile.html#ae7f8a6834500fecea7af885197ec0341" title="StreamingTile::installRequests" alt="" coords="723,787,923,816"/><area shape="rect" id="node115" href="classStreamingTile.html#ae7ca253b6c46fc42cb75eacea836d43f" title="StreamingTile::readyForNewElevation" alt="" coords="701,480,944,509"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2544ab3514d37df1c876dcdbf824a615"></a><!-- doxytag: member="StreamingTerrain::_elevationTaskServiceUID" ref="a2544ab3514d37df1c876dcdbf824a615" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a> <a class="el" href="classStreamingTerrain.html#a2544ab3514d37df1c876dcdbf824a615">StreamingTerrain::_elevationTaskServiceUID</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00084">84</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<a class="anchor" id="adf4a7bb3ed21cf9ad022dc937b363307"></a><!-- doxytag: member="StreamingTerrain::_loadingPolicy" ref="adf4a7bb3ed21cf9ad022dc937b363307" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1LoadingPolicy.html">LoadingPolicy</a> <a class="el" href="classStreamingTerrain.html#adf4a7bb3ed21cf9ad022dc937b363307">StreamingTerrain::_loadingPolicy</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00083">83</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<a class="anchor" id="a625f0718fd4d3cc68fc26ad23f68aa16"></a><!-- doxytag: member="StreamingTerrain::_numLoadingThreads" ref="a625f0718fd4d3cc68fc26ad23f68aa16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classStreamingTerrain.html#a625f0718fd4d3cc68fc26ad23f68aa16">StreamingTerrain::_numLoadingThreads</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00082">82</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<a class="anchor" id="a16f3ebecd79ab69b5899d2d34fc1f3ad"></a><!-- doxytag: member="StreamingTerrain::_taskServiceMutex" ref="a16f3ebecd79ab69b5899d2d34fc1f3ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpenThreads::Mutex <a class="el" href="classStreamingTerrain.html#a16f3ebecd79ab69b5899d2d34fc1f3ad">StreamingTerrain::_taskServiceMutex</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00081">81</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<a class="anchor" id="a3c8cb31fd4798d7781451f69f0e214a1"></a><!-- doxytag: member="StreamingTerrain::_taskServices" ref="a3c8cb31fd4798d7781451f69f0e214a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStreamingTerrain.html#ab8a30bf15403d34575c8a4a9efdce24b">TaskServiceMap</a> <a class="el" href="classStreamingTerrain.html#a3c8cb31fd4798d7781451f69f0e214a1">StreamingTerrain::_taskServices</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="StreamingTerrain_source.html#l00080">80</a> of file <a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="StreamingTerrain_source.html">StreamingTerrain</a></li>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="StreamingTerrain_8cpp_source.html">StreamingTerrain.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:02:46 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
