<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: osgEarth::TextureCompositorMultiTexture Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceosgEarth.html">osgEarth</a>      </li>
      <li class="navelem"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html">TextureCompositorMultiTexture</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>osgEarth::TextureCompositorMultiTexture Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="osgEarth::TextureCompositorMultiTexture" --><!-- doxytag: inherits="osgEarth::TextureCompositorTechnique" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for osgEarth::TextureCompositorMultiTexture:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture__inherit__graph.png" border="0" usemap="#osgEarth_1_1TextureCompositorMultiTexture_inherit__map" alt="Inheritance graph"/></div>
<map name="osgEarth_1_1TextureCompositorMultiTexture_inherit__map" id="osgEarth_1_1TextureCompositorMultiTexture_inherit__map">
<area shape="rect" id="node2" href="classosgEarth_1_1TextureCompositorTechnique.html" title="osgEarth::TextureCompositorTechnique" alt="" coords="11,83,264,112"/><area shape="rect" id="node4" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="93,5,181,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for osgEarth::TextureCompositorMultiTexture:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture__coll__graph.png" border="0" usemap="#osgEarth_1_1TextureCompositorMultiTexture_coll__map" alt="Collaboration graph"/></div>
<map name="osgEarth_1_1TextureCompositorMultiTexture_coll__map" id="osgEarth_1_1TextureCompositorMultiTexture_coll__map">
<area shape="rect" id="node2" href="classosgEarth_1_1TextureCompositorTechnique.html" title="osgEarth::TextureCompositorTechnique" alt="" coords="11,83,264,112"/><area shape="rect" id="node4" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="93,5,181,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classosgEarth_1_1TextureCompositorMultiTexture-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a3c7e9e3192411a49918444405a383251">TextureCompositorMultiTexture</a> (bool useGPU, const <a class="el" href="classosgEarth_1_1TerrainOptions.html">TerrainOptions</a> &amp;options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a5d72942dd2503462eb9410b82cbe0204">requiresUnitTextureSpace</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a04a1e6c7c33655dcc18ebdbb9df9c27a">usesShaderComposition</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a1736c57dde083fcebdbbb40597a20378">blendingRequiresSecondarySlot</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a09f36589d31ae7d0a274186a0c76dbb9">updateMasterStateSet</a> (osg::StateSet *stateSet, const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;layout) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a83efbad6405a0eaa8e3c99b73a16b219">supportsLayerUpdate</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a5977d8111dd985bc6d7466c4181970b0">applyLayerUpdate</a> (osg::StateSet *stateSet, <a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a> layerUID, const <a class="el" href="classosgEarth_1_1GeoImage.html">GeoImage</a> &amp;preparedImage, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;tileExtent, const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;layout, osg::StateSet *parentStateSet) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Shader *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a0aec01ed285f75ff7452a36e683cd06f">createSamplerFunction</a> (<a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a> layerUID, const std::string &amp;functionName, osg::Shader::Type type, const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;layout) const </td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#abe221c785f99816551a9aa02193ee9d2">_lodTransitionTime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a89f821261c912c0c98fad0d43e3fd6e2">_useGPU</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a6b724dbdbbdb3d1ff7751ad5848d0a43">_enableMipmappingOnUpdatedTextures</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a33976d04d4ae0477977b5be46ed1e2e2">_enableMipmapping</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Texture compositor that implements multitexturing. It supports either GPU multitexturing (using shaders and taking advantage of all the hardware's resources) or FFP (fixed-function pipeline) multitexturing, which limits you to the old ARB texture unit limit (usually 4). </p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00031">31</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3c7e9e3192411a49918444405a383251"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::TextureCompositorMultiTexture" ref="a3c7e9e3192411a49918444405a383251" args="(bool useGPU, const TerrainOptions &amp;options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TextureCompositorMultiTexture::TextureCompositorMultiTexture </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useGPU</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TerrainOptions.html">TerrainOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TextureCompositorMulti_8cpp_source.html#l00264">264</a> of file <a class="el" href="TextureCompositorMulti_8cpp_source.html">TextureCompositorMulti.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                         :
<a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#abe221c785f99816551a9aa02193ee9d2">_lodTransitionTime</a>( *options.<a class="code" href="classosgEarth_1_1TerrainOptions.html#adce744e93a9ddcb6ca12100b8af7f6ce">lodTransitionTime</a>() ),
<a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a33976d04d4ae0477977b5be46ed1e2e2">_enableMipmapping</a>( *options.<a class="code" href="classosgEarth_1_1TerrainOptions.html#a9e1fb1429d479daa76de61e3a4d84ae0">enableMipmapping</a>() ),
<a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a89f821261c912c0c98fad0d43e3fd6e2">_useGPU</a>( useGPU )
{
    <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a6b724dbdbbdb3d1ff7751ad5848d0a43">_enableMipmappingOnUpdatedTextures</a> = <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">Registry::instance</a>()-&gt;<a class="code" href="classosgEarth_1_1Registry.html#a8ebadcf08d3161838cb5d2d7e0dcdbb3">getCapabilities</a>().<a class="code" href="classosgEarth_1_1Capabilities.html#af9d0aaae9f14a22a62d69bdb7b157fc6">supportsMipmappedTextureUpdates</a>();
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture_a3c7e9e3192411a49918444405a383251_cgraph.png" border="0" usemap="#classosgEarth_1_1TextureCompositorMultiTexture_a3c7e9e3192411a49918444405a383251_cgraph" alt=""/></div>
<map name="classosgEarth_1_1TextureCompositorMultiTexture_a3c7e9e3192411a49918444405a383251_cgraph" id="classosgEarth_1_1TextureCompositorMultiTexture_a3c7e9e3192411a49918444405a383251_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1Registry.html#a8ebadcf08d3161838cb5d2d7e0dcdbb3" title="osgEarth::Registry::getCapabilities" alt="" coords="581,32,805,61"/><area shape="rect" id="node5" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09" title="osgEarth::Registry::instance" alt="" coords="600,85,787,115"/><area shape="rect" id="node18" href="classosgEarth_1_1Capabilities.html#af9d0aaae9f14a22a62d69bdb7b157fc6" title="osgEarth::Capabilities::supportsMipmappedTextureUpdates" alt="" coords="509,139,877,168"/><area shape="rect" id="node7" href="classosgEarth_1_1Registry.html#acb15d8aa051bf36ea92a86ee6c00bc3c" title="osgEarth::Registry::Registry" alt="" coords="927,85,1113,115"/><area shape="rect" id="node9" href="classosgEarth_1_1Registry.html#a5a56910fe4fcb016cbae8e7728e8bf47" title="osgEarth::Registry::addMimeTypeExtensionMapping" alt="" coords="1163,5,1491,35"/><area shape="rect" id="node12" href="classosgEarth_1_1DiskCacheOptions.html#a89cba75c20b7201cebec071d7e68883c" title="osgEarth::DiskCacheOptions::path" alt="" coords="1215,59,1439,88"/><area shape="rect" id="node14" href="classosgEarth_1_1Registry.html#a958fd3968bf858d536d8468a330c66da" title="osgEarth::Registry::setCacheOverride" alt="" coords="1205,112,1448,141"/><area shape="rect" id="node16" href="classosgEarth_1_1DiskCacheOptions.html#af3b83ff8d6fb16c2f8688b51cbeceea2" title="osgEarth::DiskCacheOptions::setPath" alt="" coords="1204,165,1449,195"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5977d8111dd985bc6d7466c4181970b0"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::applyLayerUpdate" ref="a5977d8111dd985bc6d7466c4181970b0" args="(osg::StateSet *stateSet, UID layerUID, const GeoImage &amp;preparedImage, const TileKey &amp;tileExtent, const TextureLayout &amp;layout, osg::StateSet *parentStateSet) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TextureCompositorMultiTexture::applyLayerUpdate </td>
          <td>(</td>
          <td class="paramtype">osg::StateSet *&#160;</td>
          <td class="paramname"><em>stateSet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a>&#160;</td>
          <td class="paramname"><em>layerUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1GeoImage.html">GeoImage</a> &amp;&#160;</td>
          <td class="paramname"><em>preparedImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>tileExtent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>layout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::StateSet *&#160;</td>
          <td class="paramname"><em>parentStateSet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a9f44c4126f9723fd2aab28116d9162a2">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_8cpp_source.html#l00273">273</a> of file <a class="el" href="TextureCompositorMulti_8cpp_source.html">TextureCompositorMulti.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::Texture2D* tex = <a class="code" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#a1d1f12df27e645590ff9f84e17aff758">s_getTexture</a>( stateSet, layerUID, layout, parentStateSet);
    <span class="keywordflow">if</span> ( tex )
    {
        osg::Image* image = preparedImage.<a class="code" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978">getImage</a>();
        image-&gt;dirty(); <span class="comment">// required for ensure the texture recognizes the image as new data</span>
        tex-&gt;setImage( image );

        <span class="comment">// set up proper mipmapping filters:</span>
        <span class="keywordflow">if</span> (<a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a33976d04d4ae0477977b5be46ed1e2e2">_enableMipmapping</a> &amp;&amp;
            <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a6b724dbdbbdb3d1ff7751ad5848d0a43">_enableMipmappingOnUpdatedTextures</a> &amp;&amp; 
            <a class="code" href="classosgEarth_1_1ImageUtils.html#adc82eb06755c3da5c257d9db7e88f6f5">ImageUtils::isPowerOfTwo</a>( image ) &amp;&amp; 
            !(!image-&gt;isMipmap() &amp;&amp; <a class="code" href="classosgEarth_1_1ImageUtils.html#a8414cd0e0ff334e107ce1b2ce4c862f4">ImageUtils::isCompressed</a>(image)) )
        {
            <span class="keywordflow">if</span> ( tex-&gt;getFilter(osg::Texture::MIN_FILTER) != osg::Texture::LINEAR_MIPMAP_LINEAR )
                tex-&gt;setFilter( osg::Texture::MIN_FILTER, osg::Texture::LINEAR_MIPMAP_LINEAR );
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( tex-&gt;getFilter(osg::Texture::MIN_FILTER) != osg::Texture::LINEAR )
        {
            tex-&gt;setFilter( osg::Texture::MIN_FILTER, osg::Texture::LINEAR );
        }

        <span class="keywordtype">bool</span> lodBlending = layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f">getSlot</a>(layerUID, 1) &gt;= 0;

        <span class="keywordflow">if</span> (<a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a33976d04d4ae0477977b5be46ed1e2e2">_enableMipmapping</a> &amp;&amp;
            <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a6b724dbdbbdb3d1ff7751ad5848d0a43">_enableMipmappingOnUpdatedTextures</a> &amp;&amp; 
            lodBlending )
        {
            <span class="keywordtype">int</span> slot = layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f">getSlot</a>(layerUID, 0);

            <span class="comment">// update the timestamp on the image layer to support blending.</span>
            <span class="keywordtype">float</span> now = (float)osg::Timer::instance()-&gt;delta_s( osg::Timer::instance()-&gt;getStartTick(), osg::Timer::instance()-&gt;tick() );
            <a class="code" href="classosgEarth_1_1ArrayUniform.html">ArrayUniform</a> stampUniform( <span class="stringliteral">&quot;osgearth_SlotStamp&quot;</span>, osg::Uniform::FLOAT, stateSet, layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#a80dd8997ff697d951e28cfa65c6e1a34">getMaxUsedSlot</a>() + 1 );
            stampUniform.<a class="code" href="classosgEarth_1_1ArrayUniform.html#a4f9517444cec6a7e298bf48366d39a49">setElement</a>( slot, now );            

            <span class="comment">// set the texture matrix to properly position the blend (parent) texture</span>
            osg::Matrix mat;
            <span class="keywordflow">if</span> ( parentStateSet != 0L )
            {
                <span class="keywordtype">unsigned</span> tileX, tileY;
                tileKey.getTileXY(tileX, tileY);

                mat(0,0) = 0.5f;
                mat(1,1) = 0.5f;
                mat(3,0) = (float)(tileX % 2) * 0.5f;
                mat(3,1) = (float)(1 - tileY % 2) * 0.5f;
            }

            <a class="code" href="classosgEarth_1_1ArrayUniform.html">ArrayUniform</a> texMatUniform( <span class="stringliteral">&quot;osgearth_TexBlendMatrix&quot;</span>, osg::Uniform::FLOAT_MAT4, stateSet, layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#a80dd8997ff697d951e28cfa65c6e1a34">getMaxUsedSlot</a>() + 1 );
            texMatUniform.<a class="code" href="classosgEarth_1_1ArrayUniform.html#a4f9517444cec6a7e298bf48366d39a49">setElement</a>( slot, mat );
        }
    }
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture_a5977d8111dd985bc6d7466c4181970b0_cgraph.png" border="0" usemap="#classosgEarth_1_1TextureCompositorMultiTexture_a5977d8111dd985bc6d7466c4181970b0_cgraph" alt=""/></div>
<map name="classosgEarth_1_1TextureCompositorMultiTexture_a5977d8111dd985bc6d7466c4181970b0_cgraph" id="classosgEarth_1_1TextureCompositorMultiTexture_a5977d8111dd985bc6d7466c4181970b0_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="543,5,745,35"/><area shape="rect" id="node5" href="classosgEarth_1_1TextureLayout.html#a80dd8997ff697d951e28cfa65c6e1a34" title="osgEarth::TextureLayout::getMaxUsedSlot" alt="" coords="509,59,779,88"/><area shape="rect" id="node7" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f" title="osgEarth::TextureLayout::getSlot" alt="" coords="1029,191,1243,220"/><area shape="rect" id="node9" href="classosgEarth_1_1TileKey.html#a545d2e3b93a77fb983ef283e080fc390" title="osgEarth::TileKey::getTileXY" alt="" coords="549,163,739,192"/><area shape="rect" id="node11" href="classosgEarth_1_1ImageUtils.html#a8414cd0e0ff334e107ce1b2ce4c862f4" title="osgEarth::ImageUtils::isCompressed" alt="" coords="525,216,763,245"/><area shape="rect" id="node13" href="classosgEarth_1_1ImageUtils.html#adc82eb06755c3da5c257d9db7e88f6f5" title="osgEarth::ImageUtils::isPowerOfTwo" alt="" coords="525,269,763,299"/><area shape="rect" id="node15" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#a1d1f12df27e645590ff9f84e17aff758" title="anonymous_namespace\{TextureCompositorMulti::cpp\}::s_getTexture" alt="" coords="433,323,855,352"/><area shape="rect" id="node20" href="classosgEarth_1_1ArrayUniform.html#a4f9517444cec6a7e298bf48366d39a49" title="osgEarth::ArrayUniform::setElement" alt="" coords="528,376,760,405"/><area shape="rect" id="node18" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#a4d275306e92ddf2acc33ad07460c3c4a" title="anonymous_namespace\{TextureCompositorMulti::cpp\}::makeSamplerName" alt="" coords="905,323,1367,352"/><area shape="rect" id="node22" href="classosgEarth_1_1ArrayUniform.html#a182d7f1dafee7cec9623abe1fe55b572" title="osgEarth::ArrayUniform::ensureCapacity" alt="" coords="1007,376,1265,405"/><area shape="rect" id="node24" href="classosgEarth_1_1ArrayUniform.html#abfd797402dd51c449b8ce5a8ad2c89b3" title="osgEarth::ArrayUniform::isValid" alt="" coords="1417,403,1623,432"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1736c57dde083fcebdbbb40597a20378"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::blendingRequiresSecondarySlot" ref="a1736c57dde083fcebdbbb40597a20378" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osgEarth::TextureCompositorMultiTexture::blendingRequiresSecondarySlot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a336531b7656d6e93f19e2413622afc91">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00040">40</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a0aec01ed285f75ff7452a36e683cd06f"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::createSamplerFunction" ref="a0aec01ed285f75ff7452a36e683cd06f" args="(UID layerUID, const std::string &amp;functionName, osg::Shader::Type type, const TextureLayout &amp;layout) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Shader * TextureCompositorMultiTexture::createSamplerFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceosgEarth.html#afc79b9a35ed940aaee797fde114b9801">UID</a>&#160;</td>
          <td class="paramname"><em>layerUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>functionName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::Shader::Type&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>layout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a37114affc56a19ba7f484fcf73dfade6">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_8cpp_source.html#l00462">462</a> of file <a class="el" href="TextureCompositorMulti_8cpp_source.html">TextureCompositorMulti.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::Shader* result = 0L;

    <span class="keywordtype">int</span> slot = layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f">getSlot</a>( layerUID );
    <span class="keywordflow">if</span> ( slot &gt;= 0 )
    {
        std::stringstream buf;

        buf &lt;&lt; <span class="stringliteral">&quot;uniform sampler2D tex&quot;</span>&lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot;; \n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;vec4 &quot;</span> &lt;&lt; functionName &lt;&lt; <span class="stringliteral">&quot;() \n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;{ \n&quot;</span>;

        <span class="keywordflow">if</span> ( type == osg::Shader::VERTEX )
            buf &lt;&lt; <span class="stringliteral">&quot;    return texture2D(tex&quot;</span>&lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot;, gl_MultiTexCoord&quot;</span>&lt;&lt; slot &lt;&lt;<span class="stringliteral">&quot;.st); \n&quot;</span>;
        <span class="keywordflow">else</span>
            buf &lt;&lt; <span class="stringliteral">&quot;    return texture2D(tex&quot;</span>&lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot;, gl_TexCoord[&quot;</span>&lt;&lt; slot &lt;&lt; <span class="stringliteral">&quot;].st); \n&quot;</span>;

        buf &lt;&lt; <span class="stringliteral">&quot;} \n&quot;</span>;

        std::string str = buf.str();
        result = <span class="keyword">new</span> osg::Shader( type, str );
    }
    <span class="keywordflow">return</span> result;
}
</pre></div>
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture_a0aec01ed285f75ff7452a36e683cd06f_cgraph.png" border="0" usemap="#classosgEarth_1_1TextureCompositorMultiTexture_a0aec01ed285f75ff7452a36e683cd06f_cgraph" alt=""/></div>
<map name="classosgEarth_1_1TextureCompositorMultiTexture_a0aec01ed285f75ff7452a36e683cd06f_cgraph" id="classosgEarth_1_1TextureCompositorMultiTexture_a0aec01ed285f75ff7452a36e683cd06f_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f" title="osgEarth::TextureLayout::getSlot" alt="" coords="463,5,676,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5d72942dd2503462eb9410b82cbe0204"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::requiresUnitTextureSpace" ref="a5d72942dd2503462eb9410b82cbe0204" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osgEarth::TextureCompositorMultiTexture::requiresUnitTextureSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a22abf1f1dcde57fb3303ca77f424b752">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00036">36</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a83efbad6405a0eaa8e3c99b73a16b219"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::supportsLayerUpdate" ref="a83efbad6405a0eaa8e3c99b73a16b219" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osgEarth::TextureCompositorMultiTexture::supportsLayerUpdate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a5f26d3a2afdafaf22e2e2e6b9fbf9428">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00044">44</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a09f36589d31ae7d0a274186a0c76dbb9"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::updateMasterStateSet" ref="a09f36589d31ae7d0a274186a0c76dbb9" args="(osg::StateSet *stateSet, const TextureLayout &amp;layout) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TextureCompositorMultiTexture::updateMasterStateSet </td>
          <td>(</td>
          <td class="paramtype">osg::StateSet *&#160;</td>
          <td class="paramname"><em>stateSet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TextureLayout.html">TextureLayout</a> &amp;&#160;</td>
          <td class="paramname"><em>layout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a73dd2bcd6e498e45b0600b69d795e47b">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_8cpp_source.html#l00334">334</a> of file <a class="el" href="TextureCompositorMulti_8cpp_source.html">TextureCompositorMulti.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> numSlots = layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#a80dd8997ff697d951e28cfa65c6e1a34">getMaxUsedSlot</a>() + 1;
    <span class="keywordtype">int</span> maxUnits = numSlots;

    <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a89f821261c912c0c98fad0d43e3fd6e2">_useGPU</a> )
    {
        <span class="comment">// Validate against the max number of GPU texture units:</span>
        <span class="keywordflow">if</span> ( maxUnits &gt; <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">Registry::instance</a>()-&gt;getCapabilities().getMaxGPUTextureUnits() )
        {
            maxUnits = <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">Registry::instance</a>()-&gt;<a class="code" href="classosgEarth_1_1Registry.html#a8ebadcf08d3161838cb5d2d7e0dcdbb3">getCapabilities</a>().<a class="code" href="classosgEarth_1_1Capabilities.html#a4a5058dbd84538cb7a3d1828220c6346">getMaxGPUTextureUnits</a>();

            <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt; <a class="code" href="TextureCompositorMulti_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a>
                &lt;&lt; <span class="stringliteral">&quot;Warning! You have exceeded the number of texture units available on your GPU (&quot;</span>
                &lt;&lt; maxUnits &lt;&lt; <span class="stringliteral">&quot;). Consider using another compositing mode.&quot;</span>
                &lt;&lt; std::endl;
        }

        <a class="code" href="classosgEarth_1_1VirtualProgram.html">VirtualProgram</a>* vp = <span class="keyword">static_cast&lt;</span><a class="code" href="classosgEarth_1_1VirtualProgram.html">VirtualProgram</a>*<span class="keyword">&gt;</span>( stateSet-&gt;getAttribute(osg::StateAttribute::PROGRAM) );
        <span class="keywordflow">if</span> ( maxUnits &gt; 0 )
        {
            <span class="comment">// see if we have any blended layers:</span>
            <span class="keywordtype">bool</span> hasBlending = layout.<a class="code" href="classosgEarth_1_1TextureLayout.html#aba1cece66c799cdf7fa7b94a5ba880ff">containsSecondarySlots</a>( maxUnits ); 

            vp-&gt;<a class="code" href="classosgEarth_1_1VirtualProgram.html#a0dde219eb0e46b7c3b019a65111b8a61">setShader</a>( 
                <span class="stringliteral">&quot;osgearth_vert_setupTexturing&quot;</span>, 
                <a class="code" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#a6eef5408e3e880b71eee8805377cf40b">s_createTextureVertexShader</a>(layout, hasBlending) );

            vp-&gt;<a class="code" href="classosgEarth_1_1VirtualProgram.html#a0dde219eb0e46b7c3b019a65111b8a61">setShader</a>( 
                <span class="stringliteral">&quot;osgearth_frag_applyTexturing&quot;</span>,
                <a class="code" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#ad9d5f9bf6a00c1663a6c452815cf5508">s_createTextureFragShaderFunction</a>(layout, maxUnits, hasBlending, <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#abe221c785f99816551a9aa02193ee9d2">_lodTransitionTime</a> ) );
        }
        <span class="keywordflow">else</span>
        {
            vp-&gt;<a class="code" href="classosgEarth_1_1VirtualProgram.html#ac6c553c45b72ce922747065d6a91f448">removeShader</a>( <span class="stringliteral">&quot;osgearth_frag_applyTexturing&quot;</span>, osg::Shader::FRAGMENT );
            vp-&gt;<a class="code" href="classosgEarth_1_1VirtualProgram.html#ac6c553c45b72ce922747065d6a91f448">removeShader</a>( <span class="stringliteral">&quot;osgearth_vert_setupTexturing&quot;</span>, osg::Shader::VERTEX );
        }
    }

    <span class="keywordflow">else</span>
    {
        <span class="comment">// Validate against the maximum number of textures available in FFP mode.</span>
        <span class="keywordflow">if</span> ( maxUnits &gt; <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">Registry::instance</a>()-&gt;getCapabilities().getMaxFFPTextureUnits() )
        {
            maxUnits = <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">Registry::instance</a>()-&gt;<a class="code" href="classosgEarth_1_1Registry.html#a8ebadcf08d3161838cb5d2d7e0dcdbb3">getCapabilities</a>().<a class="code" href="classosgEarth_1_1Capabilities.html#aa0586203267c6ccbbb6b5bdf35570a57">getMaxFFPTextureUnits</a>();
            <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt; <a class="code" href="TextureCompositorMulti_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; 
                <span class="stringliteral">&quot;Warning! You have exceeded the number of texture units available in fixed-function pipeline &quot;</span>
                <span class="stringliteral">&quot;mode on your graphics hardware (&quot;</span> &lt;&lt; maxUnits &lt;&lt; <span class="stringliteral">&quot;). Consider using another &quot;</span>
                <span class="stringliteral">&quot;compositing mode.&quot;</span> &lt;&lt; std::endl;
        }

        <span class="comment">// FFP multitexturing requires that we set up a series of TexCombine attributes:</span>
        <span class="keywordflow">if</span> (maxUnits == 1)
        {
            osg::TexEnv* texenv = <span class="keyword">new</span> osg::TexEnv(osg::TexEnv::MODULATE);
            stateSet-&gt;setTextureAttributeAndModes(0, texenv, osg::StateAttribute::ON);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (maxUnits &gt;= 2)
        {
            <span class="comment">//Blend together the colors and accumulate the alpha values of textures 0 and 1 on unit 0</span>
            {
                osg::TexEnvCombine* texenv = <span class="keyword">new</span> osg::TexEnvCombine;
                texenv-&gt;setCombine_RGB(osg::TexEnvCombine::INTERPOLATE);
                texenv-&gt;setCombine_Alpha(osg::TexEnvCombine::ADD);

                texenv-&gt;setSource0_RGB(osg::TexEnvCombine::TEXTURE0+1);
                texenv-&gt;setOperand0_RGB(osg::TexEnvCombine::SRC_COLOR);
                texenv-&gt;setSource0_Alpha(osg::TexEnvCombine::TEXTURE0+1);
                texenv-&gt;setOperand0_Alpha(osg::TexEnvCombine::SRC_ALPHA);

                texenv-&gt;setSource1_RGB(osg::TexEnvCombine::TEXTURE0+0);
                texenv-&gt;setOperand1_RGB(osg::TexEnvCombine::SRC_COLOR);
                texenv-&gt;setSource1_Alpha(osg::TexEnvCombine::TEXTURE0+0);
                texenv-&gt;setOperand1_Alpha(osg::TexEnvCombine::SRC_ALPHA);

                texenv-&gt;setSource2_RGB(osg::TexEnvCombine::TEXTURE0+1);
                texenv-&gt;setOperand2_RGB(osg::TexEnvCombine::SRC_ALPHA);

                stateSet-&gt;setTextureAttributeAndModes(0, texenv, osg::StateAttribute::ON);
            }


            <span class="comment">//For textures 2 and beyond, blend them together with the previous</span>
            <span class="comment">//Add the alpha values of this unit and the previous unit</span>
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> unit = 1; unit &lt; maxUnits-1; ++unit)
            {
                osg::TexEnvCombine* texenv = <span class="keyword">new</span> osg::TexEnvCombine;
                texenv-&gt;setCombine_RGB(osg::TexEnvCombine::INTERPOLATE);
                texenv-&gt;setCombine_Alpha(osg::TexEnvCombine::ADD);

                texenv-&gt;setSource0_RGB(osg::TexEnvCombine::TEXTURE0+unit+1);
                texenv-&gt;setOperand0_RGB(osg::TexEnvCombine::SRC_COLOR);
                texenv-&gt;setSource0_Alpha(osg::TexEnvCombine::TEXTURE0+unit+1);
                texenv-&gt;setOperand0_Alpha(osg::TexEnvCombine::SRC_ALPHA);

                texenv-&gt;setSource1_RGB(osg::TexEnvCombine::PREVIOUS);
                texenv-&gt;setOperand1_RGB(osg::TexEnvCombine::SRC_COLOR);
                texenv-&gt;setSource1_Alpha(osg::TexEnvCombine::PREVIOUS);
                texenv-&gt;setOperand1_Alpha(osg::TexEnvCombine::SRC_ALPHA);

                texenv-&gt;setSource2_RGB(osg::TexEnvCombine::TEXTURE0+unit+1);
                texenv-&gt;setOperand2_RGB(osg::TexEnvCombine::SRC_ALPHA);

                stateSet-&gt;setTextureAttributeAndModes(unit, texenv, osg::StateAttribute::ON);
            }

            <span class="comment">//Modulate the colors to get proper lighting on the last unit</span>
            <span class="comment">//Keep the alpha results from the previous stage</span>
            {
                osg::TexEnvCombine* texenv = <span class="keyword">new</span> osg::TexEnvCombine;
                texenv-&gt;setCombine_RGB(osg::TexEnvCombine::MODULATE);
                texenv-&gt;setCombine_Alpha(osg::TexEnvCombine::REPLACE);

                texenv-&gt;setSource0_RGB(osg::TexEnvCombine::PREVIOUS);
                texenv-&gt;setOperand0_RGB(osg::TexEnvCombine::SRC_COLOR);
                texenv-&gt;setSource0_Alpha(osg::TexEnvCombine::PREVIOUS);
                texenv-&gt;setOperand0_Alpha(osg::TexEnvCombine::SRC_ALPHA);

                texenv-&gt;setSource1_RGB(osg::TexEnvCombine::PRIMARY_COLOR);
                texenv-&gt;setOperand1_RGB(osg::TexEnvCombine::SRC_COLOR);
                stateSet-&gt;setTextureAttributeAndModes(maxUnits-1, texenv, osg::StateAttribute::ON);
            }
        }
    }
}
</pre></div>
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1TextureCompositorMultiTexture_a09f36589d31ae7d0a274186a0c76dbb9_cgraph.png" border="0" usemap="#classosgEarth_1_1TextureCompositorMultiTexture_a09f36589d31ae7d0a274186a0c76dbb9_cgraph" alt=""/></div>
<map name="classosgEarth_1_1TextureCompositorMultiTexture_a09f36589d31ae7d0a274186a0c76dbb9_cgraph" id="classosgEarth_1_1TextureCompositorMultiTexture_a09f36589d31ae7d0a274186a0c76dbb9_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TextureLayout.html#aba1cece66c799cdf7fa7b94a5ba880ff" title="osgEarth::TextureLayout::containsSecondarySlots" alt="" coords="579,5,893,35"/><area shape="rect" id="node5" href="classosgEarth_1_1Registry.html#a8ebadcf08d3161838cb5d2d7e0dcdbb3" title="osgEarth::Registry::getCapabilities" alt="" coords="624,59,848,88"/><area shape="rect" id="node7" href="classosgEarth_1_1Capabilities.html#aa0586203267c6ccbbb6b5bdf35570a57" title="osgEarth::Capabilities::getMaxFFPTextureUnits" alt="" coords="585,112,887,141"/><area shape="rect" id="node9" href="classosgEarth_1_1Capabilities.html#a4a5058dbd84538cb7a3d1828220c6346" title="osgEarth::Capabilities::getMaxGPUTextureUnits" alt="" coords="584,165,888,195"/><area shape="rect" id="node11" href="classosgEarth_1_1TextureLayout.html#a80dd8997ff697d951e28cfa65c6e1a34" title="osgEarth::TextureLayout::getMaxUsedSlot" alt="" coords="601,219,871,248"/><area shape="rect" id="node13" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09" title="osgEarth::Registry::instance" alt="" coords="643,272,829,301"/><area shape="rect" id="node26" href="classosgEarth_1_1VirtualProgram.html#ac6c553c45b72ce922747065d6a91f448" title="osgEarth::VirtualProgram::removeShader" alt="" coords="607,325,865,355"/><area shape="rect" id="node28" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#ad9d5f9bf6a00c1663a6c452815cf5508" title="anonymous_namespace\{TextureCompositorMulti::cpp\}::s_createTextureFragShaderFunction" alt="" coords="457,379,1015,408"/><area shape="rect" id="node36" href="namespaceanonymous__namespace_02TextureCompositorMulti_8cpp_03.html#a6eef5408e3e880b71eee8805377cf40b" title="anonymous_namespace\{TextureCompositorMulti::cpp\}::s_createTextureVertexShader" alt="" coords="476,432,996,461"/><area shape="rect" id="node40" href="classosgEarth_1_1VirtualProgram.html#a0dde219eb0e46b7c3b019a65111b8a61" title="osgEarth::VirtualProgram::setShader" alt="" coords="619,485,853,515"/><area shape="rect" id="node15" href="classosgEarth_1_1Registry.html#acb15d8aa051bf36ea92a86ee6c00bc3c" title="osgEarth::Registry::Registry" alt="" coords="1104,272,1291,301"/><area shape="rect" id="node17" href="classosgEarth_1_1Registry.html#a5a56910fe4fcb016cbae8e7728e8bf47" title="osgEarth::Registry::addMimeTypeExtensionMapping" alt="" coords="1379,192,1707,221"/><area shape="rect" id="node20" href="classosgEarth_1_1DiskCacheOptions.html#a89cba75c20b7201cebec071d7e68883c" title="osgEarth::DiskCacheOptions::path" alt="" coords="1431,245,1655,275"/><area shape="rect" id="node22" href="classosgEarth_1_1Registry.html#a958fd3968bf858d536d8468a330c66da" title="osgEarth::Registry::setCacheOverride" alt="" coords="1421,299,1664,328"/><area shape="rect" id="node24" href="classosgEarth_1_1DiskCacheOptions.html#af3b83ff8d6fb16c2f8688b51cbeceea2" title="osgEarth::DiskCacheOptions::setPath" alt="" coords="1420,352,1665,381"/><area shape="rect" id="node30" href="classosgEarth_1_1TextureLayout.html#ad5425cbe91672e29c0d93ecc88c27683" title="osgEarth::TextureLayout::getRenderOrder" alt="" coords="1065,325,1329,355"/><area shape="rect" id="node32" href="classosgEarth_1_1TextureLayout.html#ad47e758523f496ca5cf4af789e87b42f" title="osgEarth::TextureLayout::getSlot" alt="" coords="1091,379,1304,408"/><area shape="rect" id="node34" href="classosgEarth_1_1TextureLayout.html#a6c7d8cebeb4b2b77ed8e9610001e0b09" title="osgEarth::TextureLayout::getTextureSlots" alt="" coords="1065,432,1329,461"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a04a1e6c7c33655dcc18ebdbb9df9c27a"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::usesShaderComposition" ref="a04a1e6c7c33655dcc18ebdbb9df9c27a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool osgEarth::TextureCompositorMultiTexture::usesShaderComposition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classosgEarth_1_1TextureCompositorTechnique.html#a02668857bf3f98d5488be08dbe7f81fd">osgEarth::TextureCompositorTechnique</a>.</p>

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00038">38</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a89f821261c912c0c98fad0d43e3fd6e2">_useGPU</a>; }
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a33976d04d4ae0477977b5be46ed1e2e2"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::_enableMipmapping" ref="a33976d04d4ae0477977b5be46ed1e2e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a33976d04d4ae0477977b5be46ed1e2e2">osgEarth::TextureCompositorMultiTexture::_enableMipmapping</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00061">61</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>

</div>
</div>
<a class="anchor" id="a6b724dbdbbdb3d1ff7751ad5848d0a43"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::_enableMipmappingOnUpdatedTextures" ref="a6b724dbdbbdb3d1ff7751ad5848d0a43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a6b724dbdbbdb3d1ff7751ad5848d0a43">osgEarth::TextureCompositorMultiTexture::_enableMipmappingOnUpdatedTextures</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00060">60</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>

</div>
</div>
<a class="anchor" id="abe221c785f99816551a9aa02193ee9d2"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::_lodTransitionTime" ref="abe221c785f99816551a9aa02193ee9d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#abe221c785f99816551a9aa02193ee9d2">osgEarth::TextureCompositorMultiTexture::_lodTransitionTime</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00058">58</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>

</div>
</div>
<a class="anchor" id="a89f821261c912c0c98fad0d43e3fd6e2"></a><!-- doxytag: member="osgEarth::TextureCompositorMultiTexture::_useGPU" ref="a89f821261c912c0c98fad0d43e3fd6e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classosgEarth_1_1TextureCompositorMultiTexture.html#a89f821261c912c0c98fad0d43e3fd6e2">osgEarth::TextureCompositorMultiTexture::_useGPU</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TextureCompositorMulti_source.html#l00059">59</a> of file <a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cube/sources/osgearth/src/osgEarth/<a class="el" href="TextureCompositorMulti_source.html">TextureCompositorMulti</a></li>
<li>/home/cube/sources/osgearth/src/osgEarth/<a class="el" href="TextureCompositorMulti_8cpp_source.html">TextureCompositorMulti.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:02:54 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
