<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: osgEarth::Util::SkyNode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceosgEarth.html">osgEarth</a>      </li>
      <li class="navelem"><a class="el" href="namespaceosgEarth_1_1Util.html">Util</a>      </li>
      <li class="navelem"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html">SkyNode</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>osgEarth::Util::SkyNode Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="osgEarth::Util::SkyNode" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Collaboration diagram for osgEarth::Util::SkyNode:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode__coll__graph.png" border="0" usemap="#osgEarth_1_1Util_1_1SkyNode_coll__map" alt="Collaboration graph"/></div>
<map name="osgEarth_1_1Util_1_1SkyNode_coll__map" id="osgEarth_1_1Util_1_1SkyNode_coll__map">
<area shape="rect" id="node2" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html" title="osgEarth::Util::SkyNode::PerViewData" alt="" coords="5,5,253,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classosgEarth_1_1Util_1_1SkyNode-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a3ccc8e3c54f55d9a4e8a554265c97f3f">SkyNode</a> (<a class="el" href="classosgEarth_1_1Map.html">Map</a> *map, const std::string &amp;starFile=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a50ca2c8f928a252fa99c4da752fd79cc">attach</a> (osg::View *view, int lightNum=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a> (const osg::Vec3 &amp;pos, osg::View *view=0L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ac83138914b56a07159aa0297195e96d2">setSunPosition</a> (double lat_degrees, double lon_degrees, osg::View *view=0L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a5a93f07675313f771ca2ad236c3b7f29">setDateTime</a> (int year, int month, int date, double hoursUTC, osg::View *view=0L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#aa40ff0415bc0d8fd488e5d8df4d4f190">setAmbientBrightness</a> (float value, osg::View *view=0L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#adec8892ff282300d96f18012f7315336">getAmbientBrightness</a> (osg::View *view=0L) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a7a28dca1c9fae5d9b4f210ae3e4f1d71">setStarsVisible</a> (bool value, osg::View *view=0L)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a1fbac783d1d79f9796489d3fdedefd5f">getStarsVisible</a> (osg::View *view=0L) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#af8925432084f3842038ce1a05ca5bc26">traverse</a> (osg::NodeVisitor &amp;nv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual osg::BoundingSphere&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a94c83f0aecf6d0583dc2670edf7627cb">computeBound</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; osg::View <br class="typebreak"/>
*, <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ac2b8c176215852aef0e7a1f8d2d184e9">PerViewDataMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#af3754e22216189d51fd25b92a23d57ca">makeAtmosphere</a> (const osg::EllipsoidModel *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#aa26cdea2f7afd23e1196c9dd899a4a09">makeSun</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a9176eb0205c9833ef0ce5f2651eae265">makeStars</a> (const std::string &amp;starFile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Geode *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#aa03d7778e6edac96d07822ca8a1e9322">buildStarGeometry</a> (const std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;stars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#adc2ca4c6786043640f64cc0d825d6d3b">getDefaultStars</a> (std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;out_stars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a6c34d5a03fb42e645fd74704cda9ba75">parseStarFile</a> (const std::string &amp;starFile, std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;out_stars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#af2a7150f8807ef9c55765b766b8c92ea">setAmbientBrightness</a> (<a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> &amp;data, float value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#acb876a6bf76907f4171bfbf12f1c14cf">setSunPosition</a> (<a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> &amp;data, const osg::Vec3 &amp;pos)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ac2b8c176215852aef0e7a1f8d2d184e9">PerViewDataMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a2fbbe707c3e60bd9dd262d2e466eea43">_starRadius</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; osg::Node &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#afc0864bc5b2ef7320601d7d5174dcf0b">_sun</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; osg::Node &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a5ecc5cab34bffdd7cca28a2902fe9f1c">_stars</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; osg::Node &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a17c5bf7df725582db3d2d66cba895a74">_atmosphere</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; osg::Uniform &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a6fb7607c0b8eee64077b8631d01cd948">_starAlpha</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; osg::Uniform &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a3071ea34627f3d608bffd14b98c5a6a8">_starPointSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ref_ptr&lt; const <br class="typebreak"/>
osg::EllipsoidModel &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A sky model. </p>

<p>Definition at line <a class="el" href="SkyNode_source.html#l00036">36</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="ac2b8c176215852aef0e7a1f8d2d184e9"></a><!-- doxytag: member="osgEarth::Util::SkyNode::PerViewDataMap" ref="ac2b8c176215852aef0e7a1f8d2d184e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;osg::View*, <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a>&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ac2b8c176215852aef0e7a1f8d2d184e9">osgEarth::Util::SkyNode::PerViewDataMap</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00097">97</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3ccc8e3c54f55d9a4e8a554265c97f3f"></a><!-- doxytag: member="osgEarth::Util::SkyNode::SkyNode" ref="a3ccc8e3c54f55d9a4e8a554265c97f3f" args="(Map *map, const std::string &amp;starFile=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SkyNode::SkyNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1Map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>starFile</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new sky node based on the provided map. </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00583">583</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// intialize the default settings:</span>
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>.set( osg::Vec3f(0.0f, 1.0f, 0.0f) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a> = <span class="keyword">new</span> osg::Light( 0 );  
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;setPosition( osg::Vec4( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>, 0 ) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;setAmbient( osg::Vec4(0.4f, 0.4f, 0.4f ,1.0) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;setDiffuse( osg::Vec4(1,1,1,1) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;setSpecular( osg::Vec4(0,0,0,1) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a499afd39ee08dbed67bc80c9a043d4f5">_starsVisible</a> = <span class="keyword">true</span>;
    
    <span class="comment">// set up the astronomical parameters:</span>
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a> =  map-&gt;<a class="code" href="classosgEarth_1_1Map.html#a7d4fe3351a35ece7b80316b8869a3b48">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b">getSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe">getGeographicSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#ad7d6ef0605664b77e8348df5324ea32f">getEllipsoid</a>();
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>-&gt;getRadiusPolar();
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> * 1.025f;
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> * 12000.0f;

    <span class="comment">// make the ephemeris (note: order is important here)</span>
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#af3754e22216189d51fd25b92a23d57ca">makeAtmosphere</a>( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>.get() );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa26cdea2f7afd23e1196c9dd899a4a09">makeSun</a>();
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a9176eb0205c9833ef0ce5f2651eae265">makeStars</a>(starFile);
}
</pre></div>
<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_a3ccc8e3c54f55d9a4e8a554265c97f3f_cgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_a3ccc8e3c54f55d9a4e8a554265c97f3f_cgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_a3ccc8e3c54f55d9a4e8a554265c97f3f_cgraph" id="classosgEarth_1_1Util_1_1SkyNode_a3ccc8e3c54f55d9a4e8a554265c97f3f_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1SpatialReference.html#ad7d6ef0605664b77e8348df5324ea32f" title="osgEarth::SpatialReference::getEllipsoid" alt="" coords="2260,791,2516,820"/><area shape="rect" id="node11" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="281,340,583,369"/><area shape="rect" id="node69" href="classosgEarth_1_1Map.html#a7d4fe3351a35ece7b80316b8869a3b48" title="osgEarth::Map::getProfile" alt="" coords="347,841,517,871"/><area shape="rect" id="node71" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="345,895,519,924"/><area shape="rect" id="node5" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="2575,393,2780,423"/><area shape="rect" id="node7" href="classosgEarth_1_1SpatialReference.html#ae8cda9f2cf24a92d09c58462c5fbd5e8" title="osgEarth::SpatialReference::_init" alt="" coords="2831,393,3044,423"/><area shape="rect" id="node9" href="namespaceanonymous__namespace_02SpatialReference_8cpp_03.html#a2d59d21c23228cfce0a56b2174727ee9" title="anonymous_namespace\{SpatialReference::cpp\}::getOGRAttrValue" alt="" coords="3093,393,3504,423"/><area shape="rect" id="node14" href="classosgEarth_1_1SpatialReference.html#ae27903c7c477c9f22b68ee71415888bf" title="osgEarth::SpatialReference::SpatialReference" alt="" coords="632,340,923,369"/><area shape="rect" id="node16" href="classosgEarth_1_1SpatialReference.html#a28d916a87ed2653a5763bf8777cd9cbf" title="osgEarth::SpatialReference::transform" alt="" coords="971,340,1216,369"/><area shape="rect" id="node19" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="1596,572,1871,601"/><area shape="rect" id="node51" href="classosgEarth_1_1SpatialReference.html#a3c3d798015a48c93c5063182ac177688" title="osgEarth::SpatialReference::transformPoints" alt="" coords="1264,340,1547,369"/><area shape="rect" id="node21" href="classosgEarth_1_1SpatialReference.html#afe559cd555e232b45109fbce72742b02" title="osgEarth::SpatialReference::_isEquivalentTo" alt="" coords="1920,572,2203,601"/><area shape="rect" id="node24" href="classosgEarth_1_1SpatialReference.html#a62d6dc2c358aaeeba591954de0475333" title="osgEarth::SpatialReference::getWKT" alt="" coords="2269,313,2507,343"/><area shape="rect" id="node27" href="classosgEarth_1_1SpatialReference.html#a7e2212a07fe863d5680b73f1e76cdee2" title="osgEarth::SpatialReference::isContiguous" alt="" coords="2255,473,2521,503"/><area shape="rect" id="node30" href="classosgEarth_1_1SpatialReference.html#a56b924155ab1745c5c9592269c6c147b" title="osgEarth::SpatialReference::isCube" alt="" coords="2273,580,2503,609"/><area shape="rect" id="node33" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="2255,367,2521,396"/><area shape="rect" id="node36" href="classosgEarth_1_1SpatialReference.html#a8531e5c5cfc660c195ec9a569ba28cab" title="osgEarth::SpatialReference::isLTP" alt="" coords="2276,527,2500,556"/><area shape="rect" id="node38" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="2263,260,2513,289"/><area shape="rect" id="node41" href="classosgEarth_1_1SpatialReference.html#a3ac570432fd7345ac3f1fa3c400a5553" title="osgEarth::SpatialReference::isNorthPolar" alt="" coords="2257,633,2519,663"/><area shape="rect" id="node44" href="classosgEarth_1_1SpatialReference.html#ae913b39821f50acf4662194ef5bcd3c3" title="osgEarth::SpatialReference::isSouthPolar" alt="" coords="2256,687,2520,716"/><area shape="rect" id="node47" href="classosgEarth_1_1SpatialReference.html#a1cb6bf576e355f9e32b226e43311e359" title="osgEarth::SpatialReference::isUserDefined" alt="" coords="2252,420,2524,449"/><area shape="rect" id="node53" href="SpatialReference_8cpp.html#a253ee9380896291f2aec77e4868d994c" title="geographicToMercator" alt="" coords="1659,156,1808,185"/><area shape="rect" id="node55" href="classosgEarth_1_1SpatialReference.html#a2e11d757cd795a81173912054fbb83c9" title="osgEarth::SpatialReference::getName" alt="" coords="1940,131,2183,160"/><area shape="rect" id="node63" href="SpatialReference_8cpp.html#a047d2c7e4580672483d0926a8f694e7e" title="mercatorToGeographic" alt="" coords="1656,260,1811,289"/><area shape="rect" id="node65" href="classosgEarth_1_1SpatialReference.html#a1f6be4de7c26f8dd31504f10b21d68be" title="osgEarth::SpatialReference::postTransform" alt="" coords="1596,313,1871,343"/><area shape="rect" id="node67" href="classosgEarth_1_1SpatialReference.html#a9ce72de8ce6def17df6239a136dedb5d" title="osgEarth::SpatialReference::preTransform" alt="" coords="1600,367,1867,396"/><area shape="rect" id="node73" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="679,895,876,924"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a50ca2c8f928a252fa99c4da752fd79cc"></a><!-- doxytag: member="osgEarth::Util::SkyNode::attach" ref="a50ca2c8f928a252fa99c4da752fd79cc" args="(osg::View *view, int lightNum=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::attach </td>
          <td>(</td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lightNum</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attached this sky node to a view (placing a sky light). </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00640">640</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !view ) <span class="keywordflow">return</span>;

    <span class="comment">// creates the new per-view if it does not already exist</span>
    PerViewData&amp; data = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view];

    data._light = osg::clone( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>.get() );
    data._light-&gt;setLightNum( lightNum );
    data._light-&gt;setAmbient( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;getAmbient() );
    data._lightPos = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>;

    <span class="comment">// the cull callback has to be on a parent group-- won&#39;t work on the xforms themselves.</span>
    data._cullContainer = <span class="keyword">new</span> osg::Group();

    data._sunXform = <span class="keyword">new</span> osg::MatrixTransform();
    data._sunMatrix = osg::Matrixd::translate(
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.x(),
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.y(),
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.z() );
    data._sunXform-&gt;setMatrix( data._sunMatrix );
    data._sunXform-&gt;addChild( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#afc0864bc5b2ef7320601d7d5174dcf0b">_sun</a>.get() );
    data._cullContainer-&gt;addChild( data._sunXform.get() );

    data._starsXform = <span class="keyword">new</span> osg::MatrixTransform();
    data._starsMatrix = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a85b42a20f4cf2eeba91183e410c07197">_starsMatrix</a>;
    data._starsXform-&gt;setMatrix( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a85b42a20f4cf2eeba91183e410c07197">_starsMatrix</a> );
    data._starsXform-&gt;addChild( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a5ecc5cab34bffdd7cca28a2902fe9f1c">_stars</a>.get() );
    data._cullContainer-&gt;addChild( data._starsXform.get() );

    data._starsVisible = <span class="keyword">true</span>;

    data._cullContainer-&gt;addChild( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a17c5bf7df725582db3d2d66cba895a74">_atmosphere</a>.get() );
    data._lightPosUniform = osg::clone( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#aa496dd75662a63c0e6bcbe72dafca380">_lightPosUniform</a>.get() );

    view-&gt;setLightingMode( osg::View::SKY_LIGHT );
    view-&gt;setLight( data._light.get() );
    view-&gt;getCamera()-&gt;setClearColor( osg::Vec4(0,0,0,1) );
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_a50ca2c8f928a252fa99c4da752fd79cc_icgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_a50ca2c8f928a252fa99c4da752fd79cc_icgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_a50ca2c8f928a252fa99c4da752fd79cc_icgraph" id="classosgEarth_1_1Util_1_1SkyNode_a50ca2c8f928a252fa99c4da752fd79cc_icgraph">
<area shape="rect" id="node3" href="osgearth__viewer_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="261,5,312,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa03d7778e6edac96d07822ca8a1e9322"></a><!-- doxytag: member="osgEarth::Util::SkyNode::buildStarGeometry" ref="aa03d7778e6edac96d07822ca8a1e9322" args="(const std::vector&lt; StarData &gt; &amp;stars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Geode * SkyNode::buildStarGeometry </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>stars</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00989">989</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">double</span> minMag = DBL_MAX, maxMag = DBL_MIN;

  osg::Vec3Array* coords = <span class="keyword">new</span> osg::Vec3Array();
  std::vector&lt;StarData&gt;::const_iterator p;
  <span class="keywordflow">for</span>( p = stars.begin(); p != stars.end(); p++ )
  {
    osg::Vec3 v = osg::Vec3(0,<a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a2fbbe707c3e60bd9dd262d2e466eea43">_starRadius</a>,0) * 
      osg::Matrix::rotate( p-&gt;declination, 1, 0, 0 ) * 
      osg::Matrix::rotate( p-&gt;right_ascension, 0, 0, 1 );

    coords-&gt;push_back( v );

    <span class="keywordflow">if</span> ( p-&gt;magnitude &lt; minMag ) minMag = p-&gt;magnitude;
    <span class="keywordflow">if</span> ( p-&gt;magnitude &gt; maxMag ) maxMag = p-&gt;magnitude;
  }

  osg::Vec4Array* <a class="code" href="osgearth__tilesource_8cpp.html#a9e71186980a23d60f4d42454c5b968f3">colors</a> = <span class="keyword">new</span> osg::Vec4Array();
  <span class="keywordflow">for</span>( p = stars.begin(); p != stars.end(); p++ )
  {
      <span class="comment">//float c = 0.5f + 0.5f * ( (p-&gt;magnitude-minMag) / (maxMag-minMag) );</span>
      <span class="keywordtype">float</span> c = ( (p-&gt;magnitude-minMag) / (maxMag-minMag) );
      colors-&gt;push_back( osg::Vec4(c,c,c,1.0f) );
  }

  osg::Geometry* geometry = <span class="keyword">new</span> osg::Geometry;
  geometry-&gt;setUseVertexBufferObjects( <span class="keyword">true</span> );
  geometry-&gt;setVertexArray( coords );
  geometry-&gt;setColorArray( colors );
  geometry-&gt;setColorBinding(osg::Geometry::BIND_PER_VERTEX);
  geometry-&gt;addPrimitiveSet( <span class="keyword">new</span> osg::DrawArrays(osg::PrimitiveSet::POINTS, 0, coords-&gt;size()));

  osg::StateSet* sset = <span class="keyword">new</span> osg::StateSet;

  sset-&gt;setMode( GL_VERTEX_PROGRAM_POINT_SIZE, osg::StateAttribute::ON );
  osg::Program* program = <span class="keyword">new</span> osg::Program;
  program-&gt;addShader( <span class="keyword">new</span> osg::Shader(osg::Shader::VERTEX, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a75a9cf7a74e836fb74067d45bd52dbbe">s_starVertexSource</a>) );
  program-&gt;addShader( <span class="keyword">new</span> osg::Shader(osg::Shader::FRAGMENT, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#aa19660376b9940d760d37215c1561a17">s_starFragmentSource</a>) );
  sset-&gt;setAttributeAndModes( program, osg::StateAttribute::ON );

  sset-&gt;setRenderBinDetails( <a class="code" href="SkyNode_8cpp.html#a050ede54c74ffe8e92ca69c30abd1021">BIN_STARS</a>, <span class="stringliteral">&quot;RenderBin&quot;</span>);
  sset-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::Depth(osg::Depth::ALWAYS, 0, 1, <span class="keyword">false</span>), osg::StateAttribute::ON );
  geometry-&gt;setStateSet( sset );

  osg::Geode* starGeode = <span class="keyword">new</span> osg::Geode;
  starGeode-&gt;addDrawable( geometry );

  <span class="keywordflow">return</span> starGeode;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a94c83f0aecf6d0583dc2670edf7627cb"></a><!-- doxytag: member="osgEarth::Util::SkyNode::computeBound" ref="a94c83f0aecf6d0583dc2670edf7627cb" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::BoundingSphere SkyNode::computeBound </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00607">607</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> osg::BoundingSphere();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adec8892ff282300d96f18012f7315336"></a><!-- doxytag: member="osgEarth::Util::SkyNode::getAmbientBrightness" ref="adec8892ff282300d96f18012f7315336" args="(osg::View *view=0L) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SkyNode::getAmbientBrightness </td>
          <td>(</td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00697">697</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( view )
    {
        PerViewDataMap::const_iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view);
        <span class="keywordflow">if</span> ( i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
            <span class="keywordflow">return</span> i-&gt;second._light-&gt;getAmbient().r();
    }
    <span class="keywordflow">return</span> <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a6e5f12cc2e1c496654eb8a2d1fbbc609">_light</a>-&gt;getAmbient().r();
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc2ca4c6786043640f64cc0d825d6d3b"></a><!-- doxytag: member="osgEarth::Util::SkyNode::getDefaultStars" ref="adc2ca4c6786043640f64cc0d825d6d3b" args="(std::vector&lt; StarData &gt; &amp;out_stars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::getDefaultStars </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_stars</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l01041">1041</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  out_stars.clear();

  <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> **sptr = <a class="code" href="namespaceosgEarth_1_1Util.html#ab80737f08c439915f3c80bc5a7caa023">s_defaultStarData</a>; *sptr; sptr++)
  {
    std::stringstream ss(*sptr);
    out_stars.push_back(StarData(ss));
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fbac783d1d79f9796489d3fdedefd5f"></a><!-- doxytag: member="osgEarth::Util::SkyNode::getStarsVisible" ref="a1fbac783d1d79f9796489d3fdedefd5f" args="(osg::View *view=0L) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SkyNode::getStarsVisible </td>
          <td>(</td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00820">820</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    PerViewDataMap::const_iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view);

    <span class="keywordflow">if</span> ( !view || i == <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
    {
        <span class="keywordflow">return</span> <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a499afd39ee08dbed67bc80c9a043d4f5">_starsVisible</a>;
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> i-&gt;second._starsVisible;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af3754e22216189d51fd25b92a23d57ca"></a><!-- doxytag: member="osgEarth::Util::SkyNode::makeAtmosphere" ref="af3754e22216189d51fd25b92a23d57ca" args="(const osg::EllipsoidModel *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::makeAtmosphere </td>
          <td>(</td>
          <td class="paramtype">const osg::EllipsoidModel *&#160;</td>
          <td class="paramname"><em>em</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00835">835</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// create some skeleton geometry to shade:</span>
    osg::Geometry* drawable = <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#ab033e2eaceb4376126d69a7a1a86b0d0">s_makeEllipsoidGeometry</a>( em, <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> );

    osg::Geode* geode = <span class="keyword">new</span> osg::Geode();
    geode-&gt;addDrawable( drawable );

    osg::StateSet* <span class="keyword">set</span> = geode-&gt;getOrCreateStateSet();

    <span class="comment">// configure the state set:</span>
    <span class="keyword">set</span>-&gt;setMode( GL_LIGHTING, osg::StateAttribute::OFF );
    <span class="keyword">set</span>-&gt;setMode( GL_CULL_FACE, osg::StateAttribute::ON );
    <span class="keyword">set</span>-&gt;setRenderingHint( osg::StateSet::TRANSPARENT_BIN );
    <span class="comment">//set-&gt;setBinNumber( 65 ); // todo, what?</span>
    <span class="keyword">set</span>-&gt;setBinNumber( <a class="code" href="SkyNode_8cpp.html#a32e7d15bcb49ad6bef258adacbb6ce0b">BIN_ATMOSPHERE</a> );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::Depth( osg::Depth::LESS, 0, 1, <span class="keyword">false</span> ) ); <span class="comment">// no depth write</span>
    <span class="keyword">set</span>-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::BlendFunc( GL_ONE, GL_ONE ), osg::StateAttribute::ON );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::FrontFace( osg::FrontFace::CLOCKWISE ), osg::StateAttribute::ON );

    <span class="comment">// next, create and add the shaders:</span>
    osg::Program* program = <span class="keyword">new</span> osg::Program();
    osg::Shader* vs = <span class="keyword">new</span> osg::Shader( osg::Shader::VERTEX, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a3dd8b6bb43072f2b4c648f5ca7e28c25">s_atmosphereVertexSource</a> );
    program-&gt;addShader( vs );
    osg::Shader* fs = <span class="keyword">new</span> osg::Shader( osg::Shader::FRAGMENT, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a887f286ac249283ce4cb35d789c815e3">s_atmosphereFragmentSource</a> );
    program-&gt;addShader( fs );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( program, osg::StateAttribute::ON );

    <span class="comment">// apply the uniforms:</span>
    <span class="keywordtype">float</span> r_wl   = ::powf( .65f, 4.0f );
    <span class="keywordtype">float</span> g_wl = ::powf( .57f, 4.0f );
    <span class="keywordtype">float</span> b_wl  = ::powf( .475f, 4.0f );
    osg::Vec3 RGB_wl( 1.0f/r_wl, 1.0f/g_wl, 1.0f/b_wl );
    <span class="keywordtype">float</span> Kr = 0.0025f;
    <span class="keywordtype">float</span> Kr4PI = Kr * 4.0f * osg::PI;
    <span class="keywordtype">float</span> Km = 0.0015f;
    <span class="keywordtype">float</span> Km4PI = Km * 4.0f * osg::PI;
    <span class="keywordtype">float</span> ESun = 15.0f;
    <span class="keywordtype">float</span> MPhase = -.095f;
    <span class="keywordtype">float</span> RayleighScaleDepth = 0.25f;
    <span class="keywordtype">int</span>   Samples = 2;
    <span class="keywordtype">float</span> Weather = 1.0f;
    
    <span class="keywordtype">float</span> Scale = 1.0f / (<a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> - <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a>);

    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#aa496dd75662a63c0e6bcbe72dafca380">_lightPosUniform</a> = <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_v3LightPos&quot;</span>, osg::Uniform::FLOAT_VEC3 );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#aa496dd75662a63c0e6bcbe72dafca380">_lightPosUniform</a>-&gt;set( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a> / <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>.length() );

    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_v3InvWavelength&quot;</span>, osg::Uniform::FLOAT_VEC3 )-&gt;set( RGB_wl );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fInnerRadius&quot;</span>,    osg::Uniform::FLOAT )-&gt;set( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fInnerRadius2&quot;</span>,   osg::Uniform::FLOAT )-&gt;set( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> * <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fOuterRadius&quot;</span>,    osg::Uniform::FLOAT )-&gt;set( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fOuterRadius2&quot;</span>,   osg::Uniform::FLOAT )-&gt;set( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> * <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a> );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fKrESun&quot;</span>,         osg::Uniform::FLOAT )-&gt;set( Kr * ESun );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fKmESun&quot;</span>,         osg::Uniform::FLOAT )-&gt;set( Km * ESun );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fKr4PI&quot;</span>,          osg::Uniform::FLOAT )-&gt;set( Kr4PI );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fKm4PI&quot;</span>,          osg::Uniform::FLOAT )-&gt;set( Km4PI );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fScale&quot;</span>,          osg::Uniform::FLOAT )-&gt;set( Scale );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fScaleDepth&quot;</span>,     osg::Uniform::FLOAT )-&gt;set( RayleighScaleDepth );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fScaleOverScaleDepth&quot;</span>, osg::Uniform::FLOAT )-&gt;set( Scale / RayleighScaleDepth );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_g&quot;</span>,               osg::Uniform::FLOAT )-&gt;set( MPhase );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_g2&quot;</span>,              osg::Uniform::FLOAT )-&gt;set( MPhase * MPhase );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_nSamples&quot;</span>,        osg::Uniform::INT )-&gt;set( Samples );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fSamples&quot;</span>,        osg::Uniform::FLOAT )-&gt;set( (<span class="keywordtype">float</span>)Samples );
    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;atmos_fWeather&quot;</span>,        osg::Uniform::FLOAT )-&gt;set( Weather );
    
    <span class="comment">//geode-&gt;setCullCallback( new DoNotIncludeInNearFarComputationCallback() );</span>
    AddCallbackToDrawablesVisitor visitor( _innerRadius );
    geode-&gt;accept( visitor );

    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a17c5bf7df725582db3d2d66cba895a74">_atmosphere</a> = geode;
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_af3754e22216189d51fd25b92a23d57ca_cgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_af3754e22216189d51fd25b92a23d57ca_cgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_af3754e22216189d51fd25b92a23d57ca_cgraph" id="classosgEarth_1_1Util_1_1SkyNode_af3754e22216189d51fd25b92a23d57ca_cgraph">
<area shape="rect" id="node3" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#ab033e2eaceb4376126d69a7a1a86b0d0" title="anonymous_namespace\{SkyNode::cpp\}::s_makeEllipsoidGeometry" alt="" coords="329,5,743,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9176eb0205c9833ef0ce5f2651eae265"></a><!-- doxytag: member="osgEarth::Util::SkyNode::makeStars" ref="a9176eb0205c9833ef0ce5f2651eae265" args="(const std::string &amp;starFile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::makeStars </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>starFile</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00966">966</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a2fbbe707c3e60bd9dd262d2e466eea43">_starRadius</a> = 20000.0 * (<a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> &gt; 0.0 ? <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> : <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">_outerRadius</a>);

  std::vector&lt;StarData&gt; stars;

  <span class="keywordflow">if</span>( starFile.empty() || <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a6c34d5a03fb42e645fd74704cda9ba75">parseStarFile</a>(starFile, stars) == false )
  {
    <span class="keywordflow">if</span>( !starFile.empty() )
      <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt; <span class="stringliteral">&quot;Warning: Unable to use star field defined in file \&quot;&quot;</span> &lt;&lt; starFile &lt;&lt; <span class="stringliteral">&quot;\&quot;, using default star data.&quot;</span> &lt;&lt; std::endl;

    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc2ca4c6786043640f64cc0d825d6d3b">getDefaultStars</a>(stars);
  }

  osg::Node* starNode = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa03d7778e6edac96d07822ca8a1e9322">buildStarGeometry</a>(stars);

  AddCallbackToDrawablesVisitor visitor(<a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a2fbbe707c3e60bd9dd262d2e466eea43">_starRadius</a>);
  starNode-&gt;accept(visitor);

  <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a5ecc5cab34bffdd7cca28a2902fe9f1c">_stars</a> = starNode;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa26cdea2f7afd23e1196c9dd899a4a09"></a><!-- doxytag: member="osgEarth::Util::SkyNode::makeSun" ref="aa26cdea2f7afd23e1196c9dd899a4a09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::makeSun </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00909">909</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::Billboard* sun = <span class="keyword">new</span> osg::Billboard();
    sun-&gt;setMode( osg::Billboard::POINT_ROT_EYE );
    sun-&gt;setNormal( osg::Vec3(0, 0, 1) );

    <span class="keywordtype">float</span> sunRadius = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">_innerRadius</a> * 100.0f;

    sun-&gt;addDrawable( <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#ae0857b55649c08b188bb3abb85110399">s_makeDiscGeometry</a>( sunRadius*80.0f ) ); 

    osg::StateSet* <span class="keyword">set</span> = sun-&gt;getOrCreateStateSet();

    <span class="keyword">set</span>-&gt;getOrCreateUniform( <span class="stringliteral">&quot;sunAlpha&quot;</span>, osg::Uniform::FLOAT )-&gt;set( 1.0f );

    <span class="comment">// configure the stateset</span>
    <span class="keyword">set</span>-&gt;setMode( GL_LIGHTING, osg::StateAttribute::OFF );
    <span class="keyword">set</span>-&gt;setMode( GL_CULL_FACE, osg::StateAttribute::OFF );
    <span class="keyword">set</span>-&gt;setRenderBinDetails( <a class="code" href="SkyNode_8cpp.html#a7571e873c00c9c4619ba6722a0812de2">BIN_SUN</a>, <span class="stringliteral">&quot;RenderBin&quot;</span> );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::Depth(osg::Depth::ALWAYS, 0, 1, <span class="keyword">false</span>), osg::StateAttribute::ON );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( <span class="keyword">new</span> osg::BlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA), osg::StateAttribute::ON );

    <span class="comment">// create shaders</span>
    osg::Program* program = <span class="keyword">new</span> osg::Program();
    osg::Shader* vs = <span class="keyword">new</span> osg::Shader( osg::Shader::VERTEX, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a3bb487fc5c47f47be7411ac246cf7749">s_sunVertexSource</a> );
    program-&gt;addShader( vs );
    osg::Shader* fs = <span class="keyword">new</span> osg::Shader( osg::Shader::FRAGMENT, <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a423b1cae479ac5d949bdb850dc0b67ec">s_sunFragmentSource</a> );
    program-&gt;addShader( fs );
    <span class="keyword">set</span>-&gt;setAttributeAndModes( program, osg::StateAttribute::ON );

    <span class="comment">// make the sun&#39;s transform:</span>
    <span class="comment">// todo: move this?</span>
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#ae4f1c7062b54dcb1bbfebbe903568da2">_sunXform</a> = <span class="keyword">new</span> osg::MatrixTransform();
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#ae4f1c7062b54dcb1bbfebbe903568da2">_sunXform</a>-&gt;setMatrix( osg::Matrix::translate( 
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>.x(), 
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>.y(), 
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a7ac53ce2ff63dbd6b6d3f7d929d699be">_lightPos</a>.z() ) );
    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#ae4f1c7062b54dcb1bbfebbe903568da2">_sunXform</a>-&gt;addChild( sun );
    
    AddCallbackToDrawablesVisitor visitor( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> );
    sun-&gt;accept( visitor );

    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#afc0864bc5b2ef7320601d7d5174dcf0b">_sun</a> = sun;
}
</pre></div>
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_aa26cdea2f7afd23e1196c9dd899a4a09_cgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_aa26cdea2f7afd23e1196c9dd899a4a09_cgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_aa26cdea2f7afd23e1196c9dd899a4a09_cgraph" id="classosgEarth_1_1Util_1_1SkyNode_aa26cdea2f7afd23e1196c9dd899a4a09_cgraph">
<area shape="rect" id="node3" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#ae0857b55649c08b188bb3abb85110399" title="anonymous_namespace\{SkyNode::cpp\}::s_makeDiscGeometry" alt="" coords="280,5,672,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c34d5a03fb42e645fd74704cda9ba75"></a><!-- doxytag: member="osgEarth::Util::SkyNode::parseStarFile" ref="a6c34d5a03fb42e645fd74704cda9ba75" args="(const std::string &amp;starFile, std::vector&lt; StarData &gt; &amp;out_stars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SkyNode::parseStarFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>starFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1StarData.html">StarData</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_stars</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l01053">1053</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
  out_stars.clear();

  std::fstream <a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>(starFile.c_str());
  <span class="keywordflow">if</span> (!<a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>)
  {
    <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt;  <span class="stringliteral">&quot;Warning: Unable to open file star file \&quot;&quot;</span> &lt;&lt; starFile &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;
    <span class="keywordflow">return</span> false ;
  }

  <span class="keywordflow">while</span> (!<a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>.eof())
  {
    std::string line;

    std::getline(<a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>, line);
    <span class="keywordflow">if</span> (<a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>.eof())
      <span class="keywordflow">break</span>;

    <span class="keywordflow">if</span> (line.empty() || line[0] == <span class="charliteral">&#39;#&#39;</span>) 
      <span class="keywordflow">continue</span>;

    std::stringstream ss(line);
    out_stars.push_back(StarData(ss));
  }

  <a class="code" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef">in</a>.close();

  <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_a6c34d5a03fb42e645fd74704cda9ba75_cgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_a6c34d5a03fb42e645fd74704cda9ba75_cgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_a6c34d5a03fb42e645fd74704cda9ba75_cgraph" id="classosgEarth_1_1Util_1_1SkyNode_a6c34d5a03fb42e645fd74704cda9ba75_cgraph">
<area shape="rect" id="node3" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef" title="osgEarth::Json::in" alt="" coords="304,5,432,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa40ff0415bc0d8fd488e5d8df4d4f190"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setAmbientBrightness" ref="aa40ff0415bc0d8fd488e5d8df4d4f190" args="(float value, osg::View *view=0L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setAmbientBrightness </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The minimum brightness for non-sunlit areas. </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00681">681</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !view )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa40ff0415bc0d8fd488e5d8df4d4f190">setAmbientBrightness</a>( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>, value );

        <span class="keywordflow">for</span>( PerViewDataMap::iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.begin(); i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end(); ++i )
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa40ff0415bc0d8fd488e5d8df4d4f190">setAmbientBrightness</a>( i-&gt;second, value );
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view) != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa40ff0415bc0d8fd488e5d8df4d4f190">setAmbientBrightness</a>( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view], value );
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2a7150f8807ef9c55765b766b8c92ea"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setAmbientBrightness" ref="af2a7150f8807ef9c55765b766b8c92ea" args="(PerViewData &amp;data, float value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setAmbientBrightness </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00709">709</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    value = osg::clampBetween( value, 0.0f, 1.0f );
    data._light-&gt;setAmbient( osg::Vec4f(value, value, value, 1.0f) );
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5a93f07675313f771ca2ad236c3b7f29"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setDateTime" ref="a5a93f07675313f771ca2ad236c3b7f29" args="(int year, int month, int date, double hoursUTC, osg::View *view=0L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setDateTime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>year</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>hoursUTC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the sun's position based on a julian date. </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00767">767</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>.valid() )
    {
        <span class="comment">// position the sun:</span>
        Sun sun;
        osg::Vec3d pos = sun.getPosition( year, month, date, hoursUTC );
        pos.normalize();
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a>( pos, view );

        <span class="comment">// position the stars:</span>
        <span class="keywordtype">double</span> time_r = hoursUTC/24.0; <span class="comment">// 0..1</span>
        <span class="keywordtype">double</span> rot_z = -osg::PI + <a class="code" href="namespaceanonymous__namespace_02SkyNode_8cpp_03.html#a195de32bac5bd12c234380bfa8c541d7">TWO_PI</a>*time_r;

        osg::Matrixd starsMatrix = osg::Matrixd::rotate( -rot_z, 0, 0, 1 );
        <span class="keywordflow">if</span> ( !view )
        {
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a85b42a20f4cf2eeba91183e410c07197">_starsMatrix</a> = starsMatrix;
            <span class="keywordflow">for</span>( PerViewDataMap::iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.begin(); i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end(); ++i )
            {
                i-&gt;second._starsMatrix = starsMatrix;
                i-&gt;second._starsXform-&gt;setMatrix( starsMatrix );
            }
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view) != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
        {
            PerViewData&amp; data = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view];
            data._starsMatrix = starsMatrix;
            data._starsXform-&gt;setMatrix( starsMatrix );
        }
    }
}
</pre></div>
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classosgEarth_1_1Util_1_1SkyNode_a5a93f07675313f771ca2ad236c3b7f29_icgraph.png" border="0" usemap="#classosgEarth_1_1Util_1_1SkyNode_a5a93f07675313f771ca2ad236c3b7f29_icgraph" alt=""/></div>
<map name="classosgEarth_1_1Util_1_1SkyNode_a5a93f07675313f771ca2ad236c3b7f29_icgraph" id="classosgEarth_1_1Util_1_1SkyNode_a5a93f07675313f771ca2ad236c3b7f29_icgraph">
<area shape="rect" id="node3" href="osgearth__viewer_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="392,5,443,35"/><area shape="rect" id="node5" href="structSkySliderHandler.html#adf3aeeece6d56d6358093544070832c6" title="SkySliderHandler::onValueChanged" alt="" coords="303,59,532,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7a28dca1c9fae5d9b4f210ae3e4f1d71"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setStarsVisible" ref="a7a28dca1c9fae5d9b4f210ae3e4f1d71" args="(bool value, osg::View *view=0L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setStarsVisible </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Whether the stars are visible </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00801">801</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !view )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>.<a class="code" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html#a499afd39ee08dbed67bc80c9a043d4f5">_starsVisible</a> = value;
        <span class="keywordflow">for</span>( PerViewDataMap::iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.begin(); i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end(); ++i )
        {
            i-&gt;second._starsVisible = value;
            i-&gt;second._starsXform-&gt;setNodeMask( value ? ~0 : 0 );
        }
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view) != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view]._starsVisible = value;
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view]._starsXform-&gt;setNodeMask( value ? ~0 : 0 );
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb876a6bf76907f4171bfbf12f1c14cf"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setSunPosition" ref="acb876a6bf76907f4171bfbf12f1c14cf" args="(PerViewData &amp;data, const osg::Vec3 &amp;pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setSunPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const osg::Vec3 &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00731">731</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    data._lightPos = pos;

    <span class="keywordflow">if</span> ( data._light.valid() )
        data._light-&gt;setPosition( osg::Vec4( data._lightPos, 0 ) );

    <span class="keywordflow">if</span> ( data._lightPosUniform.valid() )
        data._lightPosUniform-&gt;set( data._lightPos / data._lightPos.length() );

    <span class="keywordflow">if</span> ( data._sunXform.valid() )
    {
        data._sunXform-&gt;setMatrix( osg::Matrix::translate( 
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.x(), 
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.y(),
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">_sunDistance</a> * data._lightPos.z() ) );
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a34d613bbf9de8c4e66fd92fdcc510a71"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setSunPosition" ref="a34d613bbf9de8c4e66fd92fdcc510a71" args="(const osg::Vec3 &amp;pos, osg::View *view=0L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setSunPosition </td>
          <td>(</td>
          <td class="paramtype">const osg::Vec3 &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the sun's position as a unit vector. </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00716">716</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !view )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a>( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">_defaultPerViewData</a>, pos );
        <span class="keywordflow">for</span>( PerViewDataMap::iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.begin(); i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end(); ++i )
            <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a>( i-&gt;second, pos );
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find(view) != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
    {
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a>( <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>[view], pos );
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac83138914b56a07159aa0297195e96d2"></a><!-- doxytag: member="osgEarth::Util::SkyNode::setSunPosition" ref="ac83138914b56a07159aa0297195e96d2" args="(double lat_degrees, double lon_degrees, osg::View *view=0L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::setSunPosition </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lat_degrees</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lon_degrees</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::View *&#160;</td>
          <td class="paramname"><em>view</em> = <code>0L</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the sun's position as a latitude and longitude. </p>

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00751">751</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>.valid())
    {
        <span class="keywordtype">double</span> x, y, z;
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>-&gt;convertLatLongHeightToXYZ(
            osg::RadiansToDegrees(lat_degrees),
            osg::RadiansToDegrees(long_degrees),
            0, 
            x, y, z);
        osg::Vec3d up  = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">_ellipsoidModel</a>-&gt;computeLocalUpVector(x, y, z);
        <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#a34d613bbf9de8c4e66fd92fdcc510a71">setSunPosition</a>( up, view );
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8925432084f3842038ce1a05ca5bc26"></a><!-- doxytag: member="osgEarth::Util::SkyNode::traverse" ref="af8925432084f3842038ce1a05ca5bc26" args="(osg::NodeVisitor &amp;nv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SkyNode::traverse </td>
          <td>(</td>
          <td class="paramtype">osg::NodeVisitor &amp;&#160;</td>
          <td class="paramname"><em>nv</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_8cpp_source.html#l00613">613</a> of file <a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::CullSettings::ComputeNearFarMode saveMode;

    osgUtil::CullVisitor* cv = <span class="keyword">dynamic_cast&lt;</span>osgUtil::CullVisitor*<span class="keyword">&gt;</span>( &amp;nv );
    <span class="keywordflow">if</span> ( cv )
    {
        saveMode = cv-&gt;getComputeNearFarMode();
        cv-&gt;setComputeNearFarMode( osg::CullSettings::DO_NOT_COMPUTE_NEAR_FAR );

        osg::View* view = cv-&gt;getCurrentCamera()-&gt;getView();
        PerViewDataMap::iterator i = <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.find( view );
        <span class="keywordflow">if</span> ( i != <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">_perViewData</a>.end() )
        {
            i-&gt;second._cullContainer-&gt;accept( nv );
        }
    }

    <a class="code" href="classosgEarth_1_1Util_1_1SkyNode.html#af8925432084f3842038ce1a05ca5bc26">osg::Group::traverse</a>( nv );

    <span class="keywordflow">if</span> ( cv )
    {
        cv-&gt;setComputeNearFarMode( saveMode );
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a17c5bf7df725582db3d2d66cba895a74"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_atmosphere" ref="a17c5bf7df725582db3d2d66cba895a74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt;osg::Node&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a17c5bf7df725582db3d2d66cba895a74">osgEarth::Util::SkyNode::_atmosphere</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00101">101</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="adc70a8b6ff2f6b8e217a314f75ce67b1"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_defaultPerViewData" ref="adc70a8b6ff2f6b8e217a314f75ce67b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structosgEarth_1_1Util_1_1SkyNode_1_1PerViewData.html">PerViewData</a> <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#adc70a8b6ff2f6b8e217a314f75ce67b1">osgEarth::Util::SkyNode::_defaultPerViewData</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00096">96</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="acf7b2a63af9d0b88ea2ed0707277b058"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_ellipsoidModel" ref="acf7b2a63af9d0b88ea2ed0707277b058" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt; const osg::EllipsoidModel &gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#acf7b2a63af9d0b88ea2ed0707277b058">osgEarth::Util::SkyNode::_ellipsoidModel</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00105">105</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="ab32c2a0ef4161840b4668a0979ae7670"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_innerRadius" ref="ab32c2a0ef4161840b4668a0979ae7670" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ab32c2a0ef4161840b4668a0979ae7670">osgEarth::Util::SkyNode::_innerRadius</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00100">100</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a58f15fd4bc00a0bd0c4fb4427962130e"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_outerRadius" ref="a58f15fd4bc00a0bd0c4fb4427962130e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a58f15fd4bc00a0bd0c4fb4427962130e">osgEarth::Util::SkyNode::_outerRadius</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00100">100</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="aa22b6c5c34961a7437443e4ce90e6611"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_perViewData" ref="aa22b6c5c34961a7437443e4ce90e6611" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#ac2b8c176215852aef0e7a1f8d2d184e9">PerViewDataMap</a> <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#aa22b6c5c34961a7437443e4ce90e6611">osgEarth::Util::SkyNode::_perViewData</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00098">98</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a6fb7607c0b8eee64077b8631d01cd948"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_starAlpha" ref="a6fb7607c0b8eee64077b8631d01cd948" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt;osg::Uniform&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a6fb7607c0b8eee64077b8631d01cd948">osgEarth::Util::SkyNode::_starAlpha</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00102">102</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a3071ea34627f3d608bffd14b98c5a6a8"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_starPointSize" ref="a3071ea34627f3d608bffd14b98c5a6a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt;osg::Uniform&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a3071ea34627f3d608bffd14b98c5a6a8">osgEarth::Util::SkyNode::_starPointSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00103">103</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a2fbbe707c3e60bd9dd262d2e466eea43"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_starRadius" ref="a2fbbe707c3e60bd9dd262d2e466eea43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a2fbbe707c3e60bd9dd262d2e466eea43">osgEarth::Util::SkyNode::_starRadius</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00100">100</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a5ecc5cab34bffdd7cca28a2902fe9f1c"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_stars" ref="a5ecc5cab34bffdd7cca28a2902fe9f1c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt;osg::Node&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a5ecc5cab34bffdd7cca28a2902fe9f1c">osgEarth::Util::SkyNode::_stars</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00101">101</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="afc0864bc5b2ef7320601d7d5174dcf0b"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_sun" ref="afc0864bc5b2ef7320601d7d5174dcf0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ref_ptr&lt;osg::Node&gt; <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#afc0864bc5b2ef7320601d7d5174dcf0b">osgEarth::Util::SkyNode::_sun</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00101">101</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<a class="anchor" id="a33436c7fa4c91a0deb40d9c868871274"></a><!-- doxytag: member="osgEarth::Util::SkyNode::_sunDistance" ref="a33436c7fa4c91a0deb40d9c868871274" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classosgEarth_1_1Util_1_1SkyNode.html#a33436c7fa4c91a0deb40d9c868871274">osgEarth::Util::SkyNode::_sunDistance</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="SkyNode_source.html#l00100">100</a> of file <a class="el" href="SkyNode_source.html">SkyNode</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cube/sources/osgearth/src/osgEarthUtil/<a class="el" href="SkyNode_source.html">SkyNode</a></li>
<li>/home/cube/sources/osgearth/src/osgEarthUtil/<a class="el" href="SkyNode_8cpp_source.html">SkyNode.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:03:00 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
