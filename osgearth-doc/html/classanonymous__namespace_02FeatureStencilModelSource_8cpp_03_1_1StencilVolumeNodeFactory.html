<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html">anonymous_namespace{FeatureStencilModelSource.cpp}</a>      </li>
      <li class="navelem"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html">StencilVolumeNodeFactory</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory" --><!-- doxytag: inherits="osgEarth::Features::FeatureNodeFactory" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory__inherit__graph.png" border="0" usemap="#anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_inherit__map" alt="Inheritance graph"/></div>
<map name="anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_inherit__map" id="anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_inherit__map">
<area shape="rect" id="node2" href="classosgEarth_1_1Features_1_1FeatureNodeFactory.html" title="osgEarth::Features::FeatureNodeFactory" alt="" coords="137,83,396,112"/><area shape="rect" id="node4" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="223,5,311,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory__coll__graph.png" border="0" usemap="#anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_coll__map" alt="Collaboration graph"/></div>
<map name="anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_coll__map" id="anonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_coll__map">
<area shape="rect" id="node2" href="classosgEarth_1_1Features_1_1FeatureNodeFactory.html" title="osgEarth::Features::FeatureNodeFactory" alt="" coords="2172,360,2431,389"/><area shape="rect" id="node4" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="1543,448,1631,477"/><area shape="rect" id="node38" href="classosgEarth_1_1Features_1_1FeatureDisplayLayout.html" title="osgEarth::Features::FeatureDisplayLayout" alt="" coords="1877,497,2144,527"/><area shape="rect" id="node6" href="structanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1BuildData.html" title="anonymous_namespace\{FeatureStencilModelSource.cpp\}::BuildData" alt="" coords="3304,223,3725,252"/><area shape="rect" id="node8" href="classosgEarth_1_1Threading_1_1ReadWriteMutex.html" title="osgEarth::Threading::ReadWriteMutex" alt="" coords="2935,223,3180,252"/><area shape="rect" id="node10" href="classosgEarth_1_1Threading_1_1Event.html" title="osgEarth::Threading::Event" alt="" coords="2507,223,2688,252"/><area shape="rect" id="node12" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html" title="osgEarth::Drivers::FeatureStencilModelOptions" alt="" coords="3367,431,3663,460"/><area shape="rect" id="node14" href="classosgEarth_1_1Features_1_1FeatureModelSourceOptions.html" title="osgEarth::Features::FeatureModelSourceOptions" alt="" coords="2904,584,3211,613"/><area shape="rect" id="node16" href="classosgEarth_1_1ModelSourceOptions.html" title="osgEarth::ModelSourceOptions" alt="" coords="1909,167,2112,196"/><area shape="rect" id="node18" href="classosgEarth_1_1DriverConfigOptions.html" title="osgEarth::DriverConfigOptions" alt="" coords="1487,79,1687,108"/><area shape="rect" id="node61" href="classosgEarth_1_1Features_1_1FeatureSourceOptions.html" title="osgEarth::Features::FeatureSourceOptions" alt="" coords="1876,259,2145,288"/><area shape="rect" id="node20" href="classosgEarth_1_1ConfigOptions.html" title="osgEarth::ConfigOptions" alt="" coords="681,99,847,128"/><area shape="rect" id="node69" href="classosgEarth_1_1ProfileOptions.html" title="osgEarth::ProfileOptions" alt="" coords="1169,147,1332,176"/><area shape="rect" id="node22" href="classosgEarth_1_1Config.html" title="osgEarth::Config" alt="" coords="343,105,463,135"/><area shape="rect" id="node24" href="structosgEarth_1_1Properties.html" title="osgEarth::Properties" alt="" coords="11,105,152,135"/><area shape="rect" id="node26" href="classosgEarth_1_1URIContext.html" title="osgEarth::URIContext" alt="" coords="5,213,157,243"/><area shape="rect" id="node56" href="classosgEarth_1_1Symbology_1_1StringExpression.html" title="osgEarth::Symbology::StringExpression" alt="" coords="276,332,529,361"/><area shape="rect" id="node28" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; bool \&gt;" alt="" coords="1500,547,1673,576"/><area shape="rect" id="node47" href="classosgEarth_1_1Features_1_1GriddingPolicy.html" title="osgEarth::Features::GriddingPolicy" alt="" coords="1899,699,2123,728"/><area shape="rect" id="node30" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; float \&gt;" alt="" coords="1499,355,1675,384"/><area shape="rect" id="node32" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; int \&gt;" alt="" coords="681,5,847,35"/><area shape="rect" id="node34" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Geometry::Type \&gt;" alt="" coords="2475,531,2720,560"/><area shape="rect" id="node36" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; FeatureDisplayLayout \&gt;" alt="" coords="2459,584,2736,613"/><area shape="rect" id="node43" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; double \&gt;" alt="" coords="1492,796,1681,825"/><area shape="rect" id="node45" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; GriddingPolicy \&gt;" alt="" coords="2480,695,2715,724"/><area shape="rect" id="node51" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; CullingTechnique \&gt;" alt="" coords="1461,704,1712,733"/><area shape="rect" id="node54" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; StringExpression \&gt;" alt="" coords="893,593,1144,623"/><area shape="rect" id="node59" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; FeatureSourceOptions \&gt;" alt="" coords="2457,477,2737,507"/><area shape="rect" id="node65" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; std::string \&gt;" alt="" coords="660,251,868,280"/><area shape="rect" id="node67" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; ProfileOptions \&gt;" alt="" coords="1471,195,1703,224"/><area shape="rect" id="node73" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Bounds \&gt;" alt="" coords="667,157,861,187"/><area shape="rect" id="node75" href="classosgEarth_1_1Bounds.html" title="osgEarth::Bounds" alt="" coords="340,164,465,193"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#a7b77f3dca56aad9d2c0478c7df24d3c6">StencilVolumeNodeFactory</a> (const <a class="el" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html">FeatureStencilModelOptions</a> &amp;options, int renderBinStart)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aea992db2503aa0d5f5683c553dbd320f">createOrUpdateNode</a> (<a class="el" href="classosgEarth_1_1Features_1_1FeatureCursor.html">FeatureCursor</a> *cursor, const <a class="el" href="classosgEarth_1_1Style.html">Style</a> &amp;style, const <a class="el" href="classosgEarth_1_1Features_1_1FilterContext.html">FilterContext</a> &amp;context, osg::ref_ptr&lt; osg::Node &gt; &amp;node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Group *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#a3a5539f1918f1d7cf6fb18fa7c50b380">getOrCreateStyleGroup</a> (const <a class="el" href="classosgEarth_1_1Style.html">Style</a> &amp;style, <a class="el" href="classosgEarth_1_1Features_1_1Session.html">Session</a> *session)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html">FeatureStencilModelOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#a6f41cb26e1969005d1e6961edada21f8">_renderBinStart</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1BuildData.html">BuildData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00351">351</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7b77f3dca56aad9d2c0478c7df24d3c6"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::StencilVolumeNodeFactory" ref="a7b77f3dca56aad9d2c0478c7df24d3c6" args="(const FeatureStencilModelOptions &amp;options, int renderBinStart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::StencilVolumeNodeFactory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html">FeatureStencilModelOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>renderBinStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00359">359</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>
<div class="fragment"><pre class="fragment">            : <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>(options),
              <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>( renderBinStart )
        { }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aea992db2503aa0d5f5683c553dbd320f"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::createOrUpdateNode" ref="aea992db2503aa0d5f5683c553dbd320f" args="(FeatureCursor *cursor, const Style &amp;style, const FilterContext &amp;context, osg::ref_ptr&lt; osg::Node &gt; &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::createOrUpdateNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1Features_1_1FeatureCursor.html">FeatureCursor</a> *&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Style.html">Style</a> &amp;&#160;</td>
          <td class="paramname"><em>style</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Features_1_1FilterContext.html">FilterContext</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::ref_ptr&lt; osg::Node &gt; &amp;&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Render (or update) a list of features into a node according to the specified style. </p>

<p>Implements <a class="el" href="classosgEarth_1_1Features_1_1FeatureNodeFactory.html#afb01e38b58028f59d0599107db028d7f">osgEarth::Features::FeatureNodeFactory</a>.</p>

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00365">365</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mi = context.<a class="code" href="classosgEarth_1_1Features_1_1FilterContext.html#a5f1ea49d7f7b795d8b9e80989a439ba0">getSession</a>()-&gt;<a class="code" href="classosgEarth_1_1Features_1_1Session.html#a16e3a50dbb1d9dfb51181344a494ab42">getMapInfo</a>();
            
            <span class="comment">// A processing context to use locally</span>
            <a class="code" href="classosgEarth_1_1Features_1_1FilterContext.html">FilterContext</a> cx = context;

            <span class="comment">// make a working copy of the feature data.</span>
            <a class="code" href="namespaceosgEarth_1_1Features.html#a1e64d25cc48ef96694c4325b5c31f28b">FeatureList</a> featureList;
            cursor-&gt;<a class="code" href="classosgEarth_1_1Features_1_1FeatureCursor.html#a2acffc4ee2f82d18d949d8b1375d5871">fill</a>( featureList );

            <span class="comment">//for (FeatureList::const_iterator it = features.begin(); it != features.end(); ++it)</span>
            <span class="comment">//    featureList.push_back(osg::clone((*it).get(),osg::CopyOp::DEEP_COPY_ALL));</span>

            <span class="comment">// establish the extrusion distance for the stencil volumes</span>
            <span class="keywordtype">double</span> extrusionDistance = 1;
            <span class="keywordtype">double</span> densificationThreshold = 1.0;
            <span class="keywordflow">if</span> ( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#a2cb00cfe5cdfdf5061ffcd6fc4bd8d47">extrusionDistance</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() )
            {
                extrusionDistance = *<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#a2cb00cfe5cdfdf5061ffcd6fc4bd8d47">extrusionDistance</a>();
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span> ( mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() )
                    extrusionDistance = 300000.0; <span class="comment">// meters geocentric</span>
                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b">getSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3">isGeographic</a>() )
                    extrusionDistance = 5.0; <span class="comment">// degrees-as-meters</span>
                <span class="keywordflow">else</span>
                    extrusionDistance = 12000.0; <span class="comment">// meters</span>
            }

            densificationThreshold = *<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#a996a43e89a4943400f91b168805fc4cf">densificationThreshold</a>();

            <span class="comment">// Scan the geometry to see if it includes line data, since that will require buffering:</span>
            <span class="keywordtype">bool</span> hasLines = <span class="keyword">false</span>;
            <span class="keywordflow">for</span>( FeatureList::const_iterator i = featureList.begin(); i != featureList.end(); ++i )
            {
                <a class="code" href="classosgEarth_1_1Features_1_1Feature.html">Feature</a>* feature = (*i).get();
                <a class="code" href="classosgEarth_1_1Symbology_1_1Geometry.html">Geometry</a>* geom = feature-&gt;<a class="code" href="classosgEarth_1_1Features_1_1Feature.html#a2027c4708491dc48da4091b0ab7e8c57">getGeometry</a>();
                <span class="keywordflow">if</span> ( geom &amp;&amp; 
                     ( geom-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1Geometry.html#adb31d473e0579619e83f92b603c77d41">getComponentType</a>() == Geometry::TYPE_LINESTRING ||
                       geom-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1Geometry.html#adb31d473e0579619e83f92b603c77d41">getComponentType</a>() == Geometry::TYPE_RING ) )
                {
                    hasLines = <span class="keyword">true</span>;
                    <span class="keywordflow">break</span>;
                }
            }

            <span class="comment">// If the geometry is lines, we need to buffer them before they will work with stenciling</span>
            <span class="keywordflow">if</span> ( hasLines )
            {
                <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html">LineSymbol</a>* line = style.getSymbol&lt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html">LineSymbol</a>&gt;();
                <span class="keywordflow">if</span> (line)
                {
                    <a class="code" href="classosgEarth_1_1Features_1_1BufferFilter.html">BufferFilter</a> buffer;
                    buffer.<a class="code" href="classosgEarth_1_1Features_1_1BufferFilter.html#a84b9fa48fe3e407b52d6b1bb81a8f1ca">distance</a>() = 0.5 * line-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html#a87c1c62229a5bd3bbe12a187f5522233">stroke</a>()-&gt;width().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>();
                    buffer.<a class="code" href="classosgEarth_1_1Features_1_1BufferFilter.html#ac16e0c380f03ca93465fc0d1ca123cd1">capStyle</a>() = line-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html#a87c1c62229a5bd3bbe12a187f5522233">stroke</a>()-&gt;lineCap().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>();
                    cx = buffer.<a class="code" href="classosgEarth_1_1Features_1_1BufferFilter.html#a7d4d5861f4be4207c9a0dde9712b0113">push</a>( featureList, cx );
                }
            }

            <span class="comment">// Transform them into the map&#39;s SRS, localizing the verts along the way:</span>
            <a class="code" href="classosgEarth_1_1Features_1_1TransformFilter.html">TransformFilter</a> xform( mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b">getSRS</a>() );
            xform.<a class="code" href="classosgEarth_1_1Features_1_1TransformFilter.html#addd165d50001d37bedfe71f5c79b4115">setMakeGeocentric</a>( mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() );
            xform.setLocalizeCoordinates( !mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() );
            cx = xform.push( featureList, cx );

            <span class="keywordflow">if</span> ( mi.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() )
            {
                <span class="comment">// We need to make sure that on a round globe, the points are sampled such that</span>
                <span class="comment">// long segments follow the curvature of the earth. By the way, if a Buffer was</span>
                <span class="comment">// applied, that will also remove colinear segment points. Resample the points to </span>
                <span class="comment">// achieve a usable tesselation.</span>
                <a class="code" href="classosgEarth_1_1Features_1_1ResampleFilter.html">ResampleFilter</a> resample;
                resample.<a class="code" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a1df8340f1091ad089b9afa4648984fb0">maxLength</a>() = densificationThreshold;
                resample.<a class="code" href="classosgEarth_1_1Features_1_1ResampleFilter.html#acc1d39f5fe30e63883d96d97c6c99929">minLength</a>() = 0.0;
                resample.<a class="code" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a3367c072d1bd0abbb2c2021081a9c92b">perturbationThreshold</a>() = 0.1;
                cx = resample.<a class="code" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a31d7e7b7e496e0c5848d901f8afd916b">push</a>( featureList, cx );
            }

            <span class="comment">// Extrude and cap the geometry in both directions to build a stencil volume:</span>
            osg::Group* volumes = 0L;

            <span class="keywordflow">for</span>( FeatureList::iterator i = featureList.begin(); i != featureList.end(); ++i )
            {
                <a class="code" href="classosgEarth_1_1Features_1_1Feature.html">Feature</a>* feature = (*i).get();
                <a class="code" href="classosgEarth_1_1Symbology_1_1Geometry.html">Geometry</a>* geom = feature-&gt;<a class="code" href="classosgEarth_1_1Features_1_1Feature.html#a2027c4708491dc48da4091b0ab7e8c57">getGeometry</a>();
                osg::Node* volume = <a class="code" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html#a2299e122948a33b07b2e49bd9cd925bb">createVolume</a>( geom, -extrusionDistance, extrusionDistance * 2.0, cx );

                <span class="keywordflow">if</span> ( volume )
                {
                    <span class="keywordflow">if</span> ( !volumes )
                        volumes = <span class="keyword">new</span> osg::Group();
                    volumes-&gt;addChild( volume );
                }
            }

            <span class="keywordflow">if</span> ( volumes )
            {
                <span class="comment">// Resolve the localizing reference frame if necessary:</span>
                <span class="keywordflow">if</span> ( cx.<a class="code" href="classosgEarth_1_1Features_1_1FilterContext.html#a0dca1d9b3e0997c81c4a03cfd472c8ec">hasReferenceFrame</a>() )
                {
                    osg::MatrixTransform* xform = <span class="keyword">new</span> osg::MatrixTransform( cx.<a class="code" href="classosgEarth_1_1Features_1_1FilterContext.html#a9e82cf1e5599687e0e4fa96b11632bb2">inverseReferenceFrame</a>() );
                    xform-&gt;addChild( volumes );
                    volumes = xform;
                }

                <span class="comment">// Apply an LOD if required:</span>
                <span class="keywordflow">if</span> ( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1ModelSourceOptions.html#adecd0944a21ea51b43cef1c002ddc742">minRange</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() || <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1ModelSourceOptions.html#ad396b7eec5de9d0f3138238e24563ca0">maxRange</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() )
                {
                    osg::LOD* lod = <span class="keyword">new</span> osg::LOD();
                    lod-&gt;addChild( volumes, <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1ModelSourceOptions.html#adecd0944a21ea51b43cef1c002ddc742">minRange</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>(), <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1ModelSourceOptions.html#ad396b7eec5de9d0f3138238e24563ca0">maxRange</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() );
                    volumes = lod;
                }

                <span class="comment">// Add the volumes to the appropriate style group.</span>
                <a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html">StencilVolumeNode</a>* styleNode = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html">StencilVolumeNode</a>*<span class="keyword">&gt;</span>( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#a3a5539f1918f1d7cf6fb18fa7c50b380">getOrCreateStyleGroup</a>( style, cx.<a class="code" href="classosgEarth_1_1Features_1_1FilterContext.html#a5f1ea49d7f7b795d8b9e80989a439ba0">getSession</a>() ) );
                styleNode-&gt;<a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#aa212f5af0bc27a7ae398d21ec7eb3ced">addVolumes</a>( volumes );
            }

            node = 0L; <span class="comment">// always return null, since we added our geom to the style group.</span>
            <span class="keywordflow">return</span> volumes != 0L;
        }
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_aea992db2503aa0d5f5683c553dbd320f_cgraph.png" border="0" usemap="#classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_aea992db2503aa0d5f5683c553dbd320f_cgraph" alt=""/></div>
<map name="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_aea992db2503aa0d5f5683c553dbd320f_cgraph" id="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_aea992db2503aa0d5f5683c553dbd320f_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#aa212f5af0bc27a7ae398d21ec7eb3ced" title="osgEarth::Features::StencilVolumeNode::addVolumes" alt="" coords="768,383,1104,413"/><area shape="rect" id="node5" href="classosgEarth_1_1Features_1_1BufferFilter.html#ac16e0c380f03ca93465fc0d1ca123cd1" title="osgEarth::Features::BufferFilter::capStyle" alt="" coords="804,437,1068,466"/><area shape="rect" id="node7" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html#a2299e122948a33b07b2e49bd9cd925bb" title="anonymous_namespace\{FeatureStencilModelSource::cpp\}::createVolume" alt="" coords="712,490,1160,519"/><area shape="rect" id="node49" href="classosgEarth_1_1Features_1_1BufferFilter.html#a84b9fa48fe3e407b52d6b1bb81a8f1ca" title="osgEarth::Features::BufferFilter::distance" alt="" coords="805,543,1067,573"/><area shape="rect" id="node51" href="classosgEarth_1_1Features_1_1FeatureCursor.html#a2acffc4ee2f82d18d949d8b1375d5871" title="osgEarth::Features::FeatureCursor::fill" alt="" coords="813,597,1059,626"/><area shape="rect" id="node53" href="classosgEarth_1_1Symbology_1_1Geometry.html#adb31d473e0579619e83f92b603c77d41" title="osgEarth::Symbology::Geometry::getComponentType" alt="" coords="769,650,1103,679"/><area shape="rect" id="node55" href="classosgEarth_1_1Features_1_1Feature.html#a2027c4708491dc48da4091b0ab7e8c57" title="osgEarth::Features::Feature::getGeometry" alt="" coords="1287,1287,1553,1317"/><area shape="rect" id="node57" href="classosgEarth_1_1Features_1_1Session.html#a16e3a50dbb1d9dfb51181344a494ab42" title="osgEarth::Features::Session::getMapInfo" alt="" coords="805,757,1067,786"/><area shape="rect" id="node59" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655" title="osgEarth::MapInfo::getProfile" alt="" coords="840,810,1032,839"/><area shape="rect" id="node61" href="classosgEarth_1_1Features_1_1FilterContext.html#a5f1ea49d7f7b795d8b9e80989a439ba0" title="osgEarth::Features::FilterContext::getSession" alt="" coords="792,863,1080,893"/><area shape="rect" id="node63" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="849,703,1023,733"/><area shape="rect" id="node67" href="classosgEarth_1_1Features_1_1FilterContext.html#a0dca1d9b3e0997c81c4a03cfd472c8ec" title="osgEarth::Features::FilterContext::hasReferenceFrame" alt="" coords="765,970,1107,999"/><area shape="rect" id="node69" href="classosgEarth_1_1Features_1_1FilterContext.html#a9e82cf1e5599687e0e4fa96b11632bb2" title="osgEarth::Features::FilterContext::inverseReferenceFrame" alt="" coords="755,1023,1117,1053"/><area shape="rect" id="node71" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="831,1077,1041,1106"/><area shape="rect" id="node73" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="803,917,1069,946"/><area shape="rect" id="node79" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a1df8340f1091ad089b9afa4648984fb0" title="osgEarth::Features::ResampleFilter::maxLength" alt="" coords="785,1183,1087,1213"/><area shape="rect" id="node81" href="classosgEarth_1_1Features_1_1ResampleFilter.html#acc1d39f5fe30e63883d96d97c6c99929" title="osgEarth::Features::ResampleFilter::minLength" alt="" coords="788,1237,1084,1266"/><area shape="rect" id="node83" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a3367c072d1bd0abbb2c2021081a9c92b" title="osgEarth::Features::ResampleFilter::perturbationThreshold" alt="" coords="755,1290,1117,1319"/><area shape="rect" id="node85" href="classosgEarth_1_1Features_1_1ResampleFilter.html#a31d7e7b7e496e0c5848d901f8afd916b" title="osgEarth::Features::ResampleFilter::push" alt="" coords="804,1130,1068,1159"/><area shape="rect" id="node89" href="classosgEarth_1_1Features_1_1BufferFilter.html#a7d4d5861f4be4207c9a0dde9712b0113" title="osgEarth::Features::BufferFilter::push" alt="" coords="816,1394,1056,1423"/><area shape="rect" id="node98" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1337,1501,1503,1530"/><area shape="rect" id="node100" href="classosgEarth_1_1Features_1_1TransformFilter.html#addd165d50001d37bedfe71f5c79b4115" title="osgEarth::Features::TransformFilter::setMakeGeocentric" alt="" coords="761,1498,1111,1527"/><area shape="rect" id="node102" href="classosgEarth_1_1Symbology_1_1LineSymbol.html#a87c1c62229a5bd3bbe12a187f5522233" title="osgEarth::Symbology::LineSymbol::stroke" alt="" coords="803,1551,1069,1581"/><area shape="rect" id="node9" href="classosgEarth_1_1MixinVector.html#a11cdaf1e7bdeaac64cec268196388319" title="osgEarth::MixinVector::back" alt="" coords="1327,465,1513,494"/><area shape="rect" id="node11" href="classosgEarth_1_1MixinVector.html#a09e839d601931f13776d30648ecd97f0" title="osgEarth::MixinVector::begin" alt="" coords="1325,518,1515,547"/><area shape="rect" id="node13" href="classosgEarth_1_1MixinVector.html#ad40d751f91c9b8637fc5a274e75cd8a7" title="osgEarth::MixinVector::end" alt="" coords="1331,571,1509,601"/><area shape="rect" id="node15" href="classosgEarth_1_1MixinVector.html#a72fb3e0d3c9442c7512dafab13068152" title="osgEarth::MixinVector::erase" alt="" coords="1325,625,1515,654"/><area shape="rect" id="node17" href="classosgEarth_1_1MixinVector.html#ab04f51930d4b7532865e05295028ebf4" title="osgEarth::MixinVector::front" alt="" coords="1328,678,1512,707"/><area shape="rect" id="node19" href="classosgEarth_1_1Features_1_1FeatureProfile.html#a7f2cf88a25569de112c7c929555e3943" title="osgEarth::Features::FeatureProfile::getSRS" alt="" coords="1283,731,1557,761"/><area shape="rect" id="node21" href="classosgEarth_1_1Symbology_1_1Geometry.html#acc4c9cb3c8b571ff271af11261d43def" title="osgEarth::Symbology::Geometry::getTotalPointCount" alt="" coords="1255,785,1585,814"/><area shape="rect" id="node23" href="classosgEarth_1_1MixinVector.html#a29d1318457f75e1e0841d7e20f61dadb" title="osgEarth::MixinVector\&lt; osg::Vec3d, osg::Referenced \&gt;::size" alt="" coords="1681,811,2057,841"/><area shape="rect" id="node25" href="classosgEarth_1_1Symbology_1_1Geometry.html#a12044f75418af11e87a616a78967e5b1" title="osgEarth::Symbology::Geometry::getType" alt="" coords="2144,53,2411,82"/><area shape="rect" id="node27" href="classosgEarth_1_1Symbology_1_1GeometryIterator.html#a7cdd242b72b60aac269d87c2065ba28a" title="osgEarth::Symbology::GeometryIterator::hasMore" alt="" coords="1265,91,1575,121"/><area shape="rect" id="node29" href="classosgEarth_1_1Features_1_1FilterContext.html#acf61fdd826797b4b08c2cc074accd0fa" title="osgEarth::Features::FilterContext::isGeocentric" alt="" coords="1272,145,1568,174"/><area shape="rect" id="node31" href="classosgEarth_1_1Symbology_1_1GeometryIterator.html#afa2c3f0ab08d74ce5a3977fe08ef918f" title="osgEarth::Symbology::GeometryIterator::next" alt="" coords="1277,198,1563,227"/><area shape="rect" id="node40" href="classosgEarth_1_1Features_1_1FilterContext.html#a6fdc74d6944a655fd8fe8e5ff298af57" title="osgEarth::Features::FilterContext::profile" alt="" coords="1291,251,1549,281"/><area shape="rect" id="node43" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html#a0c31797baf7e648bd61486d143a30c47" title="anonymous_namespace\{FeatureStencilModelSource::cpp\}::tessellate" alt="" coords="1208,305,1632,334"/><area shape="rect" id="node45" href="classosgEarth_1_1Features_1_1FilterContext.html#a5cd3efb579e942802d65ea666f8dcebb" title="osgEarth::Features::FilterContext::toLocal" alt="" coords="1287,358,1553,387"/><area shape="rect" id="node47" href="classosgEarth_1_1Features_1_1FilterContext.html#a62aa3e76a35b38551d293e4660bb7559" title="osgEarth::Features::FilterContext::toWorld" alt="" coords="1285,411,1555,441"/><area shape="rect" id="node33" href="classosgEarth_1_1Symbology_1_1GeometryIterator.html#a6f14eab304de5ad99758d4b112f7fe3a" title="osgEarth::Symbology::GeometryIterator::fetchNext" alt="" coords="1711,185,2028,214"/><area shape="rect" id="node35" href="classosgEarth_1_1Symbology_1_1MultiGeometry.html#a97b8ca20db8dd9d87eb9e4ddecf2c87c" title="osgEarth::Symbology::MultiGeometry::getComponents" alt="" coords="2108,211,2447,241"/><area shape="rect" id="node37" href="classosgEarth_1_1Symbology_1_1Polygon.html#aef6967b31b28c8a5119269aaed5ad429" title="osgEarth::Symbology::Polygon::getHoles" alt="" coords="2147,158,2408,187"/><area shape="rect" id="node65" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1321,889,1519,918"/><area shape="rect" id="node75" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="1317,942,1523,971"/><area shape="rect" id="node77" href="classosgEarth_1_1SpatialReference.html#ae8cda9f2cf24a92d09c58462c5fbd5e8" title="osgEarth::SpatialReference::_init" alt="" coords="1763,942,1976,971"/><area shape="rect" id="node87" href="classosgEarth_1_1Features_1_1ResampleFilter.html#afd0f13f9f055bfd279c254f5d3a39030" title="osgEarth::Features::ResampleFilter::isSupported" alt="" coords="1267,1130,1573,1159"/><area shape="rect" id="node91" href="classosgEarth_1_1Symbology_1_1Geometry.html#a2acdc217bdd9871ec7d2d9a36e334314" title="osgEarth::Symbology::Geometry::buffer" alt="" coords="1293,1341,1547,1370"/><area shape="rect" id="node94" href="classosgEarth_1_1Features_1_1BufferFilter.html#a92bda4eb1da36b9e13117df6252de758" title="osgEarth::Features::BufferFilter::isSupported" alt="" coords="1279,1394,1561,1423"/><area shape="rect" id="node96" href="classosgEarth_1_1Features_1_1Feature.html#a1e0af304a8e5207c48b7088431db2c0b" title="osgEarth::Features::Feature::setGeometry" alt="" coords="1287,1447,1553,1477"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3a5539f1918f1d7cf6fb18fa7c50b380"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::getOrCreateStyleGroup" ref="a3a5539f1918f1d7cf6fb18fa7c50b380" args="(const Style &amp;style, Session *session)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Group* anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::getOrCreateStyleGroup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Style.html">Style</a> &amp;&#160;</td>
          <td class="paramname"><em>style</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1Features_1_1Session.html">Session</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a group that will contain all the geometry corresponding to a given style. The subclass has the option of overriding this in order to create a custom implementation. </p>

<p>Reimplemented from <a class="el" href="classosgEarth_1_1Features_1_1FeatureNodeFactory.html#a0de06b3a7bea82f9434322396796df25">osgEarth::Features::FeatureNodeFactory</a>.</p>

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00494">494</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">if</span> ( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#aa8135c510350ed769dd9cbc15c1921ff">showVolumes</a>() == true )
            {
                <span class="keywordflow">return</span> <span class="keyword">new</span> osg::Group();
            }
            <span class="keywordflow">else</span>
            {
                <a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html">StencilVolumeNode</a>* styleNode = 0L;
                <span class="keywordflow">if</span> ( !<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>.getStyleNode(style.<a class="code" href="classosgEarth_1_1Style.html#adbed735ecd54ff18fc68c124761404ec">getName</a>(), styleNode, <span class="keyword">true</span>) )
                {
                    <span class="comment">// did not find; write-lock it and try again (double-check pattern)</span>
                    <a class="code" href="structosgEarth_1_1Threading_1_1ScopedWriteLock.html">Threading::ScopedWriteLock</a> exclusiveLock( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>._mutex );

                    <span class="keywordflow">if</span> ( !<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>.getStyleNode(style.<a class="code" href="classosgEarth_1_1Style.html#adbed735ecd54ff18fc68c124761404ec">getName</a>(), styleNode, <span class="keyword">false</span>) )
                    {
                        <a class="code" href="Notify.html#a47e8673ea1af7af40d431820bf3856fa">OE_INFO</a> &lt;&lt; <a class="code" href="FeatureStencilModelSource_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Create style group \&quot;&quot;</span> &lt;&lt; style.<a class="code" href="classosgEarth_1_1Style.html#adbed735ecd54ff18fc68c124761404ec">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;

                        styleNode = <span class="keyword">new</span> <a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html">StencilVolumeNode</a>( *<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#aa5a65965d62044e5e00d1bd07814845a">mask</a>(), *<a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#a743184ac4d84e8e3f8e041eb9bd58c8c">inverted</a>() );

                        <span class="keywordflow">if</span> ( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html#aa5a65965d62044e5e00d1bd07814845a">mask</a>() == false )
                        {
                            osg::Vec4f maskColor = osg::Vec4(1,1,0,1);

                            <span class="keywordflow">if</span> (<span class="comment">/*hasLines &amp;&amp;*/</span> style.getSymbol&lt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html">LineSymbol</a>&gt;())
                            {
                                <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html">LineSymbol</a>* line = style.getSymbol&lt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html">LineSymbol</a>&gt;();
                                maskColor = line-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1LineSymbol.html#a87c1c62229a5bd3bbe12a187f5522233">stroke</a>()-&gt;color();
                            } 
                            <span class="keywordflow">else</span>
                            {
                                <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1Symbology_1_1PolygonSymbol.html">PolygonSymbol</a>* poly = style.getSymbol&lt;<a class="code" href="classosgEarth_1_1Symbology_1_1PolygonSymbol.html">PolygonSymbol</a>&gt;();
                                <span class="keywordflow">if</span> (poly)
                                    maskColor = poly-&gt;<a class="code" href="classosgEarth_1_1Symbology_1_1PolygonSymbol.html#aac74c9a734eaa8a8656003c60ddb9640">fill</a>()-&gt;color();
                            }
                            styleNode-&gt;<a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#af7f34a13471ee3b18f1b833e3e6e9189">addChild</a>( <a class="code" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html#a5748b1699616cf3fe7728b5b190e52b5">createColorNode</a>(maskColor) );
                            
                            osg::StateSet* ss = styleNode-&gt;getOrCreateStateSet();

                            ss-&gt;setMode( GL_LIGHTING, <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">_options</a>.<a class="code" href="classosgEarth_1_1Features_1_1FeatureModelSourceOptions.html#a29146789ad33eabcf4a6840141fa628c">enableLighting</a>() == <span class="keyword">true</span>?
                                 osg::StateAttribute::ON | osg::StateAttribute::PROTECTED :
                                 osg::StateAttribute::OFF | osg::StateAttribute::PROTECTED );
                        }

                        <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>._renderBin = styleNode-&gt;<a class="code" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#abc0b7adbee07453daeb42f305c2b71a1">setBaseRenderBin</a>( <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>._renderBin );
                        <a class="code" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">_buildData</a>._styleGroups.push_back( <a class="code" href="structanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1BuildData.html#aef33476ca9dca07a6988f14938a83244">BuildData::StyleGroup</a>(style.<a class="code" href="classosgEarth_1_1Style.html#adbed735ecd54ff18fc68c124761404ec">getName</a>(), styleNode) );
                    }
                }

                <span class="keywordflow">return</span> styleNode;
            }
        }
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_a3a5539f1918f1d7cf6fb18fa7c50b380_cgraph.png" border="0" usemap="#classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_a3a5539f1918f1d7cf6fb18fa7c50b380_cgraph" alt=""/></div>
<map name="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_a3a5539f1918f1d7cf6fb18fa7c50b380_cgraph" id="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory_a3a5539f1918f1d7cf6fb18fa7c50b380_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#af7f34a13471ee3b18f1b833e3e6e9189" title="osgEarth::Features::StencilVolumeNode::addChild" alt="" coords="801,5,1116,35"/><area shape="rect" id="node5" href="namespaceanonymous__namespace_02FeatureStencilModelSource_8cpp_03.html#a5748b1699616cf3fe7728b5b190e52b5" title="anonymous_namespace\{FeatureStencilModelSource::cpp\}::createColorNode" alt="" coords="725,59,1192,88"/><area shape="rect" id="node7" href="classosgEarth_1_1Symbology_1_1PolygonSymbol.html#aac74c9a734eaa8a8656003c60ddb9640" title="osgEarth::Symbology::PolygonSymbol::fill" alt="" coords="825,112,1092,141"/><area shape="rect" id="node9" href="classosgEarth_1_1Style.html#adbed735ecd54ff18fc68c124761404ec" title="osgEarth::Style::getName" alt="" coords="872,165,1045,195"/><area shape="rect" id="node11" href="classosgEarth_1_1Features_1_1StencilVolumeNode.html#abc0b7adbee07453daeb42f305c2b71a1" title="osgEarth::Features::StencilVolumeNode::setBaseRenderBin" alt="" coords="772,219,1145,248"/><area shape="rect" id="node13" href="classosgEarth_1_1Symbology_1_1LineSymbol.html#a87c1c62229a5bd3bbe12a187f5522233" title="osgEarth::Symbology::LineSymbol::stroke" alt="" coords="825,272,1092,301"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac91722270df8eb60508bfa5050ef6264"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::_buildData" ref="ac91722270df8eb60508bfa5050ef6264" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1BuildData.html">BuildData</a> anonymous_namespace{FeatureStencilModelSource.cpp}::<a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#ac91722270df8eb60508bfa5050ef6264">StencilVolumeNodeFactory::_buildData</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00356">356</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aacc04b4b07e5d4aa73ff7a31cbe62743"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::_options" ref="aacc04b4b07e5d4aa73ff7a31cbe62743" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1Drivers_1_1FeatureStencilModelOptions.html">FeatureStencilModelOptions</a> anonymous_namespace{FeatureStencilModelSource.cpp}::<a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#aacc04b4b07e5d4aa73ff7a31cbe62743">StencilVolumeNodeFactory::_options</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00354">354</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6f41cb26e1969005d1e6961edada21f8"></a><!-- doxytag: member="anonymous_namespace{FeatureStencilModelSource.cpp}::StencilVolumeNodeFactory::_renderBinStart" ref="a6f41cb26e1969005d1e6961edada21f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int anonymous_namespace{FeatureStencilModelSource.cpp}::<a class="el" href="classanonymous__namespace_02FeatureStencilModelSource_8cpp_03_1_1StencilVolumeNodeFactory.html#a6f41cb26e1969005d1e6961edada21f8">StencilVolumeNodeFactory::_renderBinStart</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="FeatureStencilModelSource_8cpp_source.html#l00355">355</a> of file <a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/model_feature_stencil/<a class="el" href="FeatureStencilModelSource_8cpp_source.html">FeatureStencilModelSource.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:02:49 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
