<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: TileBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<h1>TileBuilder Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="TileBuilder" --><!-- doxytag: inherits="osg::Referenced" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for TileBuilder:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder__inherit__graph.png" border="0" usemap="#TileBuilder_inherit__map" alt="Inheritance graph"/></div>
<map name="TileBuilder_inherit__map" id="TileBuilder_inherit__map">
<area shape="rect" id="node2" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="5,5,93,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for TileBuilder:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder__coll__graph.png" border="0" usemap="#TileBuilder_coll__map" alt="Collaboration graph"/></div>
<map name="TileBuilder_coll__map" id="TileBuilder_coll__map">
<area shape="rect" id="node2" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="2540,449,2628,479"/><area shape="rect" id="node38" href="classosgEarth_1_1TaskService.html" title="osgEarth::TaskService" alt="" coords="2875,449,3029,479"/><area shape="rect" id="node41" href="classosgEarth_1_1Map.html" title="osgEarth::Map" alt="" coords="2899,611,3005,640"/><area shape="rect" id="node4" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html" title="osgEarth::Drivers::OSGTerrainOptions" alt="" coords="2040,445,2285,475"/><area shape="rect" id="node6" href="classosgEarth_1_1TerrainOptions.html" title="osgEarth::TerrainOptions" alt="" coords="1569,313,1735,343"/><area shape="rect" id="node8" href="classosgEarth_1_1DriverConfigOptions.html" title="osgEarth::DriverConfigOptions" alt="" coords="1147,577,1347,607"/><area shape="rect" id="node53" href="classosgEarth_1_1CacheOptions.html" title="osgEarth::CacheOptions" alt="" coords="1569,549,1735,579"/><area shape="rect" id="node10" href="classosgEarth_1_1ConfigOptions.html" title="osgEarth::ConfigOptions" alt="" coords="705,604,871,633"/><area shape="rect" id="node44" href="classosgEarth_1_1MapOptions.html" title="osgEarth::MapOptions" alt="" coords="2508,611,2660,640"/><area shape="rect" id="node59" href="classosgEarth_1_1ProfileOptions.html" title="osgEarth::ProfileOptions" alt="" coords="1165,772,1328,801"/><area shape="rect" id="node12" href="classosgEarth_1_1Config.html" title="osgEarth::Config" alt="" coords="307,604,427,633"/><area shape="rect" id="node14" href="structosgEarth_1_1Properties.html" title="osgEarth::Properties" alt="" coords="11,577,152,607"/><area shape="rect" id="node16" href="classosgEarth_1_1URIContext.html" title="osgEarth::URIContext" alt="" coords="5,631,157,660"/><area shape="rect" id="node18" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; bool \&gt;" alt="" coords="1160,487,1333,516"/><area shape="rect" id="node20" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; float \&gt;" alt="" coords="279,132,455,161"/><area shape="rect" id="node26" href="classosgEarth_1_1LoadingPolicy.html" title="osgEarth::LoadingPolicy" alt="" coords="707,225,869,255"/><area shape="rect" id="node22" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; ElevationInterpolation \&gt;" alt="" coords="1109,239,1384,268"/><area shape="rect" id="node24" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; LoadingPolicy \&gt;" alt="" coords="1131,185,1363,215"/><area shape="rect" id="node28" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Mode \&gt;" alt="" coords="276,235,457,264"/><area shape="rect" id="node31" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; int \&gt;" alt="" coords="284,344,449,373"/><area shape="rect" id="node34" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; CompositingTechnique \&gt;" alt="" coords="1105,292,1388,321"/><area shape="rect" id="node47" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; CoordinateSystemType \&gt;" alt="" coords="2019,583,2307,612"/><area shape="rect" id="node49" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; std::string \&gt;" alt="" coords="684,759,892,788"/><area shape="rect" id="node51" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; CacheOptions \&gt;" alt="" coords="2045,529,2280,559"/><area shape="rect" id="node57" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; ProfileOptions \&gt;" alt="" coords="1761,769,1993,799"/><area shape="rect" id="node63" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Bounds \&gt;" alt="" coords="691,831,885,860"/><area shape="rect" id="node65" href="classosgEarth_1_1Bounds.html" title="osgEarth::Bounds" alt="" coords="304,831,429,860"/><area shape="rect" id="node68" href="structosgEarth_1_1Revision.html" title="osgEarth::Revision" alt="" coords="2517,664,2651,693"/><area shape="rect" id="node70" href="classosgEarth_1_1Threading_1_1ReadWriteMutex.html" title="osgEarth::Threading::ReadWriteMutex" alt="" coords="2461,784,2707,813"/><area shape="rect" id="node72" href="classosgEarth_1_1Threading_1_1Event.html" title="osgEarth::Threading::Event" alt="" coords="2072,828,2253,857"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classTileBuilder-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTileBuilder_1_1Job.html">Job</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structTileBuilder_1_1SourceRepo.html">SourceRepo</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#ad2ebb11434038dd59c3026eb6dafce42">TileBuilder</a> (const <a class="el" href="classosgEarth_1_1Map.html">Map</a> *map, const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;terrainOptions, <a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *service)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#afbf384bc5f10099a4eb078f85271efe9">createTile</a> (const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, bool parallelize, osg::ref_ptr&lt; <a class="el" href="classTile.html">Tile</a> &gt; &amp;out_tile, bool &amp;out_hasRealData, bool &amp;out_hasLodBlendedLayers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structTileBuilder_1_1Job.html">Job</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#a109d97b5a9d6205b7c368f5ac2d17df2">createJob</a> (const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="classosgEarth_1_1Threading_1_1MultiEvent.html">Threading::MultiEvent</a> &amp;semaphore)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#a9ebbebc4c812e834b610d119097c1f4c">runJob</a> (<a class="el" href="structTileBuilder_1_1Job.html">Job</a> *job)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#a96041d5a9b95b2f23922398fa5b5f32b">finalizeJob</a> (<a class="el" href="structTileBuilder_1_1Job.html">Job</a> *job, osg::ref_ptr&lt; <a class="el" href="classTile.html">Tile</a> &gt; &amp;out_tile, bool &amp;out_hasRealData, bool &amp;out_hasLodBlending)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#ae8cacc0c7b98f2a37ad4e9314b37aee0">getTaskService</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1Map.html">Map</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#a1f38d82a61c21ac5ffff400afe472bb6">_map</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="TileBuilder_source.html#l00030">30</a> of file <a class="el" href="TileBuilder_source.html">TileBuilder</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad2ebb11434038dd59c3026eb6dafce42"></a><!-- doxytag: member="TileBuilder::TileBuilder" ref="ad2ebb11434038dd59c3026eb6dafce42" args="(const Map *map, const OSGTerrainOptions &amp;terrainOptions, TaskService *service)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TileBuilder::TileBuilder </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>terrainOptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a> *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_8cpp_source.html#l00182">182</a> of file <a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                      :
<a class="code" href="classTileBuilder.html#a1f38d82a61c21ac5ffff400afe472bb6">_map</a>( map ),
<a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>( terrainOptions ),
<a class="code" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a>( service )
{
    <span class="comment">//nop</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a109d97b5a9d6205b7c368f5ac2d17df2"></a><!-- doxytag: member="TileBuilder::createJob" ref="a109d97b5a9d6205b7c368f5ac2d17df2" args="(const TileKey &amp;key, Threading::MultiEvent &amp;semaphore)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structTileBuilder_1_1Job.html">TileBuilder::Job</a> * TileBuilder::createJob </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1Threading_1_1MultiEvent.html">Threading::MultiEvent</a> &amp;&#160;</td>
          <td class="paramname"><em>semaphore</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_8cpp_source.html#l00191">191</a> of file <a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    Job* job = <span class="keyword">new</span> Job( key, <a class="code" href="classTileBuilder.html#a1f38d82a61c21ac5ffff400afe472bb6">_map</a> );

    <span class="comment">// create the image layer tasks:</span>
    <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = job-&gt;_mapf.imageLayers().begin(); i != job-&gt;_mapf.imageLayers().end(); ++i )
    {
        <a class="code" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a>* layer = i-&gt;get();
        <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>(key) )
        {
            <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildColorLayer&gt;</a>* j = <span class="keyword">new</span> <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildColorLayer&gt;</a>( &amp;semaphore );
            j-&gt;init( key, layer, job-&gt;_mapf.getMapInfo(), <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, job-&gt;_repo );
            j-&gt;<a class="code" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f">setPriority</a>( -(<span class="keywordtype">float</span>)key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() );
            job-&gt;_tasks.push_back( j );
        }
    }

    <span class="comment">// If we have elevation layers, start an elevation job as well. Otherwise just create an</span>
    <span class="comment">// empty one while we&#39;re waiting for the images to load.</span>
    <span class="keywordflow">if</span> ( job-&gt;_mapf.elevationLayers().size() &gt; 0 )
    {
        <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildElevLayer&gt;</a>* ej = <span class="keyword">new</span> <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildElevLayer&gt;</a>( &amp;semaphore );
        ej-&gt;init( key, job-&gt;_mapf, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, job-&gt;_repo );
        ej-&gt;<a class="code" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f">setPriority</a>( -(<span class="keywordtype">float</span>)key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() );
        job-&gt;_tasks.push_back( ej );
    }

    <span class="keywordflow">return</span> job;
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_cgraph.png" border="0" usemap="#classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_cgraph" alt=""/></div>
<map name="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_cgraph" id="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="203,287,445,316"/><area shape="rect" id="node5" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="547,257,776,287"/><area shape="rect" id="node7" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="216,391,432,420"/><area shape="rect" id="node9" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="211,444,437,473"/><area shape="rect" id="node11" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="212,497,436,527"/><area shape="rect" id="node109" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f" title="osgEarth::TaskRequest::setPriority" alt="" coords="211,551,437,580"/><area shape="rect" id="node14" href="classosgEarth_1_1Profile.html#aec17c2da87ec76abf3d8b763e54ce8c5" title="osgEarth::Profile::getLevelOfDetailForHorizResolution" alt="" coords="493,364,829,393"/><area shape="rect" id="node20" href="classosgEarth_1_1TerrainLayer.html#a8c3b22dfd214263aefe467b36b9d0828" title="osgEarth::TerrainLayer::getProfile" alt="" coords="553,417,769,447"/><area shape="rect" id="node80" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="1533,709,1699,739"/><area shape="rect" id="node88" href="classosgEarth_1_1TerrainLayer.html#ae77a720d68e2e238cc5cb5b1932cadbb" title="osgEarth::TerrainLayer::getTileSize" alt="" coords="548,471,775,500"/><area shape="rect" id="node94" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1216,523,1381,552"/><area shape="rect" id="node98" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db" title="osgEarth::TerrainLayerOptions::maxLevel" alt="" coords="531,625,792,655"/><area shape="rect" id="node100" href="classosgEarth_1_1TerrainLayerOptions.html#a4d8a5f343b810d99e8ab692557e78cc2" title="osgEarth::TerrainLayerOptions::maxLevelResolution" alt="" coords="499,679,824,708"/><area shape="rect" id="node102" href="classosgEarth_1_1TerrainLayerOptions.html#ac03dee3a8a1e08dbd18a8a3cd5515e7b" title="osgEarth::TerrainLayerOptions::minLevel" alt="" coords="532,732,791,761"/><area shape="rect" id="node104" href="classosgEarth_1_1TerrainLayerOptions.html#a825c28887472d1715fac2659e92cd29d" title="osgEarth::TerrainLayerOptions::minLevelResolution" alt="" coords="501,785,821,815"/><area shape="rect" id="node106" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="581,311,741,340"/><area shape="rect" id="node16" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="911,261,1092,291"/><area shape="rect" id="node18" href="classosgEarth_1_1GeoExtent.html#a744d26309f6eddfd74b72a01c159dc79" title="osgEarth::GeoExtent::crossesDateLine" alt="" coords="1173,261,1424,291"/><area shape="rect" id="node22" href="classosgEarth_1_1TerrainLayerOptions.html#a2eaa401b3dedfe09b1995b12194acd85" title="osgEarth::TerrainLayerOptions::cacheOnly" alt="" coords="1481,176,1751,205"/><area shape="rect" id="node24" href="classosgEarth_1_1TerrainLayer.html#a94efa05e40e34514a0255250850aa889" title="osgEarth::TerrainLayer::getTileSource" alt="" coords="880,416,1123,445"/><area shape="rect" id="node27" href="classosgEarth_1_1TerrainLayer.html#ab070bc97ce845a6dd4a9e3bc8d610ee8" title="osgEarth::TerrainLayer::initTileSource" alt="" coords="1179,416,1419,445"/><area shape="rect" id="node29" href="classosgEarth_1_1TerrainLayerOptions.html#a8418e1ff33afb76c241144c1e1804992" title="osgEarth::TerrainLayerOptions::cacheFormat" alt="" coords="1475,283,1757,312"/><area shape="rect" id="node31" href="structosgEarth_1_1CacheSpec.html#a74395f8d7912eab234ba66e7537d7ba6" title="osgEarth::CacheSpec::cacheId" alt="" coords="1515,336,1717,365"/><area shape="rect" id="node34" href="classosgEarth_1_1Profile.html#a3d862455737d2b9f813a078f9ec22752" title="osgEarth::Profile::create" alt="" coords="1535,389,1697,419"/><area shape="rect" id="node72" href="classosgEarth_1_1TileSourceFactory.html#a56df79a1262c8b6cca64a121f60181d0" title="osgEarth::TileSourceFactory::create" alt="" coords="1500,443,1732,472"/><area shape="rect" id="node76" href="classosgEarth_1_1TerrainLayerOptions.html#a50caaefc27eb54a34b6ff5628c43c34f" title="osgEarth::TerrainLayerOptions::driver" alt="" coords="1497,496,1735,525"/><area shape="rect" id="node78" href="classosgEarth_1_1TerrainLayer.html#a55830499ac602f6f8dac06de5f81da2c" title="osgEarth::TerrainLayer::getName" alt="" coords="1509,549,1723,579"/><area shape="rect" id="node82" href="structosgEarth_1_1CacheSpec.html#aa0aeef925682e234f4684a59f7454406" title="osgEarth::CacheSpec::name" alt="" coords="1521,603,1711,632"/><area shape="rect" id="node84" href="classosgEarth_1_1TerrainLayerOptions.html#ae1fd077446d87d31ff2c0d7ddad4a112" title="osgEarth::TerrainLayerOptions::profile" alt="" coords="1495,656,1737,685"/><area shape="rect" id="node86" href="classosgEarth_1_1TerrainLayer.html#a6e2d32e9af81bd8372dc7d2fe3942446" title="osgEarth::TerrainLayer::suggestCacheFormat" alt="" coords="1473,229,1759,259"/><area shape="rect" id="node36" href="classosgEarth_1_1VerticalSpatialReference.html#a9acfa96c19f41c37fe4ac55493440b44" title="osgEarth::VerticalSpatialReference::create" alt="" coords="1809,137,2079,167"/><area shape="rect" id="node49" href="classosgEarth_1_1SpatialReference.html#a6f0818e362f23b50606b0e4f66773da1" title="osgEarth::SpatialReference::create" alt="" coords="1831,456,2057,485"/><area shape="rect" id="node65" href="classosgEarth_1_1Profile.html#abd4572b378cfd1f2a671774e9650e5b1" title="osgEarth::Profile::Profile" alt="" coords="1863,323,2025,352"/><area shape="rect" id="node38" href="classosgEarth_1_1Geoid.html#a416fbcb1c9daf8a9380a1f427ad4649c" title="osgEarth::Geoid::getName" alt="" coords="2571,59,2747,88"/><area shape="rect" id="node40" href="classosgEarth_1_1VerticalSpatialReference.html#a2bbc5770a11ffef3e170ade273b9e935" title="osgEarth::VerticalSpatialReference::registerGeoid" alt="" coords="2163,5,2472,35"/><area shape="rect" id="node43" href="namespaceosgEarth.html#a4c5320dc9ca7ee620ce2262d72fff769" title="osgEarth::startsWith" alt="" coords="2247,163,2388,192"/><area shape="rect" id="node45" href="namespaceosgEarth.html#a2c3b7223f6314c9d36e643c231f9123f" title="osgEarth::toLower" alt="" coords="2253,216,2381,245"/><area shape="rect" id="node47" href="classosgEarth_1_1VerticalSpatialReference.html#ab87754166e414475d1e59130cc6a579f" title="osgEarth::VerticalSpatialReference::VerticalSpatialReference" alt="" coords="2128,59,2507,88"/><area shape="rect" id="node51" href="classosgEarth_1_1SpatialReference.html#a91d6f84d9ff109c35108dcd8c814f4d5" title="osgEarth::SpatialReference::createCube" alt="" coords="2189,429,2445,459"/><area shape="rect" id="node53" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="2556,403,2761,432"/><area shape="rect" id="node55" href="classosgEarth_1_1SpatialReference.html#a2d9cb8d1418187a640151fd728e12546" title="osgEarth::SpatialReference::createFromPROJ4" alt="" coords="2168,483,2467,512"/><area shape="rect" id="node57" href="classosgEarth_1_1SpatialReference.html#a350359a4aecf5fcb3c5cd0cda7678cbd" title="osgEarth::SpatialReference::createFromWKT" alt="" coords="2175,536,2460,565"/><area shape="rect" id="node59" href="classosgEarth_1_1SpatialReference.html#a1ce7bab196098591946294d17771c355" title="osgEarth::SpatialReference::getSpatialReferenceCache" alt="" coords="2144,589,2491,619"/><area shape="rect" id="node62" href="classosgEarth_1_1SpatialReference.html#a28d916a87ed2653a5763bf8777cd9cbf" title="osgEarth::SpatialReference::transform" alt="" coords="2195,376,2440,405"/><area shape="rect" id="node67" href="classosgEarth_1_1Registry.html#a5f57482206df285f0910c7756a19d0d2" title="osgEarth::Registry::getDefaultVSRS" alt="" coords="2200,269,2435,299"/><area shape="rect" id="node69" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="2167,323,2468,352"/><area shape="rect" id="node74" href="classosgEarth_1_1DriverConfigOptions.html#ab989b270751800e8fca87b17fdc456bc" title="osgEarth::DriverConfigOptions::getDriver" alt="" coords="1813,509,2075,539"/><area shape="rect" id="node90" href="classosgEarth_1_1TileSource.html#a639bff6967ff1677371ea6208c8eb62a" title="osgEarth::TileSource::getPixelsPerTile" alt="" coords="879,471,1124,500"/><area shape="rect" id="node92" href="classosgEarth_1_1TileSourceOptions.html#a408fb6362b758888204763465a986346" title="osgEarth::TileSourceOptions::tileSize" alt="" coords="1179,469,1419,499"/></map>
</div>
</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_icgraph.png" border="0" usemap="#classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_icgraph" alt=""/></div>
<map name="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_icgraph" id="classTileBuilder_a109d97b5a9d6205b7c368f5ac2d17df2_icgraph">
<area shape="rect" id="node3" href="classParallelKeyNodeFactory.html#af00822341586420fd1e5dd85eeddf496" title="ParallelKeyNodeFactory::createNode" alt="" coords="204,5,441,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afbf384bc5f10099a4eb078f85271efe9"></a><!-- doxytag: member="TileBuilder::createTile" ref="afbf384bc5f10099a4eb078f85271efe9" args="(const TileKey &amp;key, bool parallelize, osg::ref_ptr&lt; Tile &gt; &amp;out_tile, bool &amp;out_hasRealData, bool &amp;out_hasLodBlendedLayers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TileBuilder::createTile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>parallelize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::ref_ptr&lt; <a class="el" href="classTile.html">Tile</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_hasRealData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_hasLodBlendedLayers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_8cpp_source.html#l00304">304</a> of file <a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classosgEarth_1_1MapFrame.html">MapFrame</a> mapf( <a class="code" href="classTileBuilder.html#a1f38d82a61c21ac5ffff400afe472bb6">_map</a>, Map::MASKED_TERRAIN_LAYERS );

    SourceRepo repo;

    <span class="comment">// init this to false, then search for real data. &quot;Real data&quot; is data corresponding</span>
    <span class="comment">// directly to the key, as opposed to fallback data, which is derived from a lower</span>
    <span class="comment">// LOD key.</span>
    out_hasRealData = <span class="keyword">false</span>;
    out_hasLodBlendedLayers = <span class="keyword">false</span>;

    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mapInfo = mapf.getMapInfo();

    <span class="comment">// If we need more than one layer, fetch them in parallel.</span>
    <span class="comment">// TODO: change the test based on isKeyValid total.</span>
    <span class="keywordflow">if</span> ( parallelize &amp;&amp; (mapf.imageLayers().size() + mapf.elevationLayers().size() &gt; 1) )
    {
        <span class="comment">// count the valid layers.</span>
        <span class="keywordtype">int</span> jobCount = 0;

        <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = mapf.imageLayers().begin(); i != mapf.imageLayers().end(); ++i )
        {
            <span class="keywordflow">if</span> ( i-&gt;get()-&gt;isKeyValid( key ) )
                ++jobCount;

            <span class="keywordflow">if</span> ( i-&gt;get()-&gt;getImageLayerOptions().lodBlending() == true )
                out_hasLodBlendedLayers = <span class="keyword">true</span>;
        }

        <span class="keywordflow">if</span> ( mapf.elevationLayers().size() &gt; 0 )
            ++jobCount;

        <span class="comment">// A thread job monitoring event:</span>
        <a class="code" href="classosgEarth_1_1Threading_1_1MultiEvent.html">Threading::MultiEvent</a> semaphore( jobCount );

        <span class="comment">// Start the image layer jobs:</span>
        <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = mapf.imageLayers().begin(); i != mapf.imageLayers().end(); ++i )
        {
            <a class="code" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a>* layer = i-&gt;get();
            <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>(key) )
            {
                <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildColorLayer&gt;</a>* j = <span class="keyword">new</span> <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildColorLayer&gt;</a>( &amp;semaphore );
                j-&gt;init( key, layer, mapInfo, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
                j-&gt;<a class="code" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f">setPriority</a>( -(<span class="keywordtype">float</span>)key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() );
                <a class="code" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a>-&gt;<a class="code" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b">add</a>( j );
            }
        }

        <span class="comment">// If we have elevation layers, start an elevation job as well. Otherwise just create an</span>
        <span class="comment">// empty one while we&#39;re waiting for the images to load.</span>
        <span class="keywordflow">if</span> ( mapf.elevationLayers().size() &gt; 0 )
        {
            <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildElevLayer&gt;</a>* ej = <span class="keyword">new</span> <a class="code" href="structosgEarth_1_1ParallelTask.html">ParallelTask&lt;BuildElevLayer&gt;</a>( &amp;semaphore );
            ej-&gt;init( key, mapf, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
            ej-&gt;<a class="code" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f">setPriority</a>( -(<span class="keywordtype">float</span>)key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() );
            <a class="code" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a>-&gt;<a class="code" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b">add</a>( ej );
        }
        <span class="keywordflow">else</span>
        {
            <a class="code" href="structBuildElevLayer.html">BuildElevLayer</a> build;
            build.<a class="code" href="structBuildElevLayer.html#a832bc3ae108451165a179ca24c9fc32a">init</a>( key, mapf, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
            build.<a class="code" href="structBuildElevLayer.html#ae5270734db988a847a1ef9140a52f782">execute</a>();
        }

        <span class="comment">// Wait for all the jobs to finish.</span>
        semaphore.wait();
    }
    
    <span class="comment">// Fetch the image data serially:</span>
    <span class="keywordflow">else</span>
    {
        <span class="comment">// gather all the image layers serially.</span>
        <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = mapf.imageLayers().begin(); i != mapf.imageLayers().end(); ++i )
        {
            <a class="code" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a>* layer = i-&gt;get();
            <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>(key) )
            {
                <a class="code" href="structBuildColorLayer.html">BuildColorLayer</a> build;
                build.<a class="code" href="structBuildColorLayer.html#acb23680d5a11b5a1f7ad15d3ed37c2fa">init</a>( key, layer, mapInfo, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
                build.<a class="code" href="structBuildColorLayer.html#a02e09da907645980799a762c4564435c">execute</a>();
            }

            <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1ImageLayer.html#a6fbc035cfa825c362ed96285cd5d0cb2">getImageLayerOptions</a>().<a class="code" href="classosgEarth_1_1ImageLayerOptions.html#a2ab0eb5eea098a6a8780553657833f60">lodBlending</a>() == true )
                out_hasLodBlendedLayers = <span class="keyword">true</span>;
        }
        
        <span class="comment">// make an elevation layer.</span>
        <a class="code" href="structBuildElevLayer.html">BuildElevLayer</a> build;
        build.<a class="code" href="structBuildElevLayer.html#a832bc3ae108451165a179ca24c9fc32a">init</a>( key, mapf, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
        build.<a class="code" href="structBuildElevLayer.html#ae5270734db988a847a1ef9140a52f782">execute</a>();
    }

    <span class="comment">// Bail out now if there&#39;s no data to be had.</span>
    <span class="keywordflow">if</span> ( repo._colorLayers.size() == 0 &amp;&amp; !repo._elevLayer.getHFLayer() )
    {
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// OK we are making a tile, so if there&#39;s no heightfield yet, make an empty one.</span>
    <span class="keywordflow">if</span> ( !repo._elevLayer.getHFLayer() )
    {
        osg::HeightField* hf = key.<a class="code" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80">getVerticalSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25">createReferenceHeightField</a>( key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>(), 8, 8 );
        osgTerrain::HeightFieldLayer* hfLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer( hf );
        hfLayer-&gt;setLocator( GeoLocator::createForKey(key, mapInfo) );
        repo._elevLayer = <a class="code" href="classCustomElevLayer.html">CustomElevLayer</a>( hfLayer, <span class="keyword">true</span> );
    }

    <span class="comment">// Now, if there are any color layers that did not get built, create them with an empty</span>
    <span class="comment">// image so the shaders have something to draw.</span>
    osg::ref_ptr&lt;osg::Image&gt; emptyImage;
    osgTerrain::Locator* locator = repo._elevLayer.getHFLayer()-&gt;getLocator();

    <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = mapf.imageLayers().begin(); i != mapf.imageLayers().end(); ++i )
    {
        <span class="keywordflow">if</span> ( !i-&gt;get()-&gt;isKeyValid(key) )
        {
            <span class="keywordflow">if</span> ( !emptyImage.valid() )
                emptyImage = ImageUtils::createEmptyImage();

            repo.add( <a class="code" href="classCustomColorLayer.html">CustomColorLayer</a>(
                i-&gt;get(), emptyImage.get(),
                locator,
                key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>(),
                key,
                true ) );
        }
    }

    <span class="comment">//osg::Vec3dArray* maskBounds = 0L;</span>
    <span class="comment">//osgEarth::MaskLayer* mask = mapf.getTerrainMaskLayer();</span>
    <span class="comment">//if (mask)</span>
    <span class="comment">//  maskBounds = mask-&gt;getOrCreateBoundary();</span>

    <span class="comment">// Ready to create the actual tile.</span>
    <a class="code" href="structAssembleTile.html">AssembleTile</a> assemble;
    assemble.<a class="code" href="structAssembleTile.html#a5b4a966c2efaab7ad33e7ce4339f4d5c">init</a>( key, mapInfo, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo, mapf.terrainMaskLayers() );
    assemble.<a class="code" href="structAssembleTile.html#a85c07d0b1fdaba65b0c69cb3c93ea4e5">execute</a>();

    <span class="keywordflow">if</span> (!out_hasRealData)
    {
        <span class="comment">// Check the results and see if we have any real data.</span>
        <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = repo._colorLayers.begin(); i != repo._colorLayers.end(); ++i )
        {
            <span class="keywordflow">if</span> ( !i-&gt;second.isFallbackData() ) 
            {
                out_hasRealData = <span class="keyword">true</span>;
                <span class="keywordflow">break</span>;
            }
        }
    }

    <span class="keywordflow">if</span> ( !out_hasRealData &amp;&amp; !repo._elevLayer.isFallbackData() )
    {
        out_hasRealData = <span class="keyword">true</span>;
    }

    out_tile = assemble.<a class="code" href="structAssembleTile.html#aec9be06c513eb6ee7b3c4d80358a7325">_tile</a>;
}
</pre></div>
<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_cgraph.png" border="0" usemap="#classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_cgraph" alt=""/></div>
<map name="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_cgraph" id="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_cgraph">
<area shape="rect" id="node3" href="structTileBuilder_1_1SourceRepo.html#ad947f3a49ba7477d3feea7ec9010c232" title="TileBuilder::SourceRepo::add" alt="" coords="252,115,444,144"/><area shape="rect" id="node7" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b" title="osgEarth::TaskService::add" alt="" coords="256,168,440,197"/><area shape="rect" id="node9" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="935,220,1329,249"/><area shape="rect" id="node31" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="227,795,469,824"/><area shape="rect" id="node33" href="structAssembleTile.html#a85c07d0b1fdaba65b0c69cb3c93ea4e5" title="AssembleTile::execute" alt="" coords="271,376,425,405"/><area shape="rect" id="node46" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1037,299,1227,328"/><area shape="rect" id="node50" href="structBuildColorLayer.html#a02e09da907645980799a762c4564435c" title="BuildColorLayer::execute" alt="" coords="264,637,432,667"/><area shape="rect" id="node66" href="structBuildElevLayer.html#ae5270734db988a847a1ef9140a52f782" title="BuildElevLayer::execute" alt="" coords="267,480,429,509"/><area shape="rect" id="node73" href="classCustomElevLayer.html#a9debf0b218daefb3479f2ee0a3429f99" title="CustomElevLayer::getHFLayer" alt="" coords="247,848,449,877"/><area shape="rect" id="node75" href="classosgEarth_1_1ImageLayer.html#a6fbc035cfa825c362ed96285cd5d0cb2" title="osgEarth::ImageLayer::getImageLayerOptions" alt="" coords="204,901,492,931"/><area shape="rect" id="node77" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="599,1008,828,1037"/><area shape="rect" id="node79" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="240,955,456,984"/><area shape="rect" id="node81" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="253,1008,443,1037"/><area shape="rect" id="node83" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="240,1061,456,1091"/><area shape="rect" id="node85" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="235,1115,461,1144"/><area shape="rect" id="node87" href="structAssembleTile.html#a5b4a966c2efaab7ad33e7ce4339f4d5c" title="AssembleTile::init" alt="" coords="285,1168,411,1197"/><area shape="rect" id="node91" href="structBuildColorLayer.html#acb23680d5a11b5a1f7ad15d3ed37c2fa" title="BuildColorLayer::init" alt="" coords="279,1221,417,1251"/><area shape="rect" id="node93" href="structBuildElevLayer.html#a832bc3ae108451165a179ca24c9fc32a" title="BuildElevLayer::init" alt="" coords="281,1275,415,1304"/><area shape="rect" id="node95" href="classCustomElevLayer.html#aae7e361d8fb7b41244fbb7bbede18fd8" title="CustomElevLayer::isFallbackData" alt="" coords="237,1328,459,1357"/><area shape="rect" id="node97" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="236,691,460,720"/><area shape="rect" id="node106" href="classosgEarth_1_1ImageLayerOptions.html#a2ab0eb5eea098a6a8780553657833f60" title="osgEarth::ImageLayerOptions::lodBlending" alt="" coords="213,1381,483,1411"/><area shape="rect" id="node108" href="classosgEarth_1_1TaskRequest.html#a099e1b59286c9c5fa63ce42fe4d17f9f" title="osgEarth::TaskRequest::setPriority" alt="" coords="235,1435,461,1464"/><area shape="rect" id="node110" href="classosgEarth_1_1MapFrame.html#accdba81d4ca1b436f0d011e2b5ee5b3a" title="osgEarth::MapFrame::terrainMaskLayers" alt="" coords="219,1488,477,1517"/><area shape="rect" id="node112" href="classosgEarth_1_1Threading_1_1MultiEvent.html#abd4182b35d16c43b7b171a7ef8eb1546" title="osgEarth::Threading::MultiEvent::wait" alt="" coords="228,1541,468,1571"/><area shape="rect" id="node5" href="classCustomColorLayer.html#af539b1957865fd51e5eb75ef7bd497ed" title="CustomColorLayer::getUID" alt="" coords="623,115,804,144"/><area shape="rect" id="node11" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="1380,59,1681,88"/><area shape="rect" id="node13" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1432,272,1629,301"/><area shape="rect" id="node15" href="classosgEarth_1_1GeoExtent.html#a9ed09180cbcdd15321ced7b24f4c4c9d" title="osgEarth::GeoExtent::height" alt="" coords="1437,112,1624,141"/><area shape="rect" id="node17" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="1397,165,1664,195"/><area shape="rect" id="node19" href="classosgEarth_1_1GeoExtent.html#a279160f409098609ad030cf7b3e7bf9d" title="osgEarth::GeoExtent::transform" alt="" coords="1428,5,1633,35"/><area shape="rect" id="node21" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="1440,485,1621,515"/><area shape="rect" id="node23" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1439,325,1623,355"/><area shape="rect" id="node25" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1441,379,1620,408"/><area shape="rect" id="node27" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1439,432,1623,461"/><area shape="rect" id="node29" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1441,219,1620,248"/><area shape="rect" id="node35" href="classosgEarth_1_1GeoLocator.html#a6554cfe7b4e3ec209a53ad486f05381d" title="osgEarth::GeoLocator::createForKey" alt="" coords="596,376,831,405"/><area shape="rect" id="node48" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="640,323,787,352"/><area shape="rect" id="node37" href="classosgEarth_1_1GeoLocator.html#aed86f045ce4acb7862c7494059e000ba" title="osgEarth::GeoLocator::createForExtent" alt="" coords="1007,377,1257,407"/><area shape="rect" id="node40" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a" title="osgEarth::MapInfo::isPlateCarre" alt="" coords="1427,539,1635,568"/><area shape="rect" id="node52" href="classosgEarth_1_1ImageUtils.html#aa2ac4bc68d27c344bde211c81e4fcb58" title="osgEarth::ImageUtils::createEmptyImage" alt="" coords="583,744,844,773"/><area shape="rect" id="node56" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="599,797,828,827"/><area shape="rect" id="node58" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="611,584,816,613"/><area shape="rect" id="node60" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="612,637,815,667"/><area shape="rect" id="node62" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="633,851,793,880"/><area shape="rect" id="node64" href="classosgEarth_1_1GeoImage.html#a40db87ae60b4dde189b1f218ff3c8777" title="osgEarth::GeoImage::valid" alt="" coords="625,691,801,720"/><area shape="rect" id="node70" href="classosgEarth_1_1HeightFieldUtils.html#a7c8a36c9f366f6dd1c6bfe56449662b9" title="osgEarth::HeightFieldUtils::scaleHeightFieldToDegrees" alt="" coords="541,429,885,459"/><area shape="rect" id="node89" href="namespaceanonymous__namespace_02MeshConsolidator_8cpp_03.html#aa89185796215b0f0669f5a44549b6eed" title="anonymous_namespace\{MeshConsolidator::cpp\}::copy" alt="" coords="543,1168,884,1197"/><area shape="rect" id="node100" href="classosgEarth_1_1Profile.html#aec17c2da87ec76abf3d8b763e54ce8c5" title="osgEarth::Profile::getLevelOfDetailForHorizResolution" alt="" coords="964,743,1300,772"/><area shape="rect" id="node103" href="classosgEarth_1_1TerrainLayer.html#a8c3b22dfd214263aefe467b36b9d0828" title="osgEarth::TerrainLayer::getProfile" alt="" coords="605,955,821,984"/></map>
</div>
</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_icgraph.png" border="0" usemap="#classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_icgraph" alt=""/></div>
<map name="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_icgraph" id="classTileBuilder_afbf384bc5f10099a4eb078f85271efe9_icgraph">
<area shape="rect" id="node3" href="classSerialKeyNodeFactory.html#a46792fd57c610f50edcf87499281e274" title="SerialKeyNodeFactory::createNode" alt="" coords="204,5,431,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a96041d5a9b95b2f23922398fa5b5f32b"></a><!-- doxytag: member="TileBuilder::finalizeJob" ref="a96041d5a9b95b2f23922398fa5b5f32b" args="(Job *job, osg::ref_ptr&lt; Tile &gt; &amp;out_tile, bool &amp;out_hasRealData, bool &amp;out_hasLodBlending)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TileBuilder::finalizeJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTileBuilder_1_1Job.html">TileBuilder::Job</a> *&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::ref_ptr&lt; <a class="el" href="classTile.html">Tile</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>out_tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_hasRealData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_hasLodBlending</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_8cpp_source.html#l00229">229</a> of file <a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    SourceRepo&amp; repo = job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a73b1b50221e013121c2f6796e398f579">_repo</a>;

    out_hasRealData = <span class="keyword">false</span>;
    out_hasLodBlending = <span class="keyword">false</span>;

    <span class="comment">// Bail out now if there&#39;s no data to be had.</span>
    <span class="keywordflow">if</span> ( repo._colorLayers.size() == 0 &amp;&amp; !repo._elevLayer.getHFLayer() )
    {
        <span class="keywordflow">return</span>;
    }

    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a>&amp; key = job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a481e796516b7ef2efa1c6069facb83b0">_key</a>;
    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mapInfo = job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a9747cde655255d0fbb29df1df463e9d0">_mapf</a>.<a class="code" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6">getMapInfo</a>();

    <span class="comment">// OK we are making a tile, so if there&#39;s no heightfield yet, make an empty one.</span>
    <span class="keywordflow">if</span> ( !repo._elevLayer.getHFLayer() )
    {
        osg::HeightField* hf = key.<a class="code" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80">getVerticalSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25">createReferenceHeightField</a>( key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>(), 8, 8 );
        osgTerrain::HeightFieldLayer* hfLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer( hf );
        hfLayer-&gt;setLocator( GeoLocator::createForKey(key, mapInfo) );
        repo._elevLayer = <a class="code" href="classCustomElevLayer.html">CustomElevLayer</a>( hfLayer, <span class="keyword">true</span> );
    }

    <span class="comment">// Now, if there are any color layers that did not get built, create them with an empty</span>
    <span class="comment">// image so the shaders have something to draw.</span>
    osg::ref_ptr&lt;osg::Image&gt; emptyImage;
    osgTerrain::Locator* locator = repo._elevLayer.getHFLayer()-&gt;getLocator();

    <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a9747cde655255d0fbb29df1df463e9d0">_mapf</a>.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().begin(); i != job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a9747cde655255d0fbb29df1df463e9d0">_mapf</a>.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().end(); ++i )
    {
        <span class="keywordflow">if</span> ( !i-&gt;get()-&gt;isKeyValid(key) )
        {
            <span class="keywordflow">if</span> ( !emptyImage.valid() )
                emptyImage = ImageUtils::createEmptyImage();

            repo.add( <a class="code" href="classCustomColorLayer.html">CustomColorLayer</a>(
                i-&gt;get(), emptyImage.get(),
                locator,
                key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>(),
                key,
                true ) );
        }

        <span class="keywordflow">if</span> ( i-&gt;get()-&gt;getImageLayerOptions().lodBlending() == true )
            out_hasLodBlending = <span class="keyword">true</span>;
    }

    <span class="comment">// Ready to create the actual tile.</span>
    <a class="code" href="structAssembleTile.html">AssembleTile</a> assemble;
    assemble.<a class="code" href="structAssembleTile.html#a5b4a966c2efaab7ad33e7ce4339f4d5c">init</a>( key, mapInfo, <a class="code" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">_terrainOptions</a>, repo );
    assemble.<a class="code" href="structAssembleTile.html#a85c07d0b1fdaba65b0c69cb3c93ea4e5">execute</a>();

    <span class="comment">// Check the results and see if we have any real data.</span>
    <span class="keywordflow">for</span>( ColorLayersByUID::const_iterator i = repo._colorLayers.begin(); i != repo._colorLayers.end(); ++i )
    {
        <span class="keywordflow">if</span> ( !i-&gt;second.isFallbackData() ) 
        {
            out_hasRealData = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;
        }
    }
    <span class="keywordflow">if</span> ( !out_hasRealData &amp;&amp; !repo._elevLayer.isFallbackData() )
    {
        out_hasRealData = <span class="keyword">true</span>;
    }

    out_tile = assemble.<a class="code" href="structAssembleTile.html#aec9be06c513eb6ee7b3c4d80358a7325">_tile</a>;
}
</pre></div>
<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_cgraph.png" border="0" usemap="#classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_cgraph" alt=""/></div>
<map name="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_cgraph" id="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_cgraph">
<area shape="rect" id="node3" href="structTileBuilder_1_1SourceRepo.html#ad947f3a49ba7477d3feea7ec9010c232" title="TileBuilder::SourceRepo::add" alt="" coords="228,587,420,616"/><area shape="rect" id="node7" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="879,517,1273,547"/><area shape="rect" id="node76" href="structAssembleTile.html#a85c07d0b1fdaba65b0c69cb3c93ea4e5" title="AssembleTile::execute" alt="" coords="247,744,401,773"/><area shape="rect" id="node100" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="981,771,1171,800"/><area shape="rect" id="node105" href="classCustomElevLayer.html#a9debf0b218daefb3479f2ee0a3429f99" title="CustomElevLayer::getHFLayer" alt="" coords="223,848,425,877"/><area shape="rect" id="node107" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="209,901,439,931"/><area shape="rect" id="node109" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="216,955,432,984"/><area shape="rect" id="node111" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="229,1008,419,1037"/><area shape="rect" id="node113" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="216,1061,432,1091"/><area shape="rect" id="node115" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="211,1115,437,1144"/><area shape="rect" id="node117" href="structAssembleTile.html#a5b4a966c2efaab7ad33e7ce4339f4d5c" title="AssembleTile::init" alt="" coords="261,1168,387,1197"/><area shape="rect" id="node121" href="classCustomElevLayer.html#aae7e361d8fb7b41244fbb7bbede18fd8" title="CustomElevLayer::isFallbackData" alt="" coords="213,1221,435,1251"/><area shape="rect" id="node5" href="classCustomColorLayer.html#af539b1957865fd51e5eb75ef7bd497ed" title="CustomColorLayer::getUID" alt="" coords="568,587,749,616"/><area shape="rect" id="node9" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="1324,411,1625,440"/><area shape="rect" id="node32" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="3293,419,3560,448"/><area shape="rect" id="node55" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1376,571,1573,600"/><area shape="rect" id="node57" href="classosgEarth_1_1GeoExtent.html#a9ed09180cbcdd15321ced7b24f4c4c9d" title="osgEarth::GeoExtent::height" alt="" coords="1381,5,1568,35"/><area shape="rect" id="node60" href="classosgEarth_1_1GeoExtent.html#a279160f409098609ad030cf7b3e7bf9d" title="osgEarth::GeoExtent::transform" alt="" coords="1372,464,1577,493"/><area shape="rect" id="node64" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="1384,59,1565,88"/><area shape="rect" id="node68" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1383,624,1567,653"/><area shape="rect" id="node70" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1385,677,1564,707"/><area shape="rect" id="node72" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1383,731,1567,760"/><area shape="rect" id="node74" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1385,517,1564,547"/><area shape="rect" id="node11" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="3609,499,3815,528"/><area shape="rect" id="node17" href="classosgEarth_1_1SpatialReference.html#ae27903c7c477c9f22b68ee71415888bf" title="osgEarth::SpatialReference::SpatialReference" alt="" coords="1675,440,1965,469"/><area shape="rect" id="node13" href="classosgEarth_1_1SpatialReference.html#ae8cda9f2cf24a92d09c58462c5fbd5e8" title="osgEarth::SpatialReference::_init" alt="" coords="3865,499,4079,528"/><area shape="rect" id="node15" href="namespaceanonymous__namespace_02SpatialReference_8cpp_03.html#a2d59d21c23228cfce0a56b2174727ee9" title="anonymous_namespace\{SpatialReference::cpp\}::getOGRAttrValue" alt="" coords="4128,499,4539,528"/><area shape="rect" id="node19" href="classosgEarth_1_1SpatialReference.html#a28d916a87ed2653a5763bf8777cd9cbf" title="osgEarth::SpatialReference::transform" alt="" coords="2013,483,2259,512"/><area shape="rect" id="node22" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="2639,576,2913,605"/><area shape="rect" id="node39" href="classosgEarth_1_1SpatialReference.html#a3c3d798015a48c93c5063182ac177688" title="osgEarth::SpatialReference::transformPoints" alt="" coords="2307,393,2589,423"/><area shape="rect" id="node24" href="classosgEarth_1_1SpatialReference.html#afe559cd555e232b45109fbce72742b02" title="osgEarth::SpatialReference::_isEquivalentTo" alt="" coords="2963,472,3245,501"/><area shape="rect" id="node26" href="classosgEarth_1_1SpatialReference.html#ad7d6ef0605664b77e8348df5324ea32f" title="osgEarth::SpatialReference::getEllipsoid" alt="" coords="3299,525,3555,555"/><area shape="rect" id="node29" href="classosgEarth_1_1SpatialReference.html#a62d6dc2c358aaeeba591954de0475333" title="osgEarth::SpatialReference::getWKT" alt="" coords="3308,472,3545,501"/><area shape="rect" id="node35" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="3301,365,3552,395"/><area shape="rect" id="node41" href="SpatialReference_8cpp.html#a253ee9380896291f2aec77e4868d994c" title="geographicToMercator" alt="" coords="2701,419,2851,448"/><area shape="rect" id="node43" href="classosgEarth_1_1SpatialReference.html#a2e11d757cd795a81173912054fbb83c9" title="osgEarth::SpatialReference::getName" alt="" coords="2983,264,3225,293"/><area shape="rect" id="node51" href="SpatialReference_8cpp.html#a047d2c7e4580672483d0926a8f694e7e" title="mercatorToGeographic" alt="" coords="2699,472,2853,501"/><area shape="rect" id="node53" href="classosgEarth_1_1SpatialReference.html#a1f6be4de7c26f8dd31504f10b21d68be" title="osgEarth::SpatialReference::postTransform" alt="" coords="2639,264,2913,293"/><area shape="rect" id="node62" href="classosgEarth_1_1GeoExtent.html#a11d477896ee28030e4641760c737aab7" title="osgEarth::GeoExtent::GeoExtent" alt="" coords="1713,731,1927,760"/><area shape="rect" id="node66" href="classosgEarth_1_1GeoExtent.html#a744d26309f6eddfd74b72a01c159dc79" title="osgEarth::GeoExtent::crossesDateLine" alt="" coords="1695,59,1945,88"/><area shape="rect" id="node78" href="classosgEarth_1_1GeoLocator.html#a6554cfe7b4e3ec209a53ad486f05381d" title="osgEarth::GeoLocator::createForKey" alt="" coords="541,691,776,720"/><area shape="rect" id="node102" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="585,744,732,773"/><area shape="rect" id="node80" href="classosgEarth_1_1GeoLocator.html#aed86f045ce4acb7862c7494059e000ba" title="osgEarth::GeoLocator::createForExtent" alt="" coords="951,704,1201,733"/><area shape="rect" id="node82" href="classosgEarth_1_1SpatialReference.html#adbe193d96c5a5e4554a7d6bc97746c32" title="osgEarth::SpatialReference::createLocator" alt="" coords="2969,731,3239,760"/><area shape="rect" id="node89" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="1368,835,1581,864"/><area shape="rect" id="node92" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="1369,888,1580,917"/><area shape="rect" id="node94" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a" title="osgEarth::MapInfo::isPlateCarre" alt="" coords="1371,941,1579,971"/><area shape="rect" id="node85" href="SpatialReference_8cpp.html#a615cfe6f69ed5a7ed1792da11f0a79cb" title="getTransformFromExtents" alt="" coords="3340,781,3513,811"/><area shape="rect" id="node119" href="namespaceanonymous__namespace_02MeshConsolidator_8cpp_03.html#aa89185796215b0f0669f5a44549b6eed" title="anonymous_namespace\{MeshConsolidator::cpp\}::copy" alt="" coords="488,1168,829,1197"/></map>
</div>
</p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_icgraph.png" border="0" usemap="#classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_icgraph" alt=""/></div>
<map name="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_icgraph" id="classTileBuilder_a96041d5a9b95b2f23922398fa5b5f32b_icgraph">
<area shape="rect" id="node3" href="classParallelKeyNodeFactory.html#af00822341586420fd1e5dd85eeddf496" title="ParallelKeyNodeFactory::createNode" alt="" coords="209,5,447,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8cacc0c7b98f2a37ad4e9314b37aee0"></a><!-- doxytag: member="TileBuilder::getTaskService" ref="ae8cacc0c7b98f2a37ad4e9314b37aee0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a>* TileBuilder::getTaskService </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_source.html#l00087">87</a> of file <a class="el" href="TileBuilder_source.html">TileBuilder</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="a9ebbebc4c812e834b610d119097c1f4c"></a><!-- doxytag: member="TileBuilder::runJob" ref="a9ebbebc4c812e834b610d119097c1f4c" args="(Job *job)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TileBuilder::runJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTileBuilder_1_1Job.html">TileBuilder::Job</a> *&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_8cpp_source.html#l00222">222</a> of file <a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span>( TaskRequestVector::iterator i = job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a27f745146ccae1b62ad127299913b501">_tasks</a>.begin(); i != job-&gt;<a class="code" href="structTileBuilder_1_1Job.html#a27f745146ccae1b62ad127299913b501">_tasks</a>.end(); ++i )
        <a class="code" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">_service</a>-&gt;<a class="code" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b">add</a>( i-&gt;get() );
}
</pre></div>
<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_cgraph.png" border="0" usemap="#classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_cgraph" alt=""/></div>
<map name="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_cgraph" id="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TaskService.html#a2b321df75059f5d521de641a440e4c8b" title="osgEarth::TaskService::add" alt="" coords="184,5,368,35"/></map>
</div>
</p>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_icgraph.png" border="0" usemap="#classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_icgraph" alt=""/></div>
<map name="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_icgraph" id="classTileBuilder_a9ebbebc4c812e834b610d119097c1f4c_icgraph">
<area shape="rect" id="node3" href="classParallelKeyNodeFactory.html#af00822341586420fd1e5dd85eeddf496" title="ParallelKeyNodeFactory::createNode" alt="" coords="185,5,423,35"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a1f38d82a61c21ac5ffff400afe472bb6"></a><!-- doxytag: member="TileBuilder::_map" ref="a1f38d82a61c21ac5ffff400afe472bb6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1Map.html">Map</a>* <a class="el" href="classTileBuilder.html#a1f38d82a61c21ac5ffff400afe472bb6">TileBuilder::_map</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_source.html#l00090">90</a> of file <a class="el" href="TileBuilder_source.html">TileBuilder</a>.</p>

</div>
</div>
<a class="anchor" id="acc054738e53781dbe5ef4b17cbdcc3de"></a><!-- doxytag: member="TileBuilder::_service" ref="acc054738e53781dbe5ef4b17cbdcc3de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1TaskService.html">TaskService</a>* <a class="el" href="classTileBuilder.html#acc054738e53781dbe5ef4b17cbdcc3de">TileBuilder::_service</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_source.html#l00091">91</a> of file <a class="el" href="TileBuilder_source.html">TileBuilder</a>.</p>

</div>
</div>
<a class="anchor" id="a7c93f18f226d29c42516f537b238e321"></a><!-- doxytag: member="TileBuilder::_terrainOptions" ref="a7c93f18f226d29c42516f537b238e321" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a>&amp; <a class="el" href="classTileBuilder.html#a7c93f18f226d29c42516f537b238e321">TileBuilder::_terrainOptions</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="TileBuilder_source.html#l00092">92</a> of file <a class="el" href="TileBuilder_source.html">TileBuilder</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="TileBuilder_source.html">TileBuilder</a></li>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="TileBuilder_8cpp_source.html">TileBuilder.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:02:47 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
