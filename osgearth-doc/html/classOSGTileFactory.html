<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>osgEarth: OSGTileFactory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgEarth&#160;<span id="projectnumber">2.1.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>OSGTileFactory Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="OSGTileFactory" --><!-- doxytag: inherits="osg::Referenced" --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for OSGTileFactory:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory__inherit__graph.png" border="0" usemap="#OSGTileFactory_inherit__map" alt="Inheritance graph"/></div>
<map name="OSGTileFactory_inherit__map" id="OSGTileFactory_inherit__map">
<area shape="rect" id="node2" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="19,5,107,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for OSGTileFactory:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory__coll__graph.png" border="0" usemap="#OSGTileFactory_coll__map" alt="Collaboration graph"/></div>
<map name="OSGTileFactory_coll__map" id="OSGTileFactory_coll__map">
<area shape="rect" id="node2" href="classosg_1_1Referenced.html" title="Referenced" alt="" coords="1965,336,2053,365"/><area shape="rect" id="node4" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html" title="osgEarth::Drivers::OSGTerrainOptions" alt="" coords="1887,389,2132,419"/><area shape="rect" id="node6" href="classosgEarth_1_1TerrainOptions.html" title="osgEarth::TerrainOptions" alt="" coords="1524,251,1689,280"/><area shape="rect" id="node8" href="classosgEarth_1_1DriverConfigOptions.html" title="osgEarth::DriverConfigOptions" alt="" coords="1101,120,1301,149"/><area shape="rect" id="node10" href="classosgEarth_1_1ConfigOptions.html" title="osgEarth::ConfigOptions" alt="" coords="683,120,848,149"/><area shape="rect" id="node12" href="classosgEarth_1_1Config.html" title="osgEarth::Config" alt="" coords="307,120,427,149"/><area shape="rect" id="node14" href="structosgEarth_1_1Properties.html" title="osgEarth::Properties" alt="" coords="11,93,152,123"/><area shape="rect" id="node16" href="classosgEarth_1_1URIContext.html" title="osgEarth::URIContext" alt="" coords="5,147,157,176"/><area shape="rect" id="node18" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; bool \&gt;" alt="" coords="1115,28,1288,57"/><area shape="rect" id="node20" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; float \&gt;" alt="" coords="279,383,455,412"/><area shape="rect" id="node26" href="classosgEarth_1_1LoadingPolicy.html" title="osgEarth::LoadingPolicy" alt="" coords="684,263,847,292"/><area shape="rect" id="node22" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; ElevationInterpolation \&gt;" alt="" coords="1064,277,1339,307"/><area shape="rect" id="node24" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; LoadingPolicy \&gt;" alt="" coords="1085,224,1317,253"/><area shape="rect" id="node28" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; Mode \&gt;" alt="" coords="276,273,457,303"/><area shape="rect" id="node31" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; int \&gt;" alt="" coords="284,196,449,225"/><area shape="rect" id="node34" href="structosgEarth_1_1optional.html" title="osgEarth::optional\&lt; CompositingTechnique \&gt;" alt="" coords="1060,331,1343,360"/><area shape="rect" id="node38" href="classosgEarth_1_1MapFrame.html" title="osgEarth::MapFrame" alt="" coords="1937,507,2081,536"/><area shape="rect" id="node40" href="classosgEarth_1_1MapInfo.html" title="osgEarth::MapInfo" alt="" coords="1543,560,1671,589"/><area shape="rect" id="node42" href="structosgEarth_1_1Revision.html" title="osgEarth::Revision" alt="" coords="1540,507,1673,536"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classOSGTileFactory-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a228820ddad8e0cd0a974a11c8ab44739">OSGTileFactory</a> (unsigned engineId, const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;cull_thread_mapf, const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;props=<a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a>())</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821">createSubTiles</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf, <a class="el" href="classTerrain.html">Terrain</a> *terrain, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, bool populateLayers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf, <a class="el" href="classTerrain.html">Terrain</a> *terrain, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, bool populateLayers, bool wrapInPagedLOD, bool fallback, bool &amp;out_validData)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCustomColorLayerRef.html">CustomColorLayerRef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a53a1bd8339ce73c5a45b6fa3464b2777">createImageLayer</a> (const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;mapInfo, <a class="el" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a> *layer, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="classosgEarth_1_1ProgressCallback.html">ProgressCallback</a> *progress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osgTerrain::HeightFieldLayer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#aa6bdf6f6bc0676c1c5ddb8c301037f87">createHeightFieldLayer</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, bool exactOnly)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8">getTerrainOptions</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498">createURI</a> (unsigned int id, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a5e1eda20b41c9a5a435cb10060f9837e">prepareTile</a> (<a class="el" href="classTile.html">Tile</a> *tile, <a class="el" href="classTerrain.html">Terrain</a> *terrain, const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;mapInfo, bool wrapInPagedLOD)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a1de6601ddf3830ebb93dac07c00bcfb3">createValidGeoImage</a> (<a class="el" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a> *layer, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="classosgEarth_1_1GeoImage.html">GeoImage</a> &amp;out_image, <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;out_actualTileKey, <a class="el" href="classosgEarth_1_1ProgressCallback.html">ProgressCallback</a> *progress=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Matrixd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a86a7962d1ca5e5992f19faa9c796f4a0">getTransformFromExtents</a> (double minX, double minY, double maxX, double maxY) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a1533d71e8c0df619d1d9cbc236d20af9">hasMoreLevels</a> (<a class="el" href="classosgEarth_1_1Map.html">Map</a> *map, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osgTerrain::HeightFieldLayer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a9c04978feb38fc8e81d09b1743754bc3">createPlaceholderHeightfieldLayer</a> (osg::HeightField *ancestorHF, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;ancestorKey, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, <a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *locator)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static osg::HeightField *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a> (const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, int numCols=8, int numRows=8)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea">createPlaceholderTile</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf, <a class="el" href="classStreamingTerrain.html">StreamingTerrain</a> *terrain, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::Node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927">createPopulatedTile</a> (const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;mapf, <a class="el" href="classTerrain.html">Terrain</a> *terrain, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, bool wrapInPagedLOD, bool fallback, bool &amp;out_validData)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a92cf1c5ea5230676b2e780e7f41ead15">addPlaceholderImageLayers</a> (<a class="el" href="classTile.html">Tile</a> *tile, <a class="el" href="classTile.html">Tile</a> *ancestorTile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5">addPlaceholderHeightfieldLayer</a> (<a class="el" href="classStreamingTile.html">StreamingTile</a> *tile, <a class="el" href="classStreamingTile.html">StreamingTile</a> *ancestorTile, <a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *defaultLocator, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;key, const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;ancestorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">osg::ClusterCullingCallback *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e">createClusterCullingCallback</a> (<a class="el" href="classTile.html">Tile</a> *tile, osg::EllipsoidModel *et)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a351ed16babceac21c5c3252343f0512b">init</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a66241636f7cc626665a8f5a65e8b4932">_engineId</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#aab6f22c91e21e36c6423b18803722b9d">_cull_thread_mapf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>TileFactory is the main workhorse - it generates osg Nodes for TileKeys. </p>

<p>Definition at line <a class="el" href="OSGTileFactory_source.html#l00048">48</a> of file <a class="el" href="OSGTileFactory_source.html">OSGTileFactory</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a228820ddad8e0cd0a974a11c8ab44739"></a><!-- doxytag: member="OSGTileFactory::OSGTileFactory" ref="a228820ddad8e0cd0a974a11c8ab44739" args="(unsigned engineId, const MapFrame &amp;cull_thread_mapf, const OSGTerrainOptions &amp;props=OSGTerrainOptions())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OSGTileFactory::OSGTileFactory </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>engineId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>cull_thread_mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>props</em> = <code><a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a>()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00080">80</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">                                                                :
osg::Referenced( <span class="keyword">true</span> ),
<a class="code" href="classOSGTileFactory.html#a66241636f7cc626665a8f5a65e8b4932">_engineId</a>( engineId ),
<a class="code" href="classOSGTileFactory.html#aab6f22c91e21e36c6423b18803722b9d">_cull_thread_mapf</a>( cull_thread_mapf ),
<a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>( props )
{
    <a class="code" href="classosgEarth_1_1LoadingPolicy.html#af8b30c2d7db072ac46723c7042d61939">LoadingPolicy::Mode</a> mode = <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36">loadingPolicy</a>()-&gt;mode().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>();
}
</pre></div>
<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a228820ddad8e0cd0a974a11c8ab44739_cgraph.png" border="0" usemap="#classOSGTileFactory_a228820ddad8e0cd0a974a11c8ab44739_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a228820ddad8e0cd0a974a11c8ab44739_cgraph" id="classOSGTileFactory_a228820ddad8e0cd0a974a11c8ab44739_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="273,5,524,35"/><area shape="rect" id="node5" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="316,59,481,88"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a453528b2130cd668c295fe5633c107d5"></a><!-- doxytag: member="OSGTileFactory::addPlaceholderHeightfieldLayer" ref="a453528b2130cd668c295fe5633c107d5" args="(StreamingTile *tile, StreamingTile *ancestorTile, GeoLocator *defaultLocator, const TileKey &amp;key, const TileKey &amp;ancestorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSGTileFactory::addPlaceholderHeightfieldLayer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classStreamingTile.html">StreamingTile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStreamingTile.html">StreamingTile</a> *&#160;</td>
          <td class="paramname"><em>ancestorTile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *&#160;</td>
          <td class="paramname"><em>defaultLocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>ancestorKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00278">278</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osgTerrain::HeightFieldLayer* newHFLayer = 0L;

    <span class="keywordflow">if</span> ( ancestorTile &amp;&amp; ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f">valid</a>() )
    {
        osg::ref_ptr&lt;osgTerrain::HeightFieldLayer&gt; ancestorLayer;
        {
            <a class="code" href="structosgEarth_1_1Threading_1_1ScopedReadLock.html">Threading::ScopedReadLock</a> sharedLock( ancestorTile-&gt;<a class="code" href="classTile.html#ad507594a8309451b6d28660347e98989">getTileLayersMutex</a>() );
            ancestorLayer = <span class="keyword">dynamic_cast&lt;</span>osgTerrain::HeightFieldLayer*<span class="keyword">&gt;</span>(ancestorTile-&gt;<a class="code" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed">getElevationLayer</a>());
        }

        <span class="keywordflow">if</span> ( ancestorLayer.valid() )
        {
            osg::ref_ptr&lt;osg::HeightField&gt; ancestorHF = ancestorLayer-&gt;getHeightField();
            <span class="keywordflow">if</span> ( ancestorHF.valid() )
            {
                osg::HeightField* newHF = HeightFieldUtils::createSubSample(
                    ancestorHF.get(),
                    ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>(),
                    key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>());

                newHFLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer( newHF );
                newHFLayer-&gt;setLocator( defaultLocator );

                <span class="comment">// lock to set the elevation layerdata:</span>
                {
                    <a class="code" href="structosgEarth_1_1Threading_1_1ScopedWriteLock.html">Threading::ScopedWriteLock</a> exclusiveLock( tile-&gt;<a class="code" href="classTile.html#ad507594a8309451b6d28660347e98989">getTileLayersMutex</a>() );
                    tile-&gt;<a class="code" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d">setElevationLayer</a>( newHFLayer );                
                    tile-&gt;<a class="code" href="classStreamingTile.html#af7d91ee5b56c61c775e51552592941ca">setElevationLOD</a>( ancestorTile-&gt;<a class="code" href="classStreamingTile.html#af0bafc20cceb5352a94549f8524072cb">getElevationLOD</a>() );
                }
            }
        }
    }

    <span class="comment">// lock the tile to write the elevation data.</span>
    {
        <a class="code" href="structosgEarth_1_1Threading_1_1ScopedWriteLock.html">Threading::ScopedWriteLock</a> exclusiveLock( tile-&gt;<a class="code" href="classTile.html#ad507594a8309451b6d28660347e98989">getTileLayersMutex</a>() );

        <span class="keywordflow">if</span> ( !newHFLayer )
        {
            newHFLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer();
            newHFLayer-&gt;setHeightField( <a class="code" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a>( key, 8, 8 ) );
            newHFLayer-&gt;setLocator( defaultLocator );
            tile-&gt;<a class="code" href="classStreamingTile.html#af7d91ee5b56c61c775e51552592941ca">setElevationLOD</a>( -1 );
        }

        <span class="keywordflow">if</span> ( newHFLayer )
        {
            tile-&gt;<a class="code" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d">setElevationLayer</a>( newHFLayer );
        }
    }
}
</pre></div>
<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_cgraph.png" border="0" usemap="#classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_cgraph" id="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_cgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="360,830,624,859"/><area shape="rect" id="node93" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="776,776,965,806"/><area shape="rect" id="node99" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed" title="Tile::getElevationLayer" alt="" coords="415,883,569,912"/><area shape="rect" id="node101" href="classStreamingTile.html#af0bafc20cceb5352a94549f8524072cb" title="StreamingTile::getElevationLOD" alt="" coords="388,936,596,966"/><area shape="rect" id="node104" href="classTile.html#ad507594a8309451b6d28660347e98989" title="Tile::getTileLayersMutex" alt="" coords="409,990,575,1019"/><area shape="rect" id="node106" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d" title="Tile::setElevationLayer" alt="" coords="415,1043,569,1072"/><area shape="rect" id="node108" href="classStreamingTile.html#af7d91ee5b56c61c775e51552592941ca" title="StreamingTile::setElevationLOD" alt="" coords="388,1096,596,1126"/><area shape="rect" id="node112" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="412,1150,572,1179"/><area shape="rect" id="node5" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="673,883,1068,912"/><area shape="rect" id="node95" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="776,936,965,966"/><area shape="rect" id="node97" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="763,830,979,859"/><area shape="rect" id="node7" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="1119,587,1420,616"/><area shape="rect" id="node36" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="3092,646,3359,675"/><area shape="rect" id="node72" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1171,750,1368,779"/><area shape="rect" id="node74" href="classosgEarth_1_1GeoExtent.html#a9ed09180cbcdd15321ced7b24f4c4c9d" title="osgEarth::GeoExtent::height" alt="" coords="1176,803,1363,832"/><area shape="rect" id="node77" href="classosgEarth_1_1GeoExtent.html#a279160f409098609ad030cf7b3e7bf9d" title="osgEarth::GeoExtent::transform" alt="" coords="1167,856,1372,886"/><area shape="rect" id="node81" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="1179,910,1360,939"/><area shape="rect" id="node85" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1177,963,1361,992"/><area shape="rect" id="node87" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1180,1016,1359,1046"/><area shape="rect" id="node89" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1177,1070,1361,1099"/><area shape="rect" id="node91" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1180,1123,1359,1152"/><area shape="rect" id="node9" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="3412,379,3617,408"/><area shape="rect" id="node15" href="classosgEarth_1_1SpatialReference.html#ae27903c7c477c9f22b68ee71415888bf" title="osgEarth::SpatialReference::SpatialReference" alt="" coords="1469,587,1760,616"/><area shape="rect" id="node11" href="classosgEarth_1_1SpatialReference.html#ae8cda9f2cf24a92d09c58462c5fbd5e8" title="osgEarth::SpatialReference::_init" alt="" coords="3668,379,3881,408"/><area shape="rect" id="node13" href="namespaceanonymous__namespace_02SpatialReference_8cpp_03.html#a2d59d21c23228cfce0a56b2174727ee9" title="anonymous_namespace\{SpatialReference::cpp\}::getOGRAttrValue" alt="" coords="3931,379,4341,408"/><area shape="rect" id="node17" href="classosgEarth_1_1SpatialReference.html#a28d916a87ed2653a5763bf8777cd9cbf" title="osgEarth::SpatialReference::transform" alt="" coords="1808,587,2053,616"/><area shape="rect" id="node20" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="2433,587,2708,616"/><area shape="rect" id="node54" href="classosgEarth_1_1SpatialReference.html#a3c3d798015a48c93c5063182ac177688" title="osgEarth::SpatialReference::transformPoints" alt="" coords="2101,326,2384,355"/><area shape="rect" id="node22" href="classosgEarth_1_1SpatialReference.html#afe559cd555e232b45109fbce72742b02" title="osgEarth::SpatialReference::_isEquivalentTo" alt="" coords="2757,483,3040,512"/><area shape="rect" id="node24" href="classosgEarth_1_1SpatialReference.html#ad7d6ef0605664b77e8348df5324ea32f" title="osgEarth::SpatialReference::getEllipsoid" alt="" coords="3097,432,3353,462"/><area shape="rect" id="node27" href="classosgEarth_1_1SpatialReference.html#a62d6dc2c358aaeeba591954de0475333" title="osgEarth::SpatialReference::getWKT" alt="" coords="3107,219,3344,248"/><area shape="rect" id="node30" href="classosgEarth_1_1SpatialReference.html#a7e2212a07fe863d5680b73f1e76cdee2" title="osgEarth::SpatialReference::isContiguous" alt="" coords="3092,486,3359,515"/><area shape="rect" id="node33" href="classosgEarth_1_1SpatialReference.html#a56b924155ab1745c5c9592269c6c147b" title="osgEarth::SpatialReference::isCube" alt="" coords="3111,539,3340,568"/><area shape="rect" id="node39" href="classosgEarth_1_1SpatialReference.html#a8531e5c5cfc660c195ec9a569ba28cab" title="osgEarth::SpatialReference::isLTP" alt="" coords="3113,379,3337,408"/><area shape="rect" id="node41" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="3100,166,3351,195"/><area shape="rect" id="node44" href="classosgEarth_1_1SpatialReference.html#a3ac570432fd7345ac3f1fa3c400a5553" title="osgEarth::SpatialReference::isNorthPolar" alt="" coords="3095,592,3356,622"/><area shape="rect" id="node47" href="classosgEarth_1_1SpatialReference.html#ae913b39821f50acf4662194ef5bcd3c3" title="osgEarth::SpatialReference::isSouthPolar" alt="" coords="3093,272,3357,302"/><area shape="rect" id="node50" href="classosgEarth_1_1SpatialReference.html#a1cb6bf576e355f9e32b226e43311e359" title="osgEarth::SpatialReference::isUserDefined" alt="" coords="3089,326,3361,355"/><area shape="rect" id="node56" href="SpatialReference_8cpp.html#a253ee9380896291f2aec77e4868d994c" title="geographicToMercator" alt="" coords="2496,219,2645,248"/><area shape="rect" id="node58" href="classosgEarth_1_1SpatialReference.html#a2e11d757cd795a81173912054fbb83c9" title="osgEarth::SpatialReference::getName" alt="" coords="2777,115,3020,144"/><area shape="rect" id="node66" href="SpatialReference_8cpp.html#a047d2c7e4580672483d0926a8f694e7e" title="mercatorToGeographic" alt="" coords="2493,272,2648,302"/><area shape="rect" id="node68" href="classosgEarth_1_1SpatialReference.html#a1f6be4de7c26f8dd31504f10b21d68be" title="osgEarth::SpatialReference::postTransform" alt="" coords="2433,326,2708,355"/><area shape="rect" id="node70" href="classosgEarth_1_1SpatialReference.html#a9ce72de8ce6def17df6239a136dedb5d" title="osgEarth::SpatialReference::preTransform" alt="" coords="2437,379,2704,408"/><area shape="rect" id="node79" href="classosgEarth_1_1GeoExtent.html#a11d477896ee28030e4641760c737aab7" title="osgEarth::GeoExtent::GeoExtent" alt="" coords="1508,856,1721,886"/><area shape="rect" id="node83" href="classosgEarth_1_1GeoExtent.html#a744d26309f6eddfd74b72a01c159dc79" title="osgEarth::GeoExtent::crossesDateLine" alt="" coords="1489,910,1740,939"/><area shape="rect" id="node110" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="756,1096,985,1126"/></map>
</div>
</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_icgraph.png" border="0" usemap="#classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_icgraph" alt=""/></div>
<map name="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_icgraph" id="classOSGTileFactory_a453528b2130cd668c295fe5633c107d5_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="361,5,609,35"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="659,5,840,35"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="888,5,1099,35"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1147,5,1384,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a92cf1c5ea5230676b2e780e7f41ead15"></a><!-- doxytag: member="OSGTileFactory::addPlaceholderImageLayers" ref="a92cf1c5ea5230676b2e780e7f41ead15" args="(Tile *tile, Tile *ancestorTile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSGTileFactory::addPlaceholderImageLayers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> *&#160;</td>
          <td class="paramname"><em>ancestorTile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00260">260</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !ancestorTile )
    {
        <span class="comment">//OE_NOTICE &lt;&lt; &quot;No ancestorTile for key &quot; &lt;&lt; key.str() &lt;&lt; std::endl;</span>
        <span class="keywordflow">return</span>;
    }        

    <span class="comment">// Now if we have a valid ancestor tile, go through and make a temporary tile consisting only of</span>
    <span class="comment">// layers that exist in the new map layer image list as well.</span>
    <span class="comment">//int layer = 0;</span>
    <a class="code" href="CustomTile.html#a69e705aa9d311b81c5de241954028a6b">ColorLayersByUID</a> colorLayers;
    ancestorTile-&gt;<a class="code" href="classTile.html#af8d69f8867f4fa143bf52ea4dbbd86b6">getCustomColorLayers</a>( colorLayers );
    tile-&gt;<a class="code" href="classTile.html#a922827d09cea89a13cc5e3d766bbc188">setCustomColorLayers</a>( colorLayers );
}
</pre></div>
<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_cgraph.png" border="0" usemap="#classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_cgraph" id="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_cgraph">
<area shape="rect" id="node3" href="classTile.html#af8d69f8867f4fa143bf52ea4dbbd86b6" title="Tile::getCustomColorLayers" alt="" coords="343,5,527,35"/><area shape="rect" id="node5" href="classTile.html#a922827d09cea89a13cc5e3d766bbc188" title="Tile::setCustomColorLayers" alt="" coords="343,59,527,88"/><area shape="rect" id="node7" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef" title="osgEarth::Json::in" alt="" coords="576,59,704,88"/></map>
</div>
</p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_icgraph.png" border="0" usemap="#classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_icgraph" alt=""/></div>
<map name="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_icgraph" id="classOSGTileFactory_a92cf1c5ea5230676b2e780e7f41ead15_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="343,5,591,35"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="640,5,821,35"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="869,5,1080,35"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1128,5,1365,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab377aa30fd1fe2370c68dc1806d6625e"></a><!-- doxytag: member="OSGTileFactory::createClusterCullingCallback" ref="ab377aa30fd1fe2370c68dc1806d6625e" args="(Tile *tile, osg::EllipsoidModel *et)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::ClusterCullingCallback * OSGTileFactory::createClusterCullingCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">osg::EllipsoidModel *&#160;</td>
          <td class="paramname"><em>et</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00891">891</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//This code is a very slightly modified version of the DestinationTile::createClusterCullingCallback in VirtualPlanetBuilder.</span>
    osg::HeightField* grid = ((osgTerrain::HeightFieldLayer*)tile-&gt;<a class="code" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed">getElevationLayer</a>())-&gt;getHeightField();
    <span class="keywordflow">if</span> (!grid) <span class="keywordflow">return</span> 0;

    <span class="keywordtype">float</span> verticalScale = 1.0f;
    <a class="code" href="classTile.html">Tile</a>* customTile = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classTile.html">Tile</a>*<span class="keyword">&gt;</span>(tile);
    <span class="keywordflow">if</span> (customTile)
    {
        verticalScale = customTile-&gt;<a class="code" href="classTile.html#a92cf92977e436cd7e767d912bc341da0">getVerticalScale</a>();
    }

    <span class="keywordtype">double</span> globe_radius = et ? et-&gt;getRadiusPolar() : 1.0;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numColumns = grid-&gt;getNumColumns();
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numRows = grid-&gt;getNumRows();

    <span class="keywordtype">double</span> midLong = grid-&gt;getOrigin().x()+grid-&gt;getXInterval()*((double)(numColumns-1))*0.5;
    <span class="keywordtype">double</span> midLat = grid-&gt;getOrigin().y()+grid-&gt;getYInterval()*((double)(numRows-1))*0.5;
    <span class="keywordtype">double</span> midZ = grid-&gt;getOrigin().z();

    <span class="keywordtype">double</span> midX,midY;
    et-&gt;convertLatLongHeightToXYZ(osg::DegreesToRadians(midLat),osg::DegreesToRadians(midLong),midZ, midX,midY,midZ);

    osg::Vec3 center_position(midX,midY,midZ);

    osg::Vec3 center_normal(midX,midY,midZ);
    center_normal.normalize();

    osg::Vec3 transformed_center_normal = center_normal;

    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r,c;

    <span class="comment">// populate the vertex/normal/texcoord arrays from the grid.</span>
    <span class="keywordtype">double</span> orig_X = grid-&gt;getOrigin().x();
    <span class="keywordtype">double</span> delta_X = grid-&gt;getXInterval();
    <span class="keywordtype">double</span> orig_Y = grid-&gt;getOrigin().y();
    <span class="keywordtype">double</span> delta_Y = grid-&gt;getYInterval();
    <span class="keywordtype">double</span> orig_Z = grid-&gt;getOrigin().z();


    <span class="keywordtype">float</span> min_dot_product = 1.0f;
    <span class="keywordtype">float</span> max_cluster_culling_height = 0.0f;
    <span class="keywordtype">float</span> max_cluster_culling_radius = 0.0f;

    <span class="keywordflow">for</span>(r=0;r&lt;numRows;++r)
    {
        <span class="keywordflow">for</span>(c=0;c&lt;numColumns;++c)
        {
            <span class="keywordtype">double</span> X = orig_X + delta_X*(double)c;
            <span class="keywordtype">double</span> Y = orig_Y + delta_Y*(double)r;
            <span class="keywordtype">double</span> Z = orig_Z + grid-&gt;getHeight(c,r) * verticalScale;
            <span class="keywordtype">double</span> height = Z;

            et-&gt;convertLatLongHeightToXYZ(
                osg::DegreesToRadians(Y), osg::DegreesToRadians(X), Z,
                X, Y, Z);

            osg::Vec3d v(X,Y,Z);
            osg::Vec3 dv = v - center_position;
            <span class="keywordtype">double</span> d = sqrt(dv.x()*dv.x() + dv.y()*dv.y() + dv.z()*dv.z());
            <span class="keywordtype">double</span> theta = acos( globe_radius/ (globe_radius + fabs(height)) );
            <span class="keywordtype">double</span> phi = 2.0 * asin (d*0.5/globe_radius); <span class="comment">// d/globe_radius;</span>
            <span class="keywordtype">double</span> beta = theta+phi;
            <span class="keywordtype">double</span> cutoff = osg::PI_2 - 0.1;

            <span class="comment">//log(osg::INFO,&quot;theta=&quot;&lt;&lt;theta&lt;&lt;&quot;\tphi=&quot;&lt;&lt;phi&lt;&lt;&quot; beta &quot;&lt;&lt;beta);</span>
            <span class="keywordflow">if</span> (phi&lt;cutoff &amp;&amp; beta&lt;cutoff)
            {
                <span class="keywordtype">float</span> local_dot_product = -sin(theta + phi);
                <span class="keywordtype">float</span> local_m = globe_radius*( 1.0/ cos(theta+phi) - 1.0);
                <span class="keywordtype">float</span> local_radius = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(globe_radius * tan(beta)); <span class="comment">// beta*globe_radius;</span>
                min_dot_product = osg::minimum(min_dot_product, local_dot_product);
                max_cluster_culling_height = osg::maximum(max_cluster_culling_height,local_m);      
                max_cluster_culling_radius = osg::maximum(max_cluster_culling_radius,local_radius);
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">//log(osg::INFO,&quot;Turning off cluster culling for wrap around tile.&quot;);</span>
                <span class="keywordflow">return</span> 0;
            }
        }
    }    

    osg::ClusterCullingCallback* ccc = <span class="keyword">new</span> osg::ClusterCullingCallback;

    ccc-&gt;set(center_position + transformed_center_normal*max_cluster_culling_height ,
        transformed_center_normal, 
        min_dot_product,
        max_cluster_culling_radius);

    <span class="keywordflow">return</span> ccc;
}
</pre></div>
<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_cgraph.png" border="0" usemap="#classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_cgraph" alt=""/></div>
<map name="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_cgraph" id="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_cgraph">
<area shape="rect" id="node3" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed" title="Tile::getElevationLayer" alt="" coords="347,5,501,35"/><area shape="rect" id="node5" href="classTile.html#a92cf92977e436cd7e767d912bc341da0" title="Tile::getVerticalScale" alt="" coords="351,59,497,88"/></map>
</div>
</p>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_icgraph.png" border="0" usemap="#classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_icgraph" id="classOSGTileFactory_ab377aa30fd1fe2370c68dc1806d6625e_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="348,5,596,35"/><area shape="rect" id="node11" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="353,59,591,88"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="645,32,827,61"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="875,32,1085,61"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1133,32,1371,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a02bac67948daa077059c367bce3ed6b7"></a><!-- doxytag: member="OSGTileFactory::createEmptyHeightField" ref="a02bac67948daa077059c367bce3ed6b7" args="(const TileKey &amp;key, int numCols=8, int numRows=8)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::HeightField * OSGTileFactory::createEmptyHeightField </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numCols</em> = <code>8</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numRows</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00251">251</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::HeightField* hf = key.<a class="code" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80">getVerticalSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25">createReferenceHeightField</a>(
        key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>(), numCols, numRows );

    <span class="keywordflow">return</span> hf;
}
</pre></div>
<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_cgraph.png" border="0" usemap="#classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_cgraph" id="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="319,883,713,912"/><area shape="rect" id="node91" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="421,936,611,966"/><area shape="rect" id="node93" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="421,990,611,1019"/><area shape="rect" id="node95" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="408,1043,624,1072"/><area shape="rect" id="node5" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="764,587,1065,616"/><area shape="rect" id="node34" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="2737,646,3004,675"/><area shape="rect" id="node70" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="816,750,1013,779"/><area shape="rect" id="node72" href="classosgEarth_1_1GeoExtent.html#a9ed09180cbcdd15321ced7b24f4c4c9d" title="osgEarth::GeoExtent::height" alt="" coords="821,803,1008,832"/><area shape="rect" id="node75" href="classosgEarth_1_1GeoExtent.html#a279160f409098609ad030cf7b3e7bf9d" title="osgEarth::GeoExtent::transform" alt="" coords="812,856,1017,886"/><area shape="rect" id="node79" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="824,910,1005,939"/><area shape="rect" id="node83" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="823,963,1007,992"/><area shape="rect" id="node85" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="825,1016,1004,1046"/><area shape="rect" id="node87" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="823,1070,1007,1099"/><area shape="rect" id="node89" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="825,1123,1004,1152"/><area shape="rect" id="node7" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="3057,379,3263,408"/><area shape="rect" id="node13" href="classosgEarth_1_1SpatialReference.html#ae27903c7c477c9f22b68ee71415888bf" title="osgEarth::SpatialReference::SpatialReference" alt="" coords="1115,587,1405,616"/><area shape="rect" id="node9" href="classosgEarth_1_1SpatialReference.html#ae8cda9f2cf24a92d09c58462c5fbd5e8" title="osgEarth::SpatialReference::_init" alt="" coords="3313,379,3527,408"/><area shape="rect" id="node11" href="namespaceanonymous__namespace_02SpatialReference_8cpp_03.html#a2d59d21c23228cfce0a56b2174727ee9" title="anonymous_namespace\{SpatialReference::cpp\}::getOGRAttrValue" alt="" coords="3576,379,3987,408"/><area shape="rect" id="node15" href="classosgEarth_1_1SpatialReference.html#a28d916a87ed2653a5763bf8777cd9cbf" title="osgEarth::SpatialReference::transform" alt="" coords="1453,587,1699,616"/><area shape="rect" id="node18" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="2079,587,2353,616"/><area shape="rect" id="node52" href="classosgEarth_1_1SpatialReference.html#a3c3d798015a48c93c5063182ac177688" title="osgEarth::SpatialReference::transformPoints" alt="" coords="1747,326,2029,355"/><area shape="rect" id="node20" href="classosgEarth_1_1SpatialReference.html#afe559cd555e232b45109fbce72742b02" title="osgEarth::SpatialReference::_isEquivalentTo" alt="" coords="2403,483,2685,512"/><area shape="rect" id="node22" href="classosgEarth_1_1SpatialReference.html#ad7d6ef0605664b77e8348df5324ea32f" title="osgEarth::SpatialReference::getEllipsoid" alt="" coords="2743,432,2999,462"/><area shape="rect" id="node25" href="classosgEarth_1_1SpatialReference.html#a62d6dc2c358aaeeba591954de0475333" title="osgEarth::SpatialReference::getWKT" alt="" coords="2752,219,2989,248"/><area shape="rect" id="node28" href="classosgEarth_1_1SpatialReference.html#a7e2212a07fe863d5680b73f1e76cdee2" title="osgEarth::SpatialReference::isContiguous" alt="" coords="2737,486,3004,515"/><area shape="rect" id="node31" href="classosgEarth_1_1SpatialReference.html#a56b924155ab1745c5c9592269c6c147b" title="osgEarth::SpatialReference::isCube" alt="" coords="2756,539,2985,568"/><area shape="rect" id="node37" href="classosgEarth_1_1SpatialReference.html#a8531e5c5cfc660c195ec9a569ba28cab" title="osgEarth::SpatialReference::isLTP" alt="" coords="2759,379,2983,408"/><area shape="rect" id="node39" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="2745,166,2996,195"/><area shape="rect" id="node42" href="classosgEarth_1_1SpatialReference.html#a3ac570432fd7345ac3f1fa3c400a5553" title="osgEarth::SpatialReference::isNorthPolar" alt="" coords="2740,592,3001,622"/><area shape="rect" id="node45" href="classosgEarth_1_1SpatialReference.html#ae913b39821f50acf4662194ef5bcd3c3" title="osgEarth::SpatialReference::isSouthPolar" alt="" coords="2739,272,3003,302"/><area shape="rect" id="node48" href="classosgEarth_1_1SpatialReference.html#a1cb6bf576e355f9e32b226e43311e359" title="osgEarth::SpatialReference::isUserDefined" alt="" coords="2735,326,3007,355"/><area shape="rect" id="node54" href="SpatialReference_8cpp.html#a253ee9380896291f2aec77e4868d994c" title="geographicToMercator" alt="" coords="2141,219,2291,248"/><area shape="rect" id="node56" href="classosgEarth_1_1SpatialReference.html#a2e11d757cd795a81173912054fbb83c9" title="osgEarth::SpatialReference::getName" alt="" coords="2423,115,2665,144"/><area shape="rect" id="node64" href="SpatialReference_8cpp.html#a047d2c7e4580672483d0926a8f694e7e" title="mercatorToGeographic" alt="" coords="2139,272,2293,302"/><area shape="rect" id="node66" href="classosgEarth_1_1SpatialReference.html#a1f6be4de7c26f8dd31504f10b21d68be" title="osgEarth::SpatialReference::postTransform" alt="" coords="2079,326,2353,355"/><area shape="rect" id="node68" href="classosgEarth_1_1SpatialReference.html#a9ce72de8ce6def17df6239a136dedb5d" title="osgEarth::SpatialReference::preTransform" alt="" coords="2083,379,2349,408"/><area shape="rect" id="node77" href="classosgEarth_1_1GeoExtent.html#a11d477896ee28030e4641760c737aab7" title="osgEarth::GeoExtent::GeoExtent" alt="" coords="1153,856,1367,886"/><area shape="rect" id="node81" href="classosgEarth_1_1GeoExtent.html#a744d26309f6eddfd74b72a01c159dc79" title="osgEarth::GeoExtent::crossesDateLine" alt="" coords="1135,910,1385,939"/></map>
</div>
</p>

<p><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_icgraph.png" border="0" usemap="#classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_icgraph" alt=""/></div>
<map name="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_icgraph" id="classOSGTileFactory_a02bac67948daa077059c367bce3ed6b7_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5" title="OSGTileFactory::addPlaceholderHeightfieldLayer" alt="" coords="317,5,624,35"/><area shape="rect" id="node13" href="classOSGTileFactory.html#aa6bdf6f6bc0676c1c5ddb8c301037f87" title="OSGTileFactory::createHeightFieldLayer" alt="" coords="341,59,600,88"/><area shape="rect" id="node15" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="352,112,589,141"/><area shape="rect" id="node18" href="classOSGTerrainEngineNode.html#a8bc8f1263d97e161ceb4bec1483188bd" title="OSGTerrainEngineNode::updateElevation" alt="" coords="340,165,601,195"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="697,5,945,35"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="1076,32,1257,61"/><area shape="rect" id="node9" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="1363,32,1573,61"/><area shape="rect" id="node11" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1621,32,1859,61"/><area shape="rect" id="node20" href="classOSGTerrainEngineNode.html#ae5676f113c01d34acadeb6a8cd1fab57" title="OSGTerrainEngineNode::addElevationLayer" alt="" coords="683,112,960,141"/><area shape="rect" id="node24" href="classOSGTerrainEngineNode.html#a60f8884a99a7d143a9fd9355b134627e" title="OSGTerrainEngineNode::moveElevationLayer" alt="" coords="677,165,965,195"/><area shape="rect" id="node27" href="classOSGTerrainEngineNode.html#a25b7c82cc000a0592b29ef27e67449fb" title="OSGTerrainEngineNode::removeElevationLayer" alt="" coords="672,219,971,248"/><area shape="rect" id="node22" href="classOSGTerrainEngineNode.html#a7f38c5716c207f45a7ae84fb5a2cacdf" title="OSGTerrainEngineNode::onMapModelChanged" alt="" coords="1019,165,1315,195"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa6bdf6f6bc0676c1c5ddb8c301037f87"></a><!-- doxytag: member="OSGTileFactory::createHeightFieldLayer" ref="aa6bdf6f6bc0676c1c5ddb8c301037f87" args="(const MapFrame &amp;mapf, const TileKey &amp;key, bool exactOnly)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osgTerrain::HeightFieldLayer * OSGTileFactory::createHeightFieldLayer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>exactOnly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00861">861</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mapInfo = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6">getMapInfo</a>();
    <span class="keywordtype">bool</span> isPlateCarre = !mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() &amp;&amp; mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#aab5099541f4ed87f94e9bed05925cb5e">isGeographicSRS</a>();

    <span class="comment">// try to create a heightfield at native res:</span>
    osg::ref_ptr&lt;osg::HeightField&gt; hf;
    <span class="keywordflow">if</span> ( !mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f">getHeightField</a>( key, !exactOnly, hf, 0L, <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8">elevationInterpolation</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() ) )
    {
        <span class="keywordflow">if</span> ( exactOnly )
            <span class="keywordflow">return</span> <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <span class="keywordflow">else</span>
            hf = <a class="code" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a>( key );
    }

    <span class="comment">// In a Plate Carre tesselation, scale the heightfield elevations from meters to degrees</span>
    <span class="keywordflow">if</span> ( isPlateCarre )
    {
        HeightFieldUtils::scaleHeightFieldToDegrees( hf.get() );
    }

    osgTerrain::HeightFieldLayer* hfLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer( hf.get() );

    <a class="code" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a>* locator = GeoLocator::createForKey( key, mapInfo );
    hfLayer-&gt;setLocator( locator );

    <span class="keywordflow">return</span> hfLayer;
}
</pre></div>
<p><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_aa6bdf6f6bc0676c1c5ddb8c301037f87_cgraph.png" border="0" usemap="#classOSGTileFactory_aa6bdf6f6bc0676c1c5ddb8c301037f87_cgraph" alt=""/></div>
<map name="classOSGTileFactory_aa6bdf6f6bc0676c1c5ddb8c301037f87_cgraph" id="classOSGTileFactory_aa6bdf6f6bc0676c1c5ddb8c301037f87_cgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="692,344,956,374"/><area shape="rect" id="node42" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8" title="osgEarth::TerrainOptions::elevationInterpolation" alt="" coords="312,1367,611,1396"/><area shape="rect" id="node44" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f" title="osgEarth::MapFrame::getHeightField" alt="" coords="344,1420,579,1450"/><area shape="rect" id="node92" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1897,1783,2063,1812"/><area shape="rect" id="node130" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="353,1854,569,1883"/><area shape="rect" id="node132" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="356,1907,567,1936"/><area shape="rect" id="node134" href="classosgEarth_1_1MapInfo.html#aab5099541f4ed87f94e9bed05925cb5e" title="osgEarth::MapInfo::isGeographicSRS" alt="" coords="341,1960,581,1990"/><area shape="rect" id="node5" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="1039,344,1433,374"/><area shape="rect" id="node36" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1885,867,2075,896"/><area shape="rect" id="node38" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1885,814,2075,843"/><area shape="rect" id="node40" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="1872,398,2088,427"/><area shape="rect" id="node7" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="1484,344,1785,374"/><area shape="rect" id="node13" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1536,712,1733,742"/><area shape="rect" id="node15" href="classosgEarth_1_1GeoExtent.html#a9ed09180cbcdd15321ced7b24f4c4c9d" title="osgEarth::GeoExtent::height" alt="" coords="1541,608,1728,638"/><area shape="rect" id="node17" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="1501,291,1768,320"/><area shape="rect" id="node20" href="classosgEarth_1_1GeoExtent.html#a279160f409098609ad030cf7b3e7bf9d" title="osgEarth::GeoExtent::transform" alt="" coords="1532,131,1737,160"/><area shape="rect" id="node24" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="1544,448,1725,478"/><area shape="rect" id="node28" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1543,184,1727,214"/><area shape="rect" id="node30" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1545,555,1724,584"/><area shape="rect" id="node32" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1543,238,1727,267"/><area shape="rect" id="node34" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1545,502,1724,531"/><area shape="rect" id="node9" href="classosgEarth_1_1SpatialReference.html#ad4674227fe46613b3f5821109a509714" title="osgEarth::SpatialReference::init" alt="" coords="1877,291,2083,320"/><area shape="rect" id="node11" href="classosgEarth_1_1SpatialReference.html#ae27903c7c477c9f22b68ee71415888bf" title="osgEarth::SpatialReference::SpatialReference" alt="" coords="1835,344,2125,374"/><area shape="rect" id="node22" href="classosgEarth_1_1GeoExtent.html#a11d477896ee28030e4641760c737aab7" title="osgEarth::GeoExtent::GeoExtent" alt="" coords="1873,131,2087,160"/><area shape="rect" id="node26" href="classosgEarth_1_1GeoExtent.html#a744d26309f6eddfd74b72a01c159dc79" title="osgEarth::GeoExtent::crossesDateLine" alt="" coords="1855,451,2105,480"/><area shape="rect" id="node46" href="classosgEarth_1_1MapInfo.html#a69c05dfae1159b34a013658958412655" title="osgEarth::MapInfo::getProfile" alt="" coords="728,1038,920,1067"/><area shape="rect" id="node48" href="namespaceanonymous__namespace_02Map_8cpp_03.html#ad7b47bdac1bfab5aef1bddd9e7545edd" title="anonymous_namespace\{Map::cpp\}::s_getHeightField" alt="" coords="659,1091,989,1120"/><area shape="rect" id="node50" href="classosgEarth_1_1ElevationLayer.html#a4f96d09e39960b527c417b0e672b3393" title="osgEarth::ElevationLayer::createHeightField" alt="" coords="1097,1156,1375,1186"/><area shape="rect" id="node59" href="classosgEarth_1_1TerrainLayer.html#a8c3b22dfd214263aefe467b36b9d0828" title="osgEarth::TerrainLayer::getProfile" alt="" coords="1872,1440,2088,1470"/><area shape="rect" id="node67" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="1528,1595,1741,1624"/><area shape="rect" id="node87" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="1865,1562,2095,1591"/><area shape="rect" id="node90" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="1900,1691,2060,1720"/><area shape="rect" id="node97" href="classosgEarth_1_1GeoHeightField.html#afe0f5de783999fec164c48852f8a708b" title="osgEarth::GeoHeightField::takeHeightField" alt="" coords="1500,1648,1769,1678"/><area shape="rect" id="node101" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="1121,816,1351,846"/><area shape="rect" id="node103" href="classosgEarth_1_1GeoHeightField.html#acb3bb34c9a60038685de8723084422a1" title="osgEarth::GeoHeightField::createSubSample" alt="" coords="1095,555,1377,584"/><area shape="rect" id="node110" href="classosgEarth_1_1GeoHeightField.html#a69cd23edf51596764b79e6985e609874" title="osgEarth::GeoHeightField::getElevation" alt="" coords="1111,502,1361,531"/><area shape="rect" id="node119" href="classosgEarth_1_1TerrainLayer.html#a02f9aaac89492153b97433acddaaf915" title="osgEarth::TerrainLayer::getEnabled" alt="" coords="1123,920,1349,950"/><area shape="rect" id="node126" href="structosgEarth_1_1ReplaceInvalidDataOperator.html#ae03a895aa3dffc8e76ad752f2fedc2d7" title="osgEarth::ReplaceInvalidDataOperator::setValidDataOperator" alt="" coords="1047,974,1425,1003"/><area shape="rect" id="node52" href="classosgEarth_1_1TerrainLayerOptions.html#a3e25ced92475376f2b5117af076dbb0e" title="osgEarth::TerrainLayerOptions::cacheEnabled" alt="" coords="1491,1182,1779,1211"/><area shape="rect" id="node54" href="classosgEarth_1_1ElevationLayer.html#addfadc579d13e356c6a9ec6585a629f7" title="osgEarth::ElevationLayer::createGeoHeightField" alt="" coords="1484,1286,1785,1315"/><area shape="rect" id="node57" href="classosgEarth_1_1TerrainLayer.html#a55830499ac602f6f8dac06de5f81da2c" title="osgEarth::TerrainLayer::getName" alt="" coords="1873,1232,2087,1262"/><area shape="rect" id="node61" href="classosgEarth_1_1TerrainLayer.html#a94efa05e40e34514a0255250850aa889" title="osgEarth::TerrainLayer::getTileSource" alt="" coords="2173,1388,2416,1418"/><area shape="rect" id="node65" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1905,1286,2055,1315"/><area shape="rect" id="node70" href="classosgEarth_1_1Profile.html#adbc4bb3e15675c7b570820195b741abe" title="osgEarth::Profile::getIntersectingTiles" alt="" coords="1515,1078,1755,1107"/><area shape="rect" id="node74" href="classosgEarth_1_1Profile.html#a974f5e0d0adcea82a5871eb39282d53f" title="osgEarth::Profile::isEquivalentTo" alt="" coords="1873,1103,2087,1132"/><area shape="rect" id="node82" href="classosgEarth_1_1TerrainLayer.html#a5adea8725e5958108243ab7c0e69edcd" title="osgEarth::TerrainLayer::isCacheOnly" alt="" coords="1516,918,1753,947"/><area shape="rect" id="node85" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="1523,1542,1747,1571"/><area shape="rect" id="node94" href="classosgEarth_1_1TileSource.html#a083e837ba25042d44b31b0567e26ac32" title="osgEarth::TileSource::isOK" alt="" coords="1544,971,1725,1000"/><area shape="rect" id="node99" href="classosgEarth_1_1GeoHeightField.html#a1ec82037a9f16b971ef46291cb7c172a" title="osgEarth::GeoHeightField::valid" alt="" coords="1532,1024,1737,1054"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a53a1bd8339ce73c5a45b6fa3464b2777"></a><!-- doxytag: member="OSGTileFactory::createImageLayer" ref="a53a1bd8339ce73c5a45b6fa3464b2777" args="(const MapInfo &amp;mapInfo, ImageLayer *layer, const TileKey &amp;key, ProgressCallback *progress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCustomColorLayerRef.html">CustomColorLayerRef</a> * OSGTileFactory::createImageLayer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>mapInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a> *&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1ProgressCallback.html">ProgressCallback</a> *&#160;</td>
          <td class="paramname"><em>progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00820">820</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( !layer )
        <span class="keywordflow">return</span> 0L;

    <a class="code" href="classosgEarth_1_1GeoImage.html">GeoImage</a> geoImage;

    <span class="comment">//If the key is valid, try to get the image from the MapLayer</span>
    <span class="keywordtype">bool</span> keyValid = layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>( key );
    <span class="keywordflow">if</span> ( keyValid )
    {
        geoImage = layer-&gt;<a class="code" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3">createImage</a>(key, progress);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">//If the key is not valid, simply make a transparent tile</span>
        geoImage = <a class="code" href="classosgEarth_1_1GeoImage.html">GeoImage</a>(ImageUtils::createEmptyImage(), key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>());
    }

    <span class="keywordflow">if</span> (geoImage.<a class="code" href="classosgEarth_1_1GeoImage.html#a40db87ae60b4dde189b1f218ff3c8777">valid</a>())
    {
        osg::ref_ptr&lt;GeoLocator&gt; imgLocator = GeoLocator::createForKey( key, mapInfo );

        <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() )
            imgLocator-&gt;setCoordinateSystemType( osgTerrain::Locator::GEOCENTRIC );

        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classCustomColorLayerRef.html">CustomColorLayerRef</a>( <a class="code" href="classCustomColorLayer.html">CustomColorLayer</a>(
            layer,
            geoImage.<a class="code" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978">getImage</a>(),
            imgLocator.get(),
            key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>(),
            key) );
    }

    <span class="keywordflow">return</span> <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
<p><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a53a1bd8339ce73c5a45b6fa3464b2777_cgraph.png" border="0" usemap="#classOSGTileFactory_a53a1bd8339ce73c5a45b6fa3464b2777_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a53a1bd8339ce73c5a45b6fa3464b2777_cgraph" id="classOSGTileFactory_a53a1bd8339ce73c5a45b6fa3464b2777_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3" title="osgEarth::ImageLayer::createImage" alt="" coords="284,1238,513,1267"/><area shape="rect" id="node45" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="997,1656,1187,1686"/><area shape="rect" id="node47" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="977,2480,1207,2510"/><area shape="rect" id="node69" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="1323,1186,1525,1215"/><area shape="rect" id="node135" href="classosgEarth_1_1GeoImage.html#a40db87ae60b4dde189b1f218ff3c8777" title="osgEarth::GeoImage::valid" alt="" coords="643,2428,819,2458"/><area shape="rect" id="node146" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="293,2583,504,2612"/><area shape="rect" id="node148" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="287,2322,511,2351"/><area shape="rect" id="node5" href="classosgEarth_1_1GeoImage.html#a2cc9b9afcc3a69614af80ad50b1dc60a" title="osgEarth::GeoImage::addTransparentBorder" alt="" coords="953,519,1231,548"/><area shape="rect" id="node7" href="classosgEarth_1_1GeoImage.html#a8df3956101aaba42fc535382431b9ba0" title="osgEarth::GeoImage::getSRS" alt="" coords="1327,491,1521,520"/><area shape="rect" id="node9" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1612,491,1809,520"/><area shape="rect" id="node11" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1332,544,1516,574"/><area shape="rect" id="node13" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1335,622,1513,651"/><area shape="rect" id="node15" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1332,723,1516,752"/><area shape="rect" id="node17" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1335,827,1513,856"/><area shape="rect" id="node19" href="classosgEarth_1_1TerrainLayerOptions.html#a3e25ced92475376f2b5117af076dbb0e" title="osgEarth::TerrainLayerOptions::cacheEnabled" alt="" coords="948,1714,1236,1743"/><area shape="rect" id="node21" href="classosgEarth_1_1Profile.html#a5e2d2421cf61e304509978166c4cb46f" title="osgEarth::Profile::clampAndTransformExtent" alt="" coords="951,775,1233,804"/><area shape="rect" id="node24" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="1337,438,1511,467"/><area shape="rect" id="node27" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="1287,1132,1561,1162"/><area shape="rect" id="node29" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="1291,930,1557,959"/><area shape="rect" id="node31" href="classosgEarth_1_1GeoExtent.html#a8151cbc0905e59c9d88e6fad5690a0ce" title="osgEarth::GeoExtent::isValid" alt="" coords="1329,1440,1519,1470"/><area shape="rect" id="node37" href="classosgEarth_1_1ImageUtils.html#a7933afbe98be55cbf1a80dc3c739cdbd" title="osgEarth::ImageUtils::cloneImage" alt="" coords="983,1778,1201,1807"/><area shape="rect" id="node39" href="classosgEarth_1_1ImageUtils.html#aa823b7a7857bb0e568068aa1ba734c9e" title="osgEarth::ImageUtils::convertToRGBA8" alt="" coords="603,2007,859,2036"/><area shape="rect" id="node41" href="classosgEarth_1_1ImageLayer.html#a013d374663ac586c3ec4552964601978" title="osgEarth::ImageLayer::createImageWrapper" alt="" coords="592,1903,869,1932"/><area shape="rect" id="node49" href="classosgEarth_1_1TerrainLayer.html#a55830499ac602f6f8dac06de5f81da2c" title="osgEarth::TerrainLayer::getName" alt="" coords="985,1854,1199,1883"/><area shape="rect" id="node51" href="classosgEarth_1_1TerrainLayer.html#a94efa05e40e34514a0255250850aa889" title="osgEarth::TerrainLayer::getTileSource" alt="" coords="971,2163,1213,2192"/><area shape="rect" id="node53" href="classosgEarth_1_1TerrainLayer.html#a5adea8725e5958108243ab7c0e69edcd" title="osgEarth::TerrainLayer::isCacheOnly" alt="" coords="973,1952,1211,1982"/><area shape="rect" id="node55" href="classosgEarth_1_1ProgressCallback.html#abe0f8bf93f93716f3aad268c0fe4c1e7" title="osgEarth::ProgressCallback::isCanceled" alt="" coords="963,2056,1221,2086"/><area shape="rect" id="node57" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1017,1598,1167,1627"/><area shape="rect" id="node59" href="classosgEarth_1_1GeoImage.html#a6181f8f1702223be590e660e05c0270c" title="osgEarth::GeoImage::crop" alt="" coords="644,879,817,908"/><area shape="rect" id="node61" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="1321,1032,1527,1062"/><area shape="rect" id="node66" href="classosgEarth_1_1GeoImage.html#aa3acdb5f74e29f48ed39d1e20b6f7e82" title="osgEarth::GeoImage::reproject" alt="" coords="992,930,1192,959"/><area shape="rect" id="node73" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="1299,1387,1549,1416"/><area shape="rect" id="node83" href="classosgEarth_1_1TerrainLayerOptions.html#a8ad33fc2a0fd539f609d06c2b15153df" title="osgEarth::TerrainLayerOptions::edgeBufferRatio" alt="" coords="580,2060,881,2090"/><area shape="rect" id="node85" href="classosgEarth_1_1TerrainLayerOptions.html#af7d8f5abac0df078b4888c420576798b" title="osgEarth::TerrainLayerOptions::exactCropping" alt="" coords="585,202,876,231"/><area shape="rect" id="node87" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="655,255,807,284"/><area shape="rect" id="node89" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="624,308,837,338"/><area shape="rect" id="node93" href="classosgEarth_1_1Registry.html#a4e53546f5785f22a28876e820d8e3850" title="osgEarth::Registry::getGlobalMercatorProfile" alt="" coords="589,362,872,391"/><area shape="rect" id="node96" href="classosgEarth_1_1Profile.html#adbc4bb3e15675c7b570820195b741abe" title="osgEarth::Profile::getIntersectingTiles" alt="" coords="611,1546,851,1575"/><area shape="rect" id="node99" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="997,1543,1187,1572"/><area shape="rect" id="node101" href="classosgEarth_1_1Profile.html#a974f5e0d0adcea82a5871eb39282d53f" title="osgEarth::Profile::isEquivalentTo" alt="" coords="985,1490,1199,1519"/><area shape="rect" id="node107" href="classosgEarth_1_1TerrainLayer.html#a8c3b22dfd214263aefe467b36b9d0828" title="osgEarth::TerrainLayer::getProfile" alt="" coords="623,2322,839,2351"/><area shape="rect" id="node114" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09" title="osgEarth::Registry::instance" alt="" coords="637,415,824,444"/><area shape="rect" id="node122" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="648,2268,813,2298"/><area shape="rect" id="node125" href="classosgEarth_1_1ProgressCallback.html#a2001088a9732b7ac54780eb63f026528" title="osgEarth::ProgressCallback::needsRetry" alt="" coords="601,468,860,498"/><area shape="rect" id="node127" href="classosgEarth_1_1ImageUtils.html#acff13758e0dd09db246488410de3c5ab" title="osgEarth::ImageUtils::normalizeImage" alt="" coords="608,522,853,551"/><area shape="rect" id="node130" href="classosgEarth_1_1TerrainLayerOptions.html#a18c8e5fb2aa65339b69dcab92b2ebedf" title="osgEarth::TerrainLayerOptions::reprojectedTileSize" alt="" coords="572,1186,889,1215"/><area shape="rect" id="node132" href="classosgEarth_1_1GeoExtent.html#ac21a265a50ad29eae8323edfa569b520" title="osgEarth::GeoExtent::scale" alt="" coords="640,1492,821,1522"/><area shape="rect" id="node137" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="648,2215,813,2244"/><area shape="rect" id="node151" href="classosgEarth_1_1Profile.html#aec17c2da87ec76abf3d8b763e54ce8c5" title="osgEarth::Profile::getLevelOfDetailForHorizResolution" alt="" coords="563,2375,899,2404"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c04978feb38fc8e81d09b1743754bc3"></a><!-- doxytag: member="OSGTileFactory::createPlaceholderHeightfieldLayer" ref="a9c04978feb38fc8e81d09b1743754bc3" args="(osg::HeightField *ancestorHF, const TileKey &amp;ancestorKey, const TileKey &amp;key, GeoLocator *locator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osgTerrain::HeightFieldLayer * OSGTileFactory::createPlaceholderHeightfieldLayer </td>
          <td>(</td>
          <td class="paramtype">osg::HeightField *&#160;</td>
          <td class="paramname"><em>ancestorHF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>ancestorKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1GeoLocator.html">GeoLocator</a> *&#160;</td>
          <td class="paramname"><em>locator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00338">338</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osgTerrain::HeightFieldLayer* hfLayer = <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    osg::HeightField* newHF = HeightFieldUtils::createSubSample(
        ancestorHF,
        ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>(),
        key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>() );

    newHF-&gt;setSkirtHeight( ancestorHF-&gt;getSkirtHeight() / 2.0 );

    hfLayer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer( newHF );
    hfLayer-&gt;setLocator( keyLocator );

    <span class="keywordflow">return</span> hfLayer;
}
</pre></div>
<p><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a9c04978feb38fc8e81d09b1743754bc3_cgraph.png" border="0" usemap="#classOSGTileFactory_a9c04978feb38fc8e81d09b1743754bc3_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a9c04978feb38fc8e81d09b1743754bc3_cgraph" id="classOSGTileFactory_a9c04978feb38fc8e81d09b1743754bc3_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="377,5,567,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab4f819fd114efc8c8b883176cfca55ea"></a><!-- doxytag: member="OSGTileFactory::createPlaceholderTile" ref="ab4f819fd114efc8c8b883176cfca55ea" args="(const MapFrame &amp;mapf, StreamingTerrain *terrain, const TileKey &amp;key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Node * OSGTileFactory::createPlaceholderTile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classStreamingTerrain.html">StreamingTerrain</a> *&#160;</td>
          <td class="paramname"><em>terrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00386">386</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// Start out by finding the nearest registered ancestor tile, since the placeholder is</span>
    <span class="comment">// going to be based on inherited data. Note- the ancestor may not be the immediate</span>
    <span class="comment">// parent, b/c the parent may or may not be in the scene graph.</span>
    <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a> ancestorKey = key.<a class="code" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36">createParentKey</a>();
    osg::ref_ptr&lt;StreamingTile&gt; ancestorTile;
    <span class="keywordflow">while</span>( !ancestorTile.valid() &amp;&amp; ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f">valid</a>() )
    {
        terrain-&gt;<a class="code" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419">getTile</a>( ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69">getTileId</a>(), ancestorTile );
        <span class="keywordflow">if</span> ( !ancestorTile.valid() )
            ancestorKey = ancestorKey.<a class="code" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36">createParentKey</a>();
    }
    <span class="keywordflow">if</span> ( !ancestorTile.valid() )
    {
        <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt; <a class="code" href="OSGTileFactory_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;cannot find ancestor tile for (&quot;</span> &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt;std::endl;
        <span class="keywordflow">return</span> 0L;
    }

    <a class="code" href="HTTPClient_8cpp.html#ac6600c2662696d8b43a4deb6877c8591">OE_DEBUG</a> &lt;&lt; <a class="code" href="OSGTileFactory_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Creating placeholder for &quot;</span> &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt; std::endl;

    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mapInfo = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6">getMapInfo</a>();

    <span class="keywordtype">bool</span> hasElevation = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().size() &gt; 0;

    <span class="comment">// Build a &quot;placeholder&quot; tile.</span>
    <span class="keywordtype">double</span> xmin, ymin, xmax, ymax;
    key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>().<a class="code" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f">getBounds</a>( xmin, ymin, xmax, ymax );

    <span class="comment">// A locator will place the tile on the globe:</span>
    osg::ref_ptr&lt;GeoLocator&gt; locator = GeoLocator::createForKey( key, mapInfo );

    <span class="comment">// The empty tile:</span>
    <a class="code" href="classStreamingTile.html">StreamingTile</a>* tile = <span class="keyword">new</span> <a class="code" href="classStreamingTile.html">StreamingTile</a>( key, locator.get(), terrain-&gt;<a class="code" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5">getQuickReleaseGLObjects</a>() );
    tile-&gt;<a class="code" href="classTile.html#a25688e6a5dd646153764a936807f86f4">setTerrainTechnique</a>( terrain-&gt;<a class="code" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49">cloneTechnique</a>() );
    tile-&gt;<a class="code" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd">setVerticalScale</a>( <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f">verticalScale</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() );
    tile-&gt;setDataVariance( osg::Object::DYNAMIC );
    <span class="comment">//tile-&gt;setLocator( locator.get() );</span>

    <span class="comment">// Attach an updatecallback to normalize the edges of TerrainTiles.</span>
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> ( hasElevation &amp;&amp; <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39">normalizeEdges</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() )
    {
        tile-&gt;setUpdateCallback(<span class="keyword">new</span> TerrainTileEdgeNormalizerUpdateCallback());
        tile-&gt;setDataVariance(osg::Object::DYNAMIC);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="comment">// Generate placeholder imagery and elevation layers. These &quot;inherit&quot; data from an</span>
    <span class="comment">// ancestor tile.</span>
    {
        <span class="comment">//Threading::ScopedReadLock parentLock( ancestorTile-&gt;getTileLayersMutex() );</span>
        <a class="code" href="classOSGTileFactory.html#a92cf1c5ea5230676b2e780e7f41ead15">addPlaceholderImageLayers</a>     ( tile, ancestorTile.get() );
        <a class="code" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5">addPlaceholderHeightfieldLayer</a>( tile, ancestorTile.get(), locator.get(), key, ancestorKey );
    }

    <span class="comment">// calculate the switching distances:</span>
    osg::BoundingSphere bs = tile-&gt;getBound();
    <span class="keywordtype">double</span> max_range = 1e10;
    <span class="keywordtype">double</span> radius = bs.radius();
    <span class="keywordtype">double</span> min_range = radius * <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea">minTileRangeFactor</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>();

    <span class="comment">// Set the skirt height of the heightfield</span>
    osgTerrain::HeightFieldLayer* hfLayer = <span class="keyword">static_cast&lt;</span>osgTerrain::HeightFieldLayer*<span class="keyword">&gt;</span>(tile-&gt;<a class="code" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed">getElevationLayer</a>());
    <span class="keywordflow">if</span> (!hfLayer)
    {
        <a class="code" href="Notify.html#a13b79c6470fc74594070bd2098afc9de">OE_WARN</a> &lt;&lt; <a class="code" href="OSGTileFactory_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Warning: Couldn&#39;t get hfLayer for &quot;</span> &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt; std::endl;
    }
    hfLayer-&gt;getHeightField()-&gt;setSkirtHeight(radius * <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c">heightFieldSkirtRatio</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() );

    <span class="comment">// In a Plate Carre tesselation, scale the heightfield elevations from meters to degrees</span>
    <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a">isPlateCarre</a>() &amp;&amp; hfLayer-&gt;getHeightField() )
        HeightFieldUtils::scaleHeightFieldToDegrees( hfLayer-&gt;getHeightField() );

    <span class="keywordtype">bool</span> markTileLoaded = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> ( <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36">loadingPolicy</a>()-&gt;mode().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() != LoadingPolicy::MODE_STANDARD )
    {
        markTileLoaded = <span class="keyword">true</span>;
        tile-&gt;<a class="code" href="classStreamingTile.html#adfb6e288221532b9540cd7a62fa51e74">setHasElevationHint</a>( hasElevation );
    }

    <span class="comment">// install a tile switcher:</span>
    tile-&gt;<a class="code" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2">attachToTerrain</a>( terrain );
    <span class="comment">//tile-&gt;setTerrain( terrain );</span>
    <span class="comment">//terrain-&gt;registerTile( tile );</span>

    osg::Node* result = 0L;

    <span class="comment">// create a PLOD so we can keep subdividing:</span>
    osg::PagedLOD* plod = <span class="keyword">new</span> osg::PagedLOD();
    plod-&gt;setCenter( bs.center() );
    plod-&gt;addChild( tile, min_range, max_range );

    <span class="keywordflow">if</span> ( key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &lt; (<span class="keywordtype">unsigned</span> int)<a class="code" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8">getTerrainOptions</a>().<a class="code" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55">maxLOD</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() )
    {
        plod-&gt;setFileName( 1, <a class="code" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498">createURI</a>( <a class="code" href="classOSGTileFactory.html#a66241636f7cc626665a8f5a65e8b4932">_engineId</a>, key ) ); <span class="comment">//map-&gt;getId(), key ) );</span>
        plod-&gt;setRange( 1, 0.0, min_range );
    }
    <span class="keywordflow">else</span>
    {
        plod-&gt;setRange( 0, 0, FLT_MAX );
    }

<span class="preprocessor">#if 0 //USE_FILELOCATIONCALLBACK</span>
<span class="preprocessor"></span>    <a class="code" href="namespaceosgDB.html#a0b89b70899d380c7f1cf5074a1bafaac">osgDB::Options</a>* options = <span class="keyword">new</span> <a class="code" href="namespaceosgDB.html#a0b89b70899d380c7f1cf5074a1bafaac">osgDB::Options</a>;
    options-&gt;setFileLocationCallback( <span class="keyword">new</span> FileLocationCallback);
    plod-&gt;setDatabaseOptions( options );
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    result = plod;

    <span class="comment">// Install a callback that will load the actual tile data via the pager.</span>
    result-&gt;addCullCallback( <span class="keyword">new</span> PopulateStreamingTileDataCallback( <a class="code" href="classOSGTileFactory.html#aab6f22c91e21e36c6423b18803722b9d">_cull_thread_mapf</a> ) );

    <span class="comment">// Install a cluster culler (FIXME for cube mode)</span>
    <span class="comment">//bool isCube = map-&gt;getMapOptions().coordSysType() == MapOptions::CSTYPE_GEOCENTRIC_CUBE;</span>
    <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() &amp;&amp; !mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093">isCube</a>() )
    {
        osg::ClusterCullingCallback* ccc = <a class="code" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e">createClusterCullingCallback</a>( tile, locator-&gt;getEllipsoidModel() );
        result-&gt;addCullCallback( ccc );
    }     

    <span class="keywordflow">return</span> result;
}
</pre></div>
<p><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_cgraph.png" border="0" usemap="#classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_cgraph" alt=""/></div>
<map name="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_cgraph" id="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_cgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5" title="OSGTileFactory::addPlaceholderHeightfieldLayer" alt="" coords="339,245,645,275"/><area shape="rect" id="node11" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1144,59,1333,88"/><area shape="rect" id="node17" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed" title="Tile::getElevationLayer" alt="" coords="783,405,937,435"/><area shape="rect" id="node28" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="1124,392,1353,421"/><area shape="rect" id="node30" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="780,352,940,381"/><area shape="rect" id="node32" href="classOSGTileFactory.html#a92cf1c5ea5230676b2e780e7f41ead15" title="OSGTileFactory::addPlaceholderImageLayers" alt="" coords="348,563,636,592"/><area shape="rect" id="node40" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2" title="Tile::attachToTerrain" alt="" coords="421,616,563,645"/><area shape="rect" id="node46" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49" title="Terrain::cloneTechnique" alt="" coords="412,669,572,699"/><area shape="rect" id="node48" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e" title="OSGTileFactory::createClusterCullingCallback" alt="" coords="345,459,639,488"/><area shape="rect" id="node53" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="377,723,607,752"/><area shape="rect" id="node57" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498" title="OSGTileFactory::createURI" alt="" coords="400,776,584,805"/><area shape="rect" id="node59" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="785,801,935,831"/><area shape="rect" id="node61" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="371,880,613,909"/><area shape="rect" id="node63" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="416,933,568,963"/><area shape="rect" id="node65" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="385,987,599,1016"/><area shape="rect" id="node70" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="384,1040,600,1069"/><area shape="rect" id="node72" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5" title="Terrain::getQuickReleaseGLObjects" alt="" coords="376,1093,608,1123"/><area shape="rect" id="node74" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="379,1147,605,1176"/><area shape="rect" id="node76" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419" title="Terrain::getTile" alt="" coords="437,1200,547,1229"/><area shape="rect" id="node78" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69" title="osgEarth::TileKey::getTileId" alt="" coords="400,1253,584,1283"/><area shape="rect" id="node80" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c" title="osgEarth::Drivers::OSGTerrainOptions::heightFieldSkirtRatio" alt="" coords="305,1307,679,1336"/><area shape="rect" id="node82" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093" title="osgEarth::MapInfo::isCube" alt="" coords="403,1360,581,1389"/><area shape="rect" id="node84" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="387,1413,597,1443"/><area shape="rect" id="node86" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a" title="osgEarth::MapInfo::isPlateCarre" alt="" coords="388,1467,596,1496"/><area shape="rect" id="node88" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="367,1520,617,1549"/><area shape="rect" id="node90" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55" title="osgEarth::TerrainOptions::maxLOD" alt="" coords="379,1573,605,1603"/><area shape="rect" id="node92" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea" title="osgEarth::TerrainOptions::minTileRangeFactor" alt="" coords="347,1627,637,1656"/><area shape="rect" id="node94" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39" title="osgEarth::TerrainOptions::normalizeEdges" alt="" coords="359,1680,625,1709"/><area shape="rect" id="node96" href="classStreamingTile.html#adfb6e288221532b9540cd7a62fa51e74" title="StreamingTile::setHasElevationHint" alt="" coords="377,1733,607,1763"/><area shape="rect" id="node98" href="classTile.html#a25688e6a5dd646153764a936807f86f4" title="Tile::setTerrainTechnique" alt="" coords="408,1787,576,1816"/><area shape="rect" id="node100" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="419,1840,565,1869"/><area shape="rect" id="node104" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="409,1893,575,1923"/><area shape="rect" id="node106" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f" title="osgEarth::TerrainOptions::verticalScale" alt="" coords="367,1947,617,1976"/><area shape="rect" id="node5" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="728,139,992,168"/><area shape="rect" id="node19" href="classStreamingTile.html#af0bafc20cceb5352a94549f8524072cb" title="StreamingTile::getElevationLOD" alt="" coords="756,245,964,275"/><area shape="rect" id="node22" href="classTile.html#ad507594a8309451b6d28660347e98989" title="Tile::getTileLayersMutex" alt="" coords="777,299,943,328"/><area shape="rect" id="node24" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d" title="Tile::setElevationLayer" alt="" coords="783,35,937,64"/><area shape="rect" id="node26" href="classStreamingTile.html#af7d91ee5b56c61c775e51552592941ca" title="StreamingTile::setElevationLOD" alt="" coords="756,192,964,221"/><area shape="rect" id="node7" href="classosgEarth_1_1VerticalSpatialReference.html#ae0ec419f5e295e88d1fe20f18ad5be25" title="osgEarth::VerticalSpatialReference::createReferenceHeightField" alt="" coords="1041,165,1436,195"/><area shape="rect" id="node13" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1144,219,1333,248"/><area shape="rect" id="node15" href="classosgEarth_1_1Profile.html#a51ec4bfed483574305760252382a2b80" title="osgEarth::Profile::getVerticalSRS" alt="" coords="1131,112,1347,141"/><area shape="rect" id="node9" href="classosgEarth_1_1SpatialReference.html#a42fc6ea305be6b94340bf300d7b67dbe" title="osgEarth::SpatialReference::getGeographicSRS" alt="" coords="1487,165,1788,195"/><area shape="rect" id="node34" href="classTile.html#af8d69f8867f4fa143bf52ea4dbbd86b6" title="Tile::getCustomColorLayers" alt="" coords="768,563,952,592"/><area shape="rect" id="node36" href="classTile.html#a922827d09cea89a13cc5e3d766bbc188" title="Tile::setCustomColorLayers" alt="" coords="768,616,952,645"/><area shape="rect" id="node38" href="namespaceosgEarth_1_1Json.html#ac78f55a4c4e91e3fd75de3ad98b50bef" title="osgEarth::Json::in" alt="" coords="1175,616,1303,645"/><area shape="rect" id="node42" href="classTerrain.html#a00dae3cd76040e85488b2f6774be3780" title="Terrain::registerTile" alt="" coords="793,669,927,699"/><area shape="rect" id="node44" href="classTile.html#ad4e24d60ff60526b379cdc83d77474ec" title="Tile::getTileId" alt="" coords="1188,669,1289,699"/><area shape="rect" id="node51" href="classTile.html#a92cf92977e436cd7e767d912bc341da0" title="Tile::getVerticalScale" alt="" coords="787,459,933,488"/><area shape="rect" id="node55" href="classosgEarth_1_1TileKey.html#a20ff137204ea7b91598b5a1b3ca21126" title="osgEarth::TileKey::TileKey" alt="" coords="771,723,949,752"/></map>
</div>
</p>

<p><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_icgraph.png" border="0" usemap="#classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_icgraph" id="classOSGTileFactory_ab4f819fd114efc8c8b883176cfca55ea_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="304,5,485,35"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="533,5,744,35"/><area shape="rect" id="node7" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="792,5,1029,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab364d00d5d40d6da0822df2c78525927"></a><!-- doxytag: member="OSGTileFactory::createPopulatedTile" ref="ab364d00d5d40d6da0822df2c78525927" args="(const MapFrame &amp;mapf, Terrain *terrain, const TileKey &amp;key, bool wrapInPagedLOD, bool fallback, bool &amp;out_validData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Node * OSGTileFactory::createPopulatedTile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTerrain.html">Terrain</a> *&#160;</td>
          <td class="paramname"><em>terrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wrapInPagedLOD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_validData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00527">527</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1MapInfo.html">MapInfo</a>&amp; mapInfo = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6">getMapInfo</a>();
    <span class="keywordtype">bool</span> isPlateCarre = !mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() &amp;&amp; mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#aab5099541f4ed87f94e9bed05925cb5e">isGeographicSRS</a>();

    <span class="keyword">typedef</span> std::vector&lt;GeoImageData&gt; GeoImageDataVector;
    GeoImageDataVector image_tiles;

    <span class="comment">// Collect the image layers</span>
    <span class="keywordtype">bool</span> empty_map = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().size() == 0 &amp;&amp; mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().size() == 0;

    <span class="comment">// Create the images for the tile</span>
    <span class="keywordflow">for</span>( ImageLayerVector::const_iterator i = mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().begin(); i != mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().end(); ++i )
    {
        <a class="code" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a>* layer = i-&gt;get();
        GeoImageData imageData;

        <span class="comment">// Only try to create images if the key is valid</span>
        <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>( key ) )
        {
            imageData._image = layer-&gt;<a class="code" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3">createImage</a>( key );
            imageData._layerUID = layer-&gt;<a class="code" href="classosgEarth_1_1Layer.html#a0d511f070bd26bfb168480732f6912c1">getUID</a>();
            imageData._imageTileKey = key;
        }

        <span class="comment">// always push images, even it they are empty, so that the image_tiles vector is one-to-one</span>
        <span class="comment">// with the imageLayers() vector.</span>
        image_tiles.push_back( imageData );
    }

    <span class="keywordtype">bool</span> hasElevation = <span class="keyword">false</span>;

    <span class="comment">//Create the heightfield for the tile</span>
    osg::ref_ptr&lt;osg::HeightField&gt; hf;
    <span class="keywordflow">if</span> ( mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().size() &gt; 0 )
    {
        mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f">getHeightField</a>( key, <span class="keyword">false</span>, hf, 0L, <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8">elevationInterpolation</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>());     
    }

    <span class="comment">//If we are on the first LOD and we couldn&#39;t get a heightfield tile, just create an empty one.  Otherwise you can run into the situation</span>
    <span class="comment">//where you could have an inset heightfield on one hemisphere and the whole other hemisphere won&#39;t show up.</span>
    <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() &amp;&amp; key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &lt;= 1 &amp;&amp; !hf.valid())
    {
        hf = <a class="code" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a>( key );
    }
    hasElevation = hf.valid();

    <span class="comment">//Determine if we&#39;ve created any images</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numValidImages = 0;
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; image_tiles.size(); ++i)
    {
        <span class="keywordflow">if</span> (image_tiles[i]._image.valid()) numValidImages++;
    }


    <span class="comment">//If we couldn&#39;t create any imagery or heightfields, bail out</span>
    <span class="keywordflow">if</span> (!hf.valid() &amp;&amp; (numValidImages == 0) &amp;&amp; !empty_map)
    {
        <a class="code" href="HTTPClient_8cpp.html#ac6600c2662696d8b43a4deb6877c8591">OE_DEBUG</a> &lt;&lt; <a class="code" href="OSGTileFactory_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Could not create any imagery or heightfields for &quot;</span> &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt;<span class="stringliteral">&quot;.  Not building tile&quot;</span> &lt;&lt; std::endl;
        validData = <span class="keyword">false</span>;

        <span class="comment">//If we&#39;re not asked to fallback on previous LOD&#39;s and we have no data, return NULL</span>
        <span class="keywordflow">if</span> (!fallback)
        {
            <span class="keywordflow">return</span> <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        }
    }
    <span class="keywordflow">else</span>
    {
        validData = <span class="keyword">true</span>;
    }

    <span class="comment">//Try to interpolate any missing image layers from parent tiles</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4">imageLayers</a>().size(); i++ )
    {
        <span class="keywordflow">if</span> (!image_tiles[i]._image.valid())
        {
            <span class="keywordflow">if</span> (mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4">getImageLayerAt</a>(i)-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>(key))
            {
                <span class="comment">//If the key was valid and we have no image, then something possibly went wrong with the image creation such as a server being busy.</span>
                <a class="code" href="classOSGTileFactory.html#a1de6601ddf3830ebb93dac07c00bcfb3">createValidGeoImage</a>(mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4">getImageLayerAt</a>(i), key, image_tiles[i]._image, image_tiles[i]._imageTileKey);
            }

            <span class="comment">//If we still couldn&#39;t create an image, either something is really wrong or the key wasn&#39;t valid, so just create a transparent placeholder image</span>
            <span class="keywordflow">if</span> (!image_tiles[i]._image.valid())
            {
                <span class="comment">//If the image is not valid, create an empty texture as a placeholder</span>
                image_tiles[i]._image = <a class="code" href="classosgEarth_1_1GeoImage.html">GeoImage</a>(ImageUtils::createEmptyImage(), key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>());
                image_tiles[i]._imageTileKey = key;
            }
        }
    }

    <span class="comment">//Fill in missing heightfield information from parent tiles</span>
    <span class="keywordflow">if</span> (!hf.valid())
    {
        <span class="comment">//We have no heightfield sources, </span>
        <span class="keywordflow">if</span> ( mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885">elevationLayers</a>().size() == 0 )
        {
            hf = <a class="code" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a>( key );
        }
        <span class="keywordflow">else</span>
        {
            <span class="comment">//Try to get a heightfield again, but this time fallback on parent tiles</span>
            <span class="keywordflow">if</span> ( mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f">getHeightField</a>( key, <span class="keyword">true</span>, hf, 0L, <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8">elevationInterpolation</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() ) )
            {
                hasElevation = <span class="keyword">true</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="comment">//We couldn&#39;t get any heightfield, so just create an empty one.</span>
                hf = <a class="code" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7">createEmptyHeightField</a>( key );
            }
        }
    }


    <span class="comment">// In a Plate Carre tesselation, scale the heightfield elevations from meters to degrees</span>
    <span class="keywordflow">if</span> ( isPlateCarre )
    {
        HeightFieldUtils::scaleHeightFieldToDegrees( hf.get() );
    }

    osg::ref_ptr&lt;GeoLocator&gt; locator = GeoLocator::createForKey( key, mapInfo );
    osgTerrain::HeightFieldLayer* hf_layer = <span class="keyword">new</span> osgTerrain::HeightFieldLayer();
    hf_layer-&gt;setLocator( locator.get() );
    hf_layer-&gt;setHeightField( hf.get() );

    <span class="keywordtype">bool</span> isStreaming = 
        <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36">loadingPolicy</a>()-&gt;mode() == LoadingPolicy::MODE_SEQUENTIAL ||
        <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36">loadingPolicy</a>()-&gt;mode() == LoadingPolicy::MODE_PREEMPTIVE;

    <a class="code" href="classTile.html">Tile</a>* tile = terrain-&gt;<a class="code" href="classTerrain.html#a52edad697f780d4ad9ce90f07308c5fb">createTile</a>( key, locator.get() );
    tile-&gt;<a class="code" href="classTile.html#a25688e6a5dd646153764a936807f86f4">setTerrainTechnique</a>( terrain-&gt;<a class="code" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49">cloneTechnique</a>() );
    tile-&gt;<a class="code" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd">setVerticalScale</a>( <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f">verticalScale</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() );
    <span class="comment">//tile-&gt;setLocator( locator.get() );</span>
    tile-&gt;<a class="code" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d">setElevationLayer</a>( hf_layer );
    <span class="comment">//tile-&gt;setRequiresNormals( true );</span>
    tile-&gt;setDataVariance(osg::Object::DYNAMIC);

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>    <span class="comment">//Attach an updatecallback to normalize the edges of TerrainTiles.</span>
    <span class="keywordflow">if</span> (hasElevation &amp;&amp; <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39">normalizeEdges</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() )
    {
        tile-&gt;setUpdateCallback(<span class="keyword">new</span> TerrainTileEdgeNormalizerUpdateCallback());
        tile-&gt;setDataVariance(osg::Object::DYNAMIC);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="comment">//Assign the terrain system to the TerrainTile.</span>
    <span class="comment">//It is very important the terrain system is set while the MapConfig&#39;s sourceMutex is locked.</span>
    <span class="comment">//This registers the terrain tile so that adding/removing layers are always in sync.  If you don&#39;t do this</span>
    <span class="comment">//you can end up with a situation where the database pager is waiting to merge a tile, then a layer is added, then</span>
    <span class="comment">//the tile is finally merged and is out of sync.</span>

    <span class="keywordtype">double</span> min_units_per_pixel = DBL_MAX;

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>    <span class="comment">// create contour layer:</span>
    <span class="keywordflow">if</span> (map-&gt;getContourTransferFunction() != <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        osgTerrain::ContourLayer* contourLayer(<span class="keyword">new</span> osgTerrain::ContourLayer(map-&gt;getContourTransferFunction()));

        contourLayer-&gt;setMagFilter(<a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.getContourMagFilter().value());
        contourLayer-&gt;setMinFilter(<a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.getContourMinFilter().value());
        tile-&gt;<a class="code" href="classTile.html#ae2949d83ef131a1022e28d3fd9b8e2d3">setCustomColorLayer</a>(layer,contourLayer); <span class="comment">//TODO: need layerUID, not layer index here -GW</span>
        ++layer;
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; image_tiles.size(); ++i)
    {
        <span class="keywordflow">if</span> (image_tiles[i]._image.valid())
        {
            <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1GeoImage.html">GeoImage</a>&amp; geo_image = image_tiles[i].<a class="code" href="classosgEarth_1_1GeoImage.html#aa70fb92101c2b2899b665fdc1616fff6">_image</a>;

            <span class="keywordtype">double</span> img_xmin, img_ymin, img_xmax, img_ymax;
            geo_image.<a class="code" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967">getExtent</a>().<a class="code" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f">getBounds</a>( img_xmin, img_ymin, img_xmax, img_ymax );

            <span class="comment">//Specify a new locator for the color with the coordinates of the TileKey that was actually used to create the image</span>
            osg::ref_ptr&lt;GeoLocator&gt; img_locator = key.<a class="code" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae">getProfile</a>()-&gt;<a class="code" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b">getSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#adbe193d96c5a5e4554a7d6bc97746c32">createLocator</a>( 
                img_xmin, img_ymin, img_xmax, img_ymax,
                isPlateCarre );

            <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() )
                img_locator-&gt;setCoordinateSystemType( osgTerrain::Locator::GEOCENTRIC );

            tile-&gt;<a class="code" href="classTile.html#ae2949d83ef131a1022e28d3fd9b8e2d3">setCustomColorLayer</a>( <a class="code" href="classCustomColorLayer.html">CustomColorLayer</a>(
                mapf.<a class="code" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4">getImageLayerAt</a>(i),
                geo_image.<a class="code" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978">getImage</a>(),
                img_locator.get(),
                key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>(),
                key) );

            <span class="keywordtype">double</span> upp = geo_image.<a class="code" href="classosgEarth_1_1GeoImage.html#acc1334324ee3e5a3c3d18057ad4b0418">getUnitsPerPixel</a>();

            <span class="comment">// Scale the units per pixel to degrees if the image is mercator (and the key is geo)</span>
            <span class="keywordflow">if</span> ( geo_image.<a class="code" href="classosgEarth_1_1GeoImage.html#a8df3956101aaba42fc535382431b9ba0">getSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4">isMercator</a>() &amp;&amp; key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>().<a class="code" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3">getSRS</a>()-&gt;<a class="code" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3">isGeographic</a>() )
                upp *= 1.0f/111319.0f;

            min_units_per_pixel = osg::minimum(upp, min_units_per_pixel);
        }
    }

    osg::BoundingSphere bs = tile-&gt;getBound();
    <span class="keywordtype">double</span> max_range = 1e10;
    <span class="keywordtype">double</span> radius = bs.radius();

<span class="preprocessor">#if 1</span>
<span class="preprocessor"></span>    <span class="keywordtype">double</span> min_range = radius * <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea">minTileRangeFactor</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>();
    <span class="comment">//osg::LOD::RangeMode mode = osg::LOD::DISTANCE_FROM_EYE_POINT;</span>
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordtype">double</span> width = key.<a class="code" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4">getExtent</a>().<a class="code" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d">width</a>();     
    <span class="keywordflow">if</span> (min_units_per_pixel == DBL_MAX) min_units_per_pixel = width/256.0;
    <span class="keywordtype">double</span> min_range = (width / min_units_per_pixel) * <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.getMinTileRangeFactor(); 
    <span class="comment">//osg::LOD::RangeMode mode = osg::LOD::PIXEL_SIZE_ON_SCREEN;</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>

    <span class="comment">// a skirt hides cracks when transitioning between LODs:</span>
    hf-&gt;setSkirtHeight(radius * <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>.<a class="code" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c">heightFieldSkirtRatio</a>().<a class="code" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e">get</a>() );

    <span class="comment">// for now, cluster culling does not work for CUBE rendering</span>
    <span class="comment">//bool isCube = mapInfo.isCube(); //map-&gt;getMapOptions().coordSysType() == MapOptions::CSTYPE_GEOCENTRIC_CUBE;</span>
    <span class="keywordflow">if</span> ( mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6">isGeocentric</a>() &amp;&amp; !mapInfo.<a class="code" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093">isCube</a>() )
    {
        <span class="comment">//TODO:  Work on cluster culling computation for cube faces</span>
        osg::ClusterCullingCallback* ccc = <a class="code" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e">createClusterCullingCallback</a>(tile, locator-&gt;getEllipsoidModel() );
        tile-&gt;setCullCallback( ccc );
    }

    <span class="comment">// Wait until now, when the tile is fully baked, to assign the terrain to the tile.</span>
    <span class="comment">// Placeholder tiles might try to locate this tile as an ancestor, and access its layers</span>
    <span class="comment">// and locators...so they must be intact before making this tile available via setTerrain.</span>
    <span class="comment">//</span>
    <span class="comment">// If there&#39;s already a placeholder tile registered, this will be ignored. If there isn&#39;t,</span>
    <span class="comment">// this will register the new tile.</span>
    tile-&gt;<a class="code" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2">attachToTerrain</a>( terrain );
    <span class="comment">//tile-&gt;setTerrain( terrain );</span>
    <span class="comment">//terrain-&gt;registerTile( tile );</span>

    <span class="keywordflow">if</span> ( isStreaming &amp;&amp; key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &gt; 0 )
    {
        <span class="keyword">static_cast&lt;</span><a class="code" href="classStreamingTile.html">StreamingTile</a>*<span class="keyword">&gt;</span>(tile)-&gt;setHasElevationHint( hasElevation );
    }

    osg::Node* result = 0L;

    <span class="keywordflow">if</span> (wrapInPagedLOD)
    {
        <span class="comment">// create a PLOD so we can keep subdividing:</span>
        osg::PagedLOD* plod = <span class="keyword">new</span> osg::PagedLOD();
        plod-&gt;setCenter( bs.center() );
        plod-&gt;addChild( tile, min_range, max_range );

        std::string filename = <a class="code" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498">createURI</a>( <a class="code" href="classOSGTileFactory.html#a66241636f7cc626665a8f5a65e8b4932">_engineId</a>, key ); <span class="comment">//map-&gt;getId(), key );</span>

        <span class="comment">//Only add the next tile if it hasn&#39;t been blacklisted</span>
        <span class="keywordtype">bool</span> isBlacklisted = <a class="code" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09">osgEarth::Registry::instance</a>()-&gt;<a class="code" href="classosgEarth_1_1Registry.html#ab233653889a5726d73ef5e7c7972c0a2">isBlacklisted</a>( filename );
        <span class="keywordflow">if</span> (!isBlacklisted &amp;&amp; key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &lt; (<span class="keywordtype">unsigned</span> int)<a class="code" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8">getTerrainOptions</a>().<a class="code" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55">maxLOD</a>().<a class="code" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820">value</a>() &amp;&amp; validData )
        {
            plod-&gt;setFileName( 1, filename  );
            plod-&gt;setRange( 1, 0.0, min_range );
        }
        <span class="keywordflow">else</span>
        {
            plod-&gt;setRange( 0, 0, FLT_MAX );
        }

<span class="preprocessor">#if USE_FILELOCATIONCALLBACK</span>
<span class="preprocessor"></span>        <a class="code" href="namespaceosgDB.html#a0b89b70899d380c7f1cf5074a1bafaac">osgDB::Options</a>* options = <span class="keyword">new</span> <a class="code" href="namespaceosgDB.html#a0b89b70899d380c7f1cf5074a1bafaac">osgDB::Options</a>;
        options-&gt;setFileLocationCallback( <span class="keyword">new</span> FileLocationCallback() );
        plod-&gt;setDatabaseOptions( options );
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        result = plod;

        <span class="keywordflow">if</span> ( isStreaming )
            result-&gt;addCullCallback( <span class="keyword">new</span> PopulateStreamingTileDataCallback( <a class="code" href="classOSGTileFactory.html#aab6f22c91e21e36c6423b18803722b9d">_cull_thread_mapf</a> ) );
    }
    <span class="keywordflow">else</span>
    {
        result = tile;
    }

    <span class="keywordflow">return</span> result;
}
</pre></div>
<p><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_cgraph.png" border="0" usemap="#classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_cgraph" alt=""/></div>
<map name="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_cgraph" id="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_cgraph">
<area shape="rect" id="node3" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2" title="Tile::attachToTerrain" alt="" coords="411,5,552,35"/><area shape="rect" id="node5" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49" title="Terrain::cloneTechnique" alt="" coords="401,59,561,88"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e" title="OSGTileFactory::createClusterCullingCallback" alt="" coords="335,112,628,141"/><area shape="rect" id="node9" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="720,215,984,244"/><area shape="rect" id="node11" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1073,209,1263,239"/><area shape="rect" id="node13" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1073,263,1263,292"/><area shape="rect" id="node15" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3" title="osgEarth::ImageLayer::createImage" alt="" coords="737,623,967,652"/><area shape="rect" id="node17" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="1092,367,1244,396"/><area shape="rect" id="node19" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="1061,420,1275,449"/><area shape="rect" id="node21" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="1065,473,1271,503"/><area shape="rect" id="node24" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="1067,527,1269,556"/><area shape="rect" id="node27" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1351,607,1548,636"/><area shape="rect" id="node29" href="classosgEarth_1_1GeoImage.html#a8df3956101aaba42fc535382431b9ba0" title="osgEarth::GeoImage::getSRS" alt="" coords="1071,580,1265,609"/><area shape="rect" id="node32" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="1081,684,1255,713"/><area shape="rect" id="node35" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09" title="osgEarth::Registry::instance" alt="" coords="1075,737,1261,767"/><area shape="rect" id="node37" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="1035,844,1301,873"/><area shape="rect" id="node39" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="1043,791,1293,820"/><area shape="rect" id="node41" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1093,931,1243,960"/><area shape="rect" id="node43" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1085,1133,1251,1163"/><area shape="rect" id="node45" href="classosgEarth_1_1SpatialReference.html#adbe193d96c5a5e4554a7d6bc97746c32" title="osgEarth::SpatialReference::createLocator" alt="" coords="717,879,987,908"/><area shape="rect" id="node48" href="classTerrain.html#a52edad697f780d4ad9ce90f07308c5fb" title="Terrain::createTile" alt="" coords="419,1033,544,1063"/><area shape="rect" id="node50" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498" title="OSGTileFactory::createURI" alt="" coords="760,1032,944,1061"/><area shape="rect" id="node53" href="classOSGTileFactory.html#a1de6601ddf3830ebb93dac07c00bcfb3" title="OSGTileFactory::createValidGeoImage" alt="" coords="357,980,605,1009"/><area shape="rect" id="node56" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="740,1185,964,1215"/><area shape="rect" id="node58" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="1053,1212,1283,1241"/><area shape="rect" id="node61" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8" title="osgEarth::TerrainOptions::elevationInterpolation" alt="" coords="332,1289,631,1319"/><area shape="rect" id="node63" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="360,1343,603,1372"/><area shape="rect" id="node69" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f" title="osgEarth::MapFrame::getHeightField" alt="" coords="364,1396,599,1425"/><area shape="rect" id="node72" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4" title="osgEarth::MapFrame::getImageLayerAt" alt="" coords="356,1449,607,1479"/><area shape="rect" id="node75" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="373,1503,589,1532"/><area shape="rect" id="node81" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="368,1556,595,1585"/><area shape="rect" id="node83" href="classosgEarth_1_1Layer.html#a0d511f070bd26bfb168480732f6912c1" title="osgEarth::Layer::getUID" alt="" coords="400,1609,563,1639"/><area shape="rect" id="node85" href="classosgEarth_1_1GeoImage.html#acc1334324ee3e5a3c3d18057ad4b0418" title="osgEarth::GeoImage::getUnitsPerPixel" alt="" coords="357,1713,605,1743"/><area shape="rect" id="node87" href="classosgEarth_1_1GeoExtent.html#a1161940ef6756ba732ff7fc7da21db2d" title="osgEarth::GeoExtent::width" alt="" coords="761,1688,943,1717"/><area shape="rect" id="node89" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c" title="osgEarth::Drivers::OSGTerrainOptions::heightFieldSkirtRatio" alt="" coords="295,1767,668,1796"/><area shape="rect" id="node91" href="classosgEarth_1_1MapFrame.html#a1445bd530fe5debcbda43377ad757cd4" title="osgEarth::MapFrame::imageLayers" alt="" coords="368,1820,595,1849"/><area shape="rect" id="node94" href="classosgEarth_1_1Registry.html#ab233653889a5726d73ef5e7c7972c0a2" title="osgEarth::Registry::isBlacklisted" alt="" coords="375,1873,588,1903"/><area shape="rect" id="node96" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093" title="osgEarth::MapInfo::isCube" alt="" coords="392,1927,571,1956"/><area shape="rect" id="node98" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="376,1980,587,2009"/><area shape="rect" id="node101" href="classosgEarth_1_1MapInfo.html#aab5099541f4ed87f94e9bed05925cb5e" title="osgEarth::MapInfo::isGeographicSRS" alt="" coords="361,2033,601,2063"/><area shape="rect" id="node105" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="356,2087,607,2116"/><area shape="rect" id="node107" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55" title="osgEarth::TerrainOptions::maxLOD" alt="" coords="368,2140,595,2169"/><area shape="rect" id="node109" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea" title="osgEarth::TerrainOptions::minTileRangeFactor" alt="" coords="336,2193,627,2223"/><area shape="rect" id="node111" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39" title="osgEarth::TerrainOptions::normalizeEdges" alt="" coords="348,2247,615,2276"/><area shape="rect" id="node113" href="classTile.html#ae2949d83ef131a1022e28d3fd9b8e2d3" title="Tile::setCustomColorLayer" alt="" coords="392,2300,571,2329"/><area shape="rect" id="node115" href="classTile.html#a1935c9b44cd11fa87461c077617fe92d" title="Tile::setElevationLayer" alt="" coords="404,2353,559,2383"/><area shape="rect" id="node117" href="classTile.html#a25688e6a5dd646153764a936807f86f4" title="Tile::setTerrainTechnique" alt="" coords="397,2407,565,2436"/><area shape="rect" id="node119" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="408,2460,555,2489"/><area shape="rect" id="node123" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f" title="osgEarth::TerrainOptions::verticalScale" alt="" coords="356,2513,607,2543"/></map>
</div>
</p>

<p><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_icgraph.png" border="0" usemap="#classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_icgraph" id="classOSGTileFactory_ab364d00d5d40d6da0822df2c78525927_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="293,5,475,35"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="523,5,733,35"/><area shape="rect" id="node7" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="781,5,1019,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab8ed3db652e0f4ca68fd663d1f686821"></a><!-- doxytag: member="OSGTileFactory::createSubTiles" ref="ab8ed3db652e0f4ca68fd663d1f686821" args="(const MapFrame &amp;mapf, Terrain *terrain, const TileKey &amp;key, bool populateLayers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Node * OSGTileFactory::createSubTiles </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTerrain.html">Terrain</a> *&#160;</td>
          <td class="paramname"><em>terrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>populateLayers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a node graph containing four tiles that correspond to the four subkeys of the provided TileKey. </p>

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00123">123</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a> k0 = key.<a class="code" href="classosgEarth_1_1TileKey.html#a4e8ee0718c5fc1700ca7a4a7c29d93c4">createChildKey</a>(0);
    <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a> k1 = key.<a class="code" href="classosgEarth_1_1TileKey.html#a4e8ee0718c5fc1700ca7a4a7c29d93c4">createChildKey</a>(1);
    <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a> k2 = key.<a class="code" href="classosgEarth_1_1TileKey.html#a4e8ee0718c5fc1700ca7a4a7c29d93c4">createChildKey</a>(2);
    <a class="code" href="classosgEarth_1_1TileKey.html">TileKey</a> k3 = key.<a class="code" href="classosgEarth_1_1TileKey.html#a4e8ee0718c5fc1700ca7a4a7c29d93c4">createChildKey</a>(3);

    <span class="keywordtype">bool</span> hasValidData = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> validData;

    <span class="keywordtype">bool</span> fallback = <span class="keyword">false</span>;
    osg::ref_ptr&lt;osg::Node&gt; q0 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k0, populateLayers, <span class="keyword">true</span>, fallback, validData);
    <span class="keywordflow">if</span> (!hasValidData &amp;&amp; validData) hasValidData = <span class="keyword">true</span>;

    osg::ref_ptr&lt;osg::Node&gt; q1 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k1, populateLayers, <span class="keyword">true</span>, fallback, validData );
    <span class="keywordflow">if</span> (!hasValidData &amp;&amp; validData) hasValidData = <span class="keyword">true</span>;

    osg::ref_ptr&lt;osg::Node&gt; q2 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k2, populateLayers, <span class="keyword">true</span>, fallback, validData );
    <span class="keywordflow">if</span> (!hasValidData &amp;&amp; validData) hasValidData = <span class="keyword">true</span>;

    osg::ref_ptr&lt;osg::Node&gt; q3 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k3, populateLayers, <span class="keyword">true</span>, fallback, validData );
    <span class="keywordflow">if</span> (!hasValidData &amp;&amp; validData) hasValidData = <span class="keyword">true</span>;

    <span class="keywordflow">if</span> (!hasValidData)
    {
        <a class="code" href="HTTPClient_8cpp.html#ac6600c2662696d8b43a4deb6877c8591">OE_DEBUG</a> &lt;&lt; <a class="code" href="OSGTileFactory_8cpp.html#aa499bb75bb504909cd0a72baf48c4653">LC</a> &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t create any quadrants for &quot;</span> &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt; <span class="stringliteral">&quot; time to stop subdividing!&quot;</span> &lt;&lt; std::endl;
        <span class="keywordflow">return</span> <a class="code" href="Export.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

    osg::Group* tile_parent = <span class="keyword">new</span> osg::Group();

    fallback = <span class="keyword">true</span>;
    <span class="comment">//Fallback on tiles if we couldn&#39;t create any</span>
    <span class="keywordflow">if</span> (!q0.valid())
    {
        q0 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k0, populateLayers, <span class="keyword">true</span>, fallback, validData);
    }

    <span class="keywordflow">if</span> (!q1.valid())
    {
        q1 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k1, populateLayers, <span class="keyword">true</span>, fallback, validData);
    }

    <span class="keywordflow">if</span> (!q2.valid())
    {
        q2 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k2, populateLayers, <span class="keyword">true</span>, fallback, validData);
    }

    <span class="keywordflow">if</span> (!q3.valid())
    {        
        q3 = <a class="code" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4">createTile</a>( mapf, terrain, k3, populateLayers, <span class="keyword">true</span>, fallback, validData);
    }

    tile_parent-&gt;addChild( q0.get() );
    tile_parent-&gt;addChild( q1.get() );
    tile_parent-&gt;addChild( q2.get() );
    tile_parent-&gt;addChild( q3.get() );
    <span class="keywordflow">return</span> tile_parent;
}
</pre></div>
<p><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_cgraph.png" border="0" usemap="#classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_cgraph" alt=""/></div>
<map name="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_cgraph" id="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TileKey.html#a4e8ee0718c5fc1700ca7a4a7c29d93c4" title="osgEarth::TileKey::createChildKey" alt="" coords="265,5,487,35"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="285,939,467,968"/><area shape="rect" id="node38" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1604,604,1753,633"/><area shape="rect" id="node5" href="classosgEarth_1_1TileKey.html#a20ff137204ea7b91598b5a1b3ca21126" title="osgEarth::TileKey::TileKey" alt="" coords="1589,83,1768,112"/><area shape="rect" id="node9" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="537,939,785,968"/><area shape="rect" id="node88" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="543,1739,780,1768"/><area shape="rect" id="node11" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5" title="OSGTileFactory::addPlaceholderHeightfieldLayer" alt="" coords="869,629,1176,659"/><area shape="rect" id="node15" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1584,707,1773,736"/><area shape="rect" id="node19" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed" title="Tile::getElevationLayer" alt="" coords="1313,448,1468,477"/><area shape="rect" id="node22" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="1311,552,1471,581"/><area shape="rect" id="node24" href="classOSGTileFactory.html#a92cf1c5ea5230676b2e780e7f41ead15" title="OSGTileFactory::addPlaceholderImageLayers" alt="" coords="879,576,1167,605"/><area shape="rect" id="node26" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2" title="Tile::attachToTerrain" alt="" coords="952,1099,1093,1128"/><area shape="rect" id="node28" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49" title="Terrain::cloneTechnique" alt="" coords="943,1259,1103,1288"/><area shape="rect" id="node30" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e" title="OSGTileFactory::createClusterCullingCallback" alt="" coords="876,1152,1169,1181"/><area shape="rect" id="node33" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="1276,160,1505,189"/><area shape="rect" id="node36" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498" title="OSGTileFactory::createURI" alt="" coords="931,1205,1115,1235"/><area shape="rect" id="node40" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="901,939,1144,968"/><area shape="rect" id="node42" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="1603,2207,1755,2236"/><area shape="rect" id="node44" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="1572,2260,1785,2289"/><area shape="rect" id="node48" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="908,992,1137,1021"/><area shape="rect" id="node50" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="915,1045,1131,1075"/><area shape="rect" id="node52" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5" title="Terrain::getQuickReleaseGLObjects" alt="" coords="1275,1495,1507,1524"/><area shape="rect" id="node54" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="909,1419,1136,1448"/><area shape="rect" id="node56" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419" title="Terrain::getTile" alt="" coords="968,363,1077,392"/><area shape="rect" id="node58" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69" title="osgEarth::TileKey::getTileId" alt="" coords="931,416,1115,445"/><area shape="rect" id="node60" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c" title="osgEarth::Drivers::OSGTerrainOptions::heightFieldSkirtRatio" alt="" coords="836,1365,1209,1395"/><area shape="rect" id="node62" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093" title="osgEarth::MapInfo::isCube" alt="" coords="933,1792,1112,1821"/><area shape="rect" id="node64" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="917,1472,1128,1501"/><area shape="rect" id="node66" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a" title="osgEarth::MapInfo::isPlateCarre" alt="" coords="919,469,1127,499"/><area shape="rect" id="node68" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="897,1525,1148,1555"/><area shape="rect" id="node70" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55" title="osgEarth::TerrainOptions::maxLOD" alt="" coords="909,1579,1136,1608"/><area shape="rect" id="node72" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea" title="osgEarth::TerrainOptions::minTileRangeFactor" alt="" coords="877,1632,1168,1661"/><area shape="rect" id="node74" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39" title="osgEarth::TerrainOptions::normalizeEdges" alt="" coords="889,1685,1156,1715"/><area shape="rect" id="node76" href="classStreamingTile.html#adfb6e288221532b9540cd7a62fa51e74" title="StreamingTile::setHasElevationHint" alt="" coords="908,523,1137,552"/><area shape="rect" id="node78" href="classTile.html#a25688e6a5dd646153764a936807f86f4" title="Tile::setTerrainTechnique" alt="" coords="939,1739,1107,1768"/><area shape="rect" id="node80" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="949,1312,1096,1341"/><area shape="rect" id="node84" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1596,2153,1761,2183"/><area shape="rect" id="node86" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f" title="osgEarth::TerrainOptions::verticalScale" alt="" coords="897,885,1148,915"/><area shape="rect" id="node13" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="1259,707,1523,736"/><area shape="rect" id="node17" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1584,2100,1773,2129"/><area shape="rect" id="node94" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3" title="osgEarth::ImageLayer::createImage" alt="" coords="1276,2207,1505,2236"/><area shape="rect" id="node98" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="1576,2441,1781,2471"/><area shape="rect" id="node101" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="1577,2336,1780,2365"/><area shape="rect" id="node106" href="classosgEarth_1_1SpatialReference.html#adbe193d96c5a5e4554a7d6bc97746c32" title="osgEarth::SpatialReference::createLocator" alt="" coords="888,2568,1157,2597"/><area shape="rect" id="node108" href="classTerrain.html#a52edad697f780d4ad9ce90f07308c5fb" title="Terrain::createTile" alt="" coords="960,2000,1085,2029"/><area shape="rect" id="node112" href="classOSGTileFactory.html#a1de6601ddf3830ebb93dac07c00bcfb3" title="OSGTileFactory::createValidGeoImage" alt="" coords="899,1845,1147,1875"/><area shape="rect" id="node117" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8" title="osgEarth::TerrainOptions::elevationInterpolation" alt="" coords="873,2205,1172,2235"/><area shape="rect" id="node124" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f" title="osgEarth::MapFrame::getHeightField" alt="" coords="905,2411,1140,2440"/><area shape="rect" id="node127" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4" title="osgEarth::MapFrame::getImageLayerAt" alt="" coords="897,2464,1148,2493"/></map>
</div>
</p>

<p><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_icgraph.png" border="0" usemap="#classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_icgraph" id="classOSGTileFactory_ab8ed3db652e0f4ca68fd663d1f686821_icgraph">
<area shape="rect" id="node3" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="264,5,501,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab44e3e3c02394e6d97443ae5a08bf6e4"></a><!-- doxytag: member="OSGTileFactory::createTile" ref="ab44e3e3c02394e6d97443ae5a08bf6e4" args="(const MapFrame &amp;mapf, Terrain *terrain, const TileKey &amp;key, bool populateLayers, bool wrapInPagedLOD, bool fallback, bool &amp;out_validData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Node * OSGTileFactory::createTile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>mapf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTerrain.html">Terrain</a> *&#160;</td>
          <td class="paramname"><em>terrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>populateLayers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wrapInPagedLOD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>out_validData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a single terrain tile corresponding to the provided TileKey. </p>

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00359">359</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( populateLayers )
    {        
        <span class="keywordflow">return</span> <a class="code" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927">createPopulatedTile</a>( mapf, terrain, key, wrapInPagedLOD, fallback, out_validData);
    }
    <span class="keywordflow">else</span>
    {
        <span class="comment">//Placeholders always contain valid data</span>
        out_validData = <span class="keyword">true</span>;

        <span class="keywordflow">return</span> <a class="code" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea">createPlaceholderTile</a>(
            mapf, 
            static_cast&lt;StreamingTerrain*&gt;(terrain),
            key );
    }
}
</pre></div>
<p><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_cgraph.png" border="0" usemap="#classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_cgraph" alt=""/></div>
<map name="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_cgraph" id="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_cgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="236,1843,484,1873"/><area shape="rect" id="node81" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="241,993,479,1022"/><area shape="rect" id="node5" href="classOSGTileFactory.html#a453528b2130cd668c295fe5633c107d5" title="OSGTileFactory::addPlaceholderHeightfieldLayer" alt="" coords="568,2334,875,2363"/><area shape="rect" id="node9" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1283,2283,1472,2313"/><area shape="rect" id="node13" href="classTile.html#a36219d91d8b17471099bcc5c4bc1b2ed" title="Tile::getElevationLayer" alt="" coords="1012,2337,1167,2366"/><area shape="rect" id="node16" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="1009,2230,1169,2259"/><area shape="rect" id="node18" href="classOSGTileFactory.html#a92cf1c5ea5230676b2e780e7f41ead15" title="OSGTileFactory::addPlaceholderImageLayers" alt="" coords="577,2438,865,2467"/><area shape="rect" id="node20" href="classTile.html#aa33a4d26202bd159fa3d66af2afec3a2" title="Tile::attachToTerrain" alt="" coords="651,1870,792,1899"/><area shape="rect" id="node22" href="classTerrain.html#a10ac75e6178e982ed12d727a38503d49" title="Terrain::cloneTechnique" alt="" coords="641,1070,801,1099"/><area shape="rect" id="node24" href="classOSGTileFactory.html#ab377aa30fd1fe2370c68dc1806d6625e" title="OSGTileFactory::createClusterCullingCallback" alt="" coords="575,2126,868,2155"/><area shape="rect" id="node27" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="975,1707,1204,1737"/><area shape="rect" id="node29" href="classOSGTileFactory.html#aeae40eadda3cb1c58ea89732086df498" title="OSGTileFactory::createURI" alt="" coords="629,966,813,995"/><area shape="rect" id="node31" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1303,1443,1452,1473"/><area shape="rect" id="node33" href="classosgEarth_1_1MapFrame.html#a2f1751fdcda89f7f575ed022d3d2c885" title="osgEarth::MapFrame::elevationLayers" alt="" coords="600,1337,843,1366"/><area shape="rect" id="node35" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="1301,707,1453,737"/><area shape="rect" id="node37" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="1271,442,1484,471"/><area shape="rect" id="node41" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="607,1390,836,1419"/><area shape="rect" id="node43" href="classosgEarth_1_1MapFrame.html#a64a5e9c5f241d30feb9ec84b97615bf6" title="osgEarth::MapFrame::getMapInfo" alt="" coords="613,1443,829,1473"/><area shape="rect" id="node45" href="classTerrain.html#a133ce49e65099e67689c8d7b06a973c5" title="Terrain::getQuickReleaseGLObjects" alt="" coords="973,1125,1205,1154"/><area shape="rect" id="node47" href="classOSGTileFactory.html#ac8fe874517a3161b5b25520888afeab8" title="OSGTileFactory::getTerrainOptions" alt="" coords="608,1497,835,1526"/><area shape="rect" id="node49" href="classTerrain.html#a1dbfa03f47e66d9df59c33beb510b419" title="Terrain::getTile" alt="" coords="667,2491,776,2521"/><area shape="rect" id="node51" href="classosgEarth_1_1TileKey.html#a0cd9a498339c25af48a8342017940d69" title="osgEarth::TileKey::getTileId" alt="" coords="629,2595,813,2625"/><area shape="rect" id="node53" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html#a8fde9e358bf4fac3c0eb9a3e10e18e4c" title="osgEarth::Drivers::OSGTerrainOptions::heightFieldSkirtRatio" alt="" coords="535,1550,908,1579"/><area shape="rect" id="node55" href="classosgEarth_1_1MapInfo.html#a459b3be501973a9e653c36276926d093" title="osgEarth::MapInfo::isCube" alt="" coords="632,1603,811,1633"/><area shape="rect" id="node57" href="classosgEarth_1_1MapInfo.html#a9f24d551976461e2c60a6ab32a1beda6" title="osgEarth::MapInfo::isGeocentric" alt="" coords="616,1657,827,1686"/><area shape="rect" id="node59" href="classosgEarth_1_1MapInfo.html#a41988a8fd2ce3d44dbd36f6002bf782a" title="osgEarth::MapInfo::isPlateCarre" alt="" coords="617,2649,825,2678"/><area shape="rect" id="node61" href="classosgEarth_1_1TerrainOptions.html#ac5d9d1d0388cff6212c65df00c862b36" title="osgEarth::TerrainOptions::loadingPolicy" alt="" coords="596,1710,847,1739"/><area shape="rect" id="node63" href="classosgEarth_1_1TerrainOptions.html#a4f0aaaaa0a457a56c3dbf3aaa3143d55" title="osgEarth::TerrainOptions::maxLOD" alt="" coords="608,1763,835,1793"/><area shape="rect" id="node65" href="classosgEarth_1_1TerrainOptions.html#a837f385a9c82e19cfae8bf9207599cea" title="osgEarth::TerrainOptions::minTileRangeFactor" alt="" coords="576,1817,867,1846"/><area shape="rect" id="node67" href="classosgEarth_1_1TerrainOptions.html#a9fd5e507fb48435dfb59f9fcdf99fb39" title="osgEarth::TerrainOptions::normalizeEdges" alt="" coords="588,1123,855,1153"/><area shape="rect" id="node69" href="classStreamingTile.html#adfb6e288221532b9540cd7a62fa51e74" title="StreamingTile::setHasElevationHint" alt="" coords="607,2281,836,2310"/><area shape="rect" id="node71" href="classTile.html#a25688e6a5dd646153764a936807f86f4" title="Tile::setTerrainTechnique" alt="" coords="637,1177,805,1206"/><area shape="rect" id="node73" href="classTile.html#a7bff5e901b6b50e25cbc9ed7fc0704cd" title="Tile::setVerticalScale" alt="" coords="648,1230,795,1259"/><area shape="rect" id="node77" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="1295,495,1460,525"/><area shape="rect" id="node79" href="classosgEarth_1_1TerrainOptions.html#af2a17dc02b09c09f94cdcbdc18f6574f" title="osgEarth::TerrainOptions::verticalScale" alt="" coords="596,1283,847,1313"/><area shape="rect" id="node7" href="classOSGTileFactory.html#a02bac67948daa077059c367bce3ed6b7" title="OSGTileFactory::createEmptyHeightField" alt="" coords="957,2283,1221,2313"/><area shape="rect" id="node11" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1283,654,1472,683"/><area shape="rect" id="node87" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3" title="osgEarth::ImageLayer::createImage" alt="" coords="975,445,1204,474"/><area shape="rect" id="node91" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="1275,94,1480,123"/><area shape="rect" id="node94" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="1276,159,1479,189"/><area shape="rect" id="node97" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1535,262,1732,291"/><area shape="rect" id="node99" href="classosgEarth_1_1GeoImage.html#a8df3956101aaba42fc535382431b9ba0" title="osgEarth::GeoImage::getSRS" alt="" coords="1280,235,1475,265"/><area shape="rect" id="node102" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="1291,289,1464,318"/><area shape="rect" id="node107" href="classosgEarth_1_1SpatialReference.html#adbe193d96c5a5e4554a7d6bc97746c32" title="osgEarth::SpatialReference::createLocator" alt="" coords="587,393,856,422"/><area shape="rect" id="node109" href="classTerrain.html#a52edad697f780d4ad9ce90f07308c5fb" title="Terrain::createTile" alt="" coords="659,859,784,889"/><area shape="rect" id="node113" href="classOSGTileFactory.html#a1de6601ddf3830ebb93dac07c00bcfb3" title="OSGTileFactory::createValidGeoImage" alt="" coords="597,913,845,942"/><area shape="rect" id="node118" href="classosgEarth_1_1TerrainOptions.html#afc5ffd520aa073af45bf983e638344e8" title="osgEarth::TerrainOptions::elevationInterpolation" alt="" coords="572,497,871,526"/><area shape="rect" id="node125" href="classosgEarth_1_1MapFrame.html#ae6408f2c1b6147675aa8f298f2045c3f" title="osgEarth::MapFrame::getHeightField" alt="" coords="604,550,839,579"/><area shape="rect" id="node128" href="classosgEarth_1_1MapFrame.html#a88a1a9e4b56965ae3d33964c919de7b4" title="osgEarth::MapFrame::getImageLayerAt" alt="" coords="596,603,847,633"/></map>
</div>
</p>

<p><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_icgraph.png" border="0" usemap="#classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_icgraph" id="classOSGTileFactory_ab44e3e3c02394e6d97443ae5a08bf6e4_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="235,5,445,35"/><area shape="rect" id="node5" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="493,5,731,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeae40eadda3cb1c58ea89732086df498"></a><!-- doxytag: member="OSGTileFactory::createURI" ref="aeae40eadda3cb1c58ea89732086df498" args="(unsigned int id, const TileKey &amp;key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string OSGTileFactory::createURI </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets a pagedLOD child URI given a tile key. </p>

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00098">98</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    std::stringstream ss;
    ss &lt;&lt; key.<a class="code" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c">str</a>() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt;<span class="keywordtype">id</span>&lt;&lt;<span class="stringliteral">&quot;.osgearth_osgterrain_tile&quot;</span>;
    std::string ssStr;
    ssStr = ss.str();
    <span class="keywordflow">return</span> ssStr;
}
</pre></div>
<p><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_cgraph.png" border="0" usemap="#classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_cgraph" alt=""/></div>
<map name="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_cgraph" id="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="237,5,387,35"/></map>
</div>
</p>

<p><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_icgraph.png" border="0" usemap="#classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_icgraph" alt=""/></div>
<map name="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_icgraph" id="classOSGTileFactory_aeae40eadda3cb1c58ea89732086df498_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="239,5,487,35"/><area shape="rect" id="node11" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="244,59,481,88"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="536,32,717,61"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="765,32,976,61"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1024,32,1261,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1de6601ddf3830ebb93dac07c00bcfb3"></a><!-- doxytag: member="OSGTileFactory::createValidGeoImage" ref="a1de6601ddf3830ebb93dac07c00bcfb3" args="(ImageLayer *layer, const TileKey &amp;key, GeoImage &amp;out_image, TileKey &amp;out_actualTileKey, ProgressCallback *progress=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OSGTileFactory::createValidGeoImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1ImageLayer.html">ImageLayer</a> *&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1GeoImage.html">GeoImage</a> &amp;&#160;</td>
          <td class="paramname"><em>out_image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>out_actualTileKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1ProgressCallback.html">ProgressCallback</a> *&#160;</td>
          <td class="paramname"><em>progress</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00184">184</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//TODO:  Redo this to just grab images from the parent TerrainTiles</span>
    <span class="comment">//Try to create the image with the given key</span>
    out_actualTileKey = key;

    <span class="keywordflow">while</span> (out_actualTileKey.<a class="code" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f">valid</a>())
    {
        <span class="keywordflow">if</span> ( layer-&gt;<a class="code" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79">isKeyValid</a>(out_actualTileKey) )
        {
            out_image = layer-&gt;<a class="code" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3">createImage</a>( out_actualTileKey, progress );
            <span class="keywordflow">if</span> ( out_image.<a class="code" href="classosgEarth_1_1GeoImage.html#a40db87ae60b4dde189b1f218ff3c8777">valid</a>() )
            {
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
        out_actualTileKey = out_actualTileKey.<a class="code" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36">createParentKey</a>();
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
<p><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_cgraph.png" border="0" usemap="#classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_cgraph" id="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1ImageLayer.html#a8c5095996e9d3d9adca1d245eb1e41d3" title="osgEarth::ImageLayer::createImage" alt="" coords="305,1449,535,1479"/><area shape="rect" id="node133" href="classosgEarth_1_1GeoImage.html#a40db87ae60b4dde189b1f218ff3c8777" title="osgEarth::GeoImage::valid" alt="" coords="656,2541,832,2571"/><area shape="rect" id="node141" href="classosgEarth_1_1TileKey.html#a4b0740ba2a5f0d536566f10d6e38ec36" title="osgEarth::TileKey::createParentKey" alt="" coords="305,2647,535,2676"/><area shape="rect" id="node145" href="classosgEarth_1_1TerrainLayer.html#a3e2acf7ab5d8ac1ce8b6bb25ccfcdd79" title="osgEarth::TerrainLayer::isKeyValid" alt="" coords="308,2488,532,2517"/><area shape="rect" id="node149" href="classosgEarth_1_1TileKey.html#a71ee8076e4558c15c9499b3b1993944f" title="osgEarth::TileKey::valid" alt="" coords="664,2595,824,2624"/><area shape="rect" id="node5" href="classosgEarth_1_1GeoImage.html#a2cc9b9afcc3a69614af80ad50b1dc60a" title="osgEarth::GeoImage::addTransparentBorder" alt="" coords="959,680,1236,709"/><area shape="rect" id="node7" href="classosgEarth_1_1GeoImage.html#a8df3956101aaba42fc535382431b9ba0" title="osgEarth::GeoImage::getSRS" alt="" coords="1332,625,1527,655"/><area shape="rect" id="node9" href="classosgEarth_1_1GeoExtent.html#a77766059cde5244c2bc309cfa50800c3" title="osgEarth::GeoExtent::getSRS" alt="" coords="1617,625,1815,655"/><area shape="rect" id="node11" href="classosgEarth_1_1GeoExtent.html#a91457972e7827ea655db19203e63db00" title="osgEarth::GeoExtent::xMax" alt="" coords="1337,679,1521,708"/><area shape="rect" id="node13" href="classosgEarth_1_1GeoExtent.html#ac421fa06a19aac8423f81ca35c4f507b" title="osgEarth::GeoExtent::xMin" alt="" coords="1340,936,1519,965"/><area shape="rect" id="node15" href="classosgEarth_1_1GeoExtent.html#aa64e915bc55e7390c60f99962ff1cccc" title="osgEarth::GeoExtent::yMax" alt="" coords="1337,732,1521,761"/><area shape="rect" id="node17" href="classosgEarth_1_1GeoExtent.html#a7d9c1d5fc6c411bb01964350dcb48a8c" title="osgEarth::GeoExtent::yMin" alt="" coords="1340,836,1519,865"/><area shape="rect" id="node19" href="classosgEarth_1_1TerrainLayerOptions.html#a3e25ced92475376f2b5117af076dbb0e" title="osgEarth::TerrainLayerOptions::cacheEnabled" alt="" coords="953,1779,1241,1808"/><area shape="rect" id="node21" href="classosgEarth_1_1Profile.html#a5e2d2421cf61e304509978166c4cb46f" title="osgEarth::Profile::clampAndTransformExtent" alt="" coords="956,784,1239,813"/><area shape="rect" id="node24" href="classosgEarth_1_1Profile.html#a74622647d0d05b6823225a752ed7652b" title="osgEarth::Profile::getSRS" alt="" coords="1343,572,1516,601"/><area shape="rect" id="node27" href="classosgEarth_1_1SpatialReference.html#a398407559e7c170fc44cde6842511548" title="osgEarth::SpatialReference::isEquivalentTo" alt="" coords="1292,1043,1567,1072"/><area shape="rect" id="node29" href="classosgEarth_1_1SpatialReference.html#adfb00834f8d96146b119add7ec2c93a3" title="osgEarth::SpatialReference::isGeographic" alt="" coords="1296,989,1563,1019"/><area shape="rect" id="node31" href="classosgEarth_1_1GeoExtent.html#a8151cbc0905e59c9d88e6fad5690a0ce" title="osgEarth::GeoExtent::isValid" alt="" coords="1335,1497,1524,1527"/><area shape="rect" id="node37" href="classosgEarth_1_1ImageUtils.html#a7933afbe98be55cbf1a80dc3c739cdbd" title="osgEarth::ImageUtils::cloneImage" alt="" coords="988,1840,1207,1869"/><area shape="rect" id="node39" href="classosgEarth_1_1ImageUtils.html#aa823b7a7857bb0e568068aa1ba734c9e" title="osgEarth::ImageUtils::convertToRGBA8" alt="" coords="616,2115,872,2144"/><area shape="rect" id="node41" href="classosgEarth_1_1ImageLayer.html#a013d374663ac586c3ec4552964601978" title="osgEarth::ImageLayer::createImageWrapper" alt="" coords="605,1859,883,1888"/><area shape="rect" id="node45" href="classosgEarth_1_1TileKey.html#a44441e91bc4f46b997456786a0b749a4" title="osgEarth::TileKey::getExtent" alt="" coords="1003,1603,1192,1632"/><area shape="rect" id="node47" href="classosgEarth_1_1TerrainLayer.html#a55830499ac602f6f8dac06de5f81da2c" title="osgEarth::TerrainLayer::getName" alt="" coords="991,1897,1204,1927"/><area shape="rect" id="node49" href="classosgEarth_1_1TerrainLayer.html#a94efa05e40e34514a0255250850aa889" title="osgEarth::TerrainLayer::getTileSource" alt="" coords="976,2063,1219,2092"/><area shape="rect" id="node51" href="classosgEarth_1_1TerrainLayer.html#a5adea8725e5958108243ab7c0e69edcd" title="osgEarth::TerrainLayer::isCacheOnly" alt="" coords="979,1953,1216,1983"/><area shape="rect" id="node53" href="classosgEarth_1_1ProgressCallback.html#abe0f8bf93f93716f3aad268c0fe4c1e7" title="osgEarth::ProgressCallback::isCanceled" alt="" coords="968,2008,1227,2037"/><area shape="rect" id="node55" href="classosgEarth_1_1TileKey.html#aff6a958d86c7ac9a6300e0d9fa8aa72c" title="osgEarth::TileKey::str" alt="" coords="1023,1709,1172,1739"/><area shape="rect" id="node57" href="classosgEarth_1_1GeoImage.html#a6181f8f1702223be590e660e05c0270c" title="osgEarth::GeoImage::crop" alt="" coords="657,964,831,993"/><area shape="rect" id="node59" href="classosgEarth_1_1GeoImage.html#a7a5366e659f21c7e38bf94674182c967" title="osgEarth::GeoImage::getExtent" alt="" coords="1327,1189,1532,1219"/><area shape="rect" id="node64" href="classosgEarth_1_1GeoImage.html#aa3acdb5f74e29f48ed39d1e20b6f7e82" title="osgEarth::GeoImage::reproject" alt="" coords="997,989,1197,1019"/><area shape="rect" id="node67" href="classosgEarth_1_1GeoImage.html#a3e1f3406688972c792fe94b83e197978" title="osgEarth::GeoImage::getImage" alt="" coords="1328,1243,1531,1272"/><area shape="rect" id="node71" href="classosgEarth_1_1SpatialReference.html#a7b198b8e4dc79a8c4e04cee6b73c85c4" title="osgEarth::SpatialReference::isMercator" alt="" coords="1304,1396,1555,1425"/><area shape="rect" id="node81" href="classosgEarth_1_1TerrainLayerOptions.html#a8ad33fc2a0fd539f609d06c2b15153df" title="osgEarth::TerrainLayerOptions::edgeBufferRatio" alt="" coords="593,2168,895,2197"/><area shape="rect" id="node83" href="classosgEarth_1_1TerrainLayerOptions.html#af7d8f5abac0df078b4888c420576798b" title="osgEarth::TerrainLayerOptions::exactCropping" alt="" coords="599,2221,889,2251"/><area shape="rect" id="node85" href="structosgEarth_1_1optional.html#ac10ed828e5fb151d8cabf856e1fc3d3e" title="osgEarth::optional::get" alt="" coords="668,2275,820,2304"/><area shape="rect" id="node87" href="classosgEarth_1_1GeoExtent.html#afa0bd831daf0541cbbb161763ed9291f" title="osgEarth::GeoExtent::getBounds" alt="" coords="637,2328,851,2357"/><area shape="rect" id="node91" href="classosgEarth_1_1Registry.html#a4e53546f5785f22a28876e820d8e3850" title="osgEarth::Registry::getGlobalMercatorProfile" alt="" coords="603,5,885,35"/><area shape="rect" id="node94" href="classosgEarth_1_1Profile.html#adbc4bb3e15675c7b570820195b741abe" title="osgEarth::Profile::getIntersectingTiles" alt="" coords="624,1603,864,1632"/><area shape="rect" id="node97" href="classosgEarth_1_1TileKey.html#a3e50d16b9f2702e5d1008278a10ac6ae" title="osgEarth::TileKey::getProfile" alt="" coords="1003,1656,1192,1685"/><area shape="rect" id="node99" href="classosgEarth_1_1Profile.html#a974f5e0d0adcea82a5871eb39282d53f" title="osgEarth::Profile::isEquivalentTo" alt="" coords="991,1549,1204,1579"/><area shape="rect" id="node105" href="classosgEarth_1_1TerrainLayer.html#a8c3b22dfd214263aefe467b36b9d0828" title="osgEarth::TerrainLayer::getProfile" alt="" coords="636,2488,852,2517"/><area shape="rect" id="node112" href="classosgEarth_1_1Registry.html#a92d21da82224d40008d7218eac280c09" title="osgEarth::Registry::instance" alt="" coords="651,59,837,88"/><area shape="rect" id="node120" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="661,2381,827,2411"/><area shape="rect" id="node123" href="classosgEarth_1_1ProgressCallback.html#a2001088a9732b7ac54780eb63f026528" title="osgEarth::ProgressCallback::needsRetry" alt="" coords="615,112,873,141"/><area shape="rect" id="node125" href="classosgEarth_1_1ImageUtils.html#acff13758e0dd09db246488410de3c5ab" title="osgEarth::ImageUtils::normalizeImage" alt="" coords="621,165,867,195"/><area shape="rect" id="node128" href="classosgEarth_1_1TerrainLayerOptions.html#a18c8e5fb2aa65339b69dcab92b2ebedf" title="osgEarth::TerrainLayerOptions::reprojectedTileSize" alt="" coords="585,219,903,248"/><area shape="rect" id="node130" href="classosgEarth_1_1GeoExtent.html#ac21a265a50ad29eae8323edfa569b520" title="osgEarth::GeoExtent::scale" alt="" coords="653,272,835,301"/><area shape="rect" id="node135" href="structosgEarth_1_1optional.html#a9e71f677728602dc521d7102c9be7820" title="osgEarth::optional::value" alt="" coords="661,2435,827,2464"/><area shape="rect" id="node143" href="classosgEarth_1_1TileKey.html#a20ff137204ea7b91598b5a1b3ca21126" title="osgEarth::TileKey::TileKey" alt="" coords="655,2648,833,2677"/></map>
</div>
</p>

<p><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_icgraph.png" border="0" usemap="#classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_icgraph" alt=""/></div>
<map name="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_icgraph" id="classOSGTileFactory_a1de6601ddf3830ebb93dac07c00bcfb3_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="305,5,543,35"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="592,5,773,35"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="821,5,1032,35"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1080,5,1317,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac8fe874517a3161b5b25520888afeab8"></a><!-- doxytag: member="OSGTileFactory::getTerrainOptions" ref="ac8fe874517a3161b5b25520888afeab8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> &amp; OSGTileFactory::getTerrainOptions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets the properties that customize how this engine renders tile data. </p>

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00092">92</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">_terrainOptions</a>;
}
</pre></div>
<p><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_ac8fe874517a3161b5b25520888afeab8_icgraph.png" border="0" usemap="#classOSGTileFactory_ac8fe874517a3161b5b25520888afeab8_icgraph" alt=""/></div>
<map name="classOSGTileFactory_ac8fe874517a3161b5b25520888afeab8_icgraph" id="classOSGTileFactory_ac8fe874517a3161b5b25520888afeab8_icgraph">
<area shape="rect" id="node3" href="classOSGTileFactory.html#ab4f819fd114efc8c8b883176cfca55ea" title="OSGTileFactory::createPlaceholderTile" alt="" coords="292,5,540,35"/><area shape="rect" id="node11" href="classOSGTileFactory.html#ab364d00d5d40d6da0822df2c78525927" title="OSGTileFactory::createPopulatedTile" alt="" coords="297,59,535,88"/><area shape="rect" id="node14" href="classStreamingTile.html#ac3cacfe5a346b4b937d7af443a372158" title="StreamingTile::serviceCompletedRequests" alt="" coords="281,112,551,141"/><area shape="rect" id="node18" href="classStreamingTerrain.html#a14bfe081317e17ea196b3f3349733395" title="StreamingTerrain::StreamingTerrain" alt="" coords="303,165,529,195"/><area shape="rect" id="node5" href="classOSGTileFactory.html#ab44e3e3c02394e6d97443ae5a08bf6e4" title="OSGTileFactory::createTile" alt="" coords="621,32,803,61"/><area shape="rect" id="node7" href="classOSGTileFactory.html#ab8ed3db652e0f4ca68fd663d1f686821" title="OSGTileFactory::createSubTiles" alt="" coords="872,32,1083,61"/><area shape="rect" id="node9" href="classOSGTerrainEngineNode.html#a2feaf9a99b3123e328108c25152daa19" title="OSGTerrainEngineNode::createNode" alt="" coords="1131,32,1368,61"/><area shape="rect" id="node16" href="classStreamingTerrain.html#abec4dd0941a5da4fe93a87f9c1c68288" title="StreamingTerrain::updateTraversal" alt="" coords="601,112,823,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86a7962d1ca5e5992f19faa9c796f4a0"></a><!-- doxytag: member="OSGTileFactory::getTransformFromExtents" ref="a86a7962d1ca5e5992f19faa9c796f4a0" args="(double minX, double minY, double maxX, double maxY) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Matrixd OSGTileFactory::getTransformFromExtents </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>minX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>minY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>maxY</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00111">111</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    osg::Matrixd transform;
    transform.set(
        maxX-minX, 0.0,       0.0, 0.0,
        0.0,       maxY-minY, 0.0, 0.0,
        0.0,       0.0,       1.0, 0.0,
        minX,      minY,      0.0, 1.0); 
    <span class="keywordflow">return</span> transform;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1533d71e8c0df619d1d9cbc236d20af9"></a><!-- doxytag: member="OSGTileFactory::hasMoreLevels" ref="a1533d71e8c0df619d1d9cbc236d20af9" args="(Map *map, const TileKey &amp;key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OSGTileFactory::hasMoreLevels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classosgEarth_1_1Map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1TileKey.html">TileKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_8cpp_source.html#l00210">210</a> of file <a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//Threading::ScopedReadLock lock( map-&gt;getMapDataMutex() );</span>

    <span class="keywordtype">bool</span> more_levels = <span class="keyword">false</span>;

    <a class="code" href="namespaceosgEarth.html#a735aaffdcba342668743fbcf18779cd7">ImageLayerVector</a> imageLayers;
    map-&gt;<a class="code" href="classosgEarth_1_1Map.html#ab546d2b91a4d909de22abe3bebbe2945">getImageLayers</a>( imageLayers );

    <span class="keywordflow">for</span> ( ImageLayerVector::const_iterator i = imageLayers.begin(); i != imageLayers.end(); i++ )
    {
        <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1ImageLayerOptions.html">ImageLayerOptions</a>&amp; opt = i-&gt;get()-&gt;getImageLayerOptions();

        <span class="keywordflow">if</span> ( !opt.<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db">maxLevel</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() || key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &lt; (<span class="keywordtype">unsigned</span> int)*opt.<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db">maxLevel</a>() )
        {
            more_levels = <span class="keyword">true</span>;
            <span class="keywordflow">break</span>;
        }
    }
    <span class="keywordflow">if</span> ( !more_levels )
    {
        <a class="code" href="namespaceosgEarth.html#ada107a5ca40a6c4bee7f4d2ffe615fcd">ElevationLayerVector</a> elevLayers;
        map-&gt;<a class="code" href="classosgEarth_1_1Map.html#acb0f72abc9919e3f0e9911e4cf6203c2">getElevationLayers</a>( elevLayers );

        <span class="keywordflow">for</span>( ElevationLayerVector::const_iterator j = elevLayers.begin(); j != elevLayers.end(); j++ )
        {
            <span class="keyword">const</span> <a class="code" href="classosgEarth_1_1ElevationLayerOptions.html">ElevationLayerOptions</a>&amp; opt = j-&gt;get()-&gt;getElevationLayerOptions();

            <span class="keywordflow">if</span> ( !opt.<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db">maxLevel</a>().<a class="code" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365">isSet</a>() || key.<a class="code" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d">getLevelOfDetail</a>() &lt; (<span class="keywordtype">unsigned</span> int)*opt.<a class="code" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db">maxLevel</a>() )
            <span class="comment">//if ( !j-&gt;get()-&gt;maxLevel().isSet() || key.getLevelOfDetail() &lt; j-&gt;get()-&gt;maxLevel().get() )</span>
            {
                more_levels = <span class="keyword">true</span>;
                <span class="keywordflow">break</span>;
            }
        }
    }

    <span class="keywordflow">return</span> more_levels;
}
</pre></div>
<p><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classOSGTileFactory_a1533d71e8c0df619d1d9cbc236d20af9_cgraph.png" border="0" usemap="#classOSGTileFactory_a1533d71e8c0df619d1d9cbc236d20af9_cgraph" alt=""/></div>
<map name="classOSGTileFactory_a1533d71e8c0df619d1d9cbc236d20af9_cgraph" id="classOSGTileFactory_a1533d71e8c0df619d1d9cbc236d20af9_cgraph">
<area shape="rect" id="node3" href="classosgEarth_1_1Map.html#acb0f72abc9919e3f0e9911e4cf6203c2" title="osgEarth::Map::getElevationLayers" alt="" coords="285,5,512,35"/><area shape="rect" id="node5" href="classosgEarth_1_1Map.html#ab546d2b91a4d909de22abe3bebbe2945" title="osgEarth::Map::getImageLayers" alt="" coords="295,59,503,88"/><area shape="rect" id="node7" href="classosgEarth_1_1TileKey.html#a0ee6b25bbae560dda11987ac1e9dc69d" title="osgEarth::TileKey::getLevelOfDetail" alt="" coords="284,112,513,141"/><area shape="rect" id="node9" href="structosgEarth_1_1optional.html#aa094207bf2b22a4848989cd017dc4365" title="osgEarth::optional::isSet" alt="" coords="316,165,481,195"/><area shape="rect" id="node11" href="classosgEarth_1_1TerrainLayerOptions.html#a94728c6a1f4a5e7ec7576623968370db" title="osgEarth::TerrainLayerOptions::maxLevel" alt="" coords="268,219,529,248"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a351ed16babceac21c5c3252343f0512b"></a><!-- doxytag: member="OSGTileFactory::init" ref="a351ed16babceac21c5c3252343f0512b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OSGTileFactory::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5e1eda20b41c9a5a435cb10060f9837e"></a><!-- doxytag: member="OSGTileFactory::prepareTile" ref="a5e1eda20b41c9a5a435cb10060f9837e" args="(Tile *tile, Terrain *terrain, const MapInfo &amp;mapInfo, bool wrapInPagedLOD)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">osg::Node* OSGTileFactory::prepareTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTile.html">Tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTerrain.html">Terrain</a> *&#160;</td>
          <td class="paramname"><em>terrain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classosgEarth_1_1MapInfo.html">MapInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>mapInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>wrapInPagedLOD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wraps a tile in a paged LOD and setup up all its parameters </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aab6f22c91e21e36c6423b18803722b9d"></a><!-- doxytag: member="OSGTileFactory::_cull_thread_mapf" ref="aab6f22c91e21e36c6423b18803722b9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classosgEarth_1_1MapFrame.html">MapFrame</a>&amp; <a class="el" href="classOSGTileFactory.html#aab6f22c91e21e36c6423b18803722b9d">OSGTileFactory::_cull_thread_mapf</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_source.html#l00166">166</a> of file <a class="el" href="OSGTileFactory_source.html">OSGTileFactory</a>.</p>

</div>
</div>
<a class="anchor" id="a66241636f7cc626665a8f5a65e8b4932"></a><!-- doxytag: member="OSGTileFactory::_engineId" ref="a66241636f7cc626665a8f5a65e8b4932" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="classOSGTileFactory.html#a66241636f7cc626665a8f5a65e8b4932">OSGTileFactory::_engineId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_source.html#l00165">165</a> of file <a class="el" href="OSGTileFactory_source.html">OSGTileFactory</a>.</p>

</div>
</div>
<a class="anchor" id="a52280ece6828eb5f05824276f67d1565"></a><!-- doxytag: member="OSGTileFactory::_terrainOptions" ref="a52280ece6828eb5f05824276f67d1565" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classosgEarth_1_1Drivers_1_1OSGTerrainOptions.html">OSGTerrainOptions</a> <a class="el" href="classOSGTileFactory.html#a52280ece6828eb5f05824276f67d1565">OSGTileFactory::_terrainOptions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="OSGTileFactory_source.html#l00167">167</a> of file <a class="el" href="OSGTileFactory_source.html">OSGTileFactory</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="OSGTileFactory_source.html">OSGTileFactory</a></li>
<li>/home/cube/sources/osgearth/src/osgEarthDrivers/engine_osgterrain/<a class="el" href="OSGTileFactory_8cpp_source.html">OSGTileFactory.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jan 18 2012 15:02:46 for osgEarth by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
